(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-565ffc7d"],{"1c33":function(t,s){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABcAAAAMCAYAAACJOyb4AAACDElEQVQ4T52TX2hOcRjHv9/fOSdjb9uO7N9pFwz1ciVzMdywiyVEuTTbbiVKoVy4ceMCK0m5UBQpSkKWWtEuXBBTlL0nWmoXexlz0Nh4z/v76rzt8G7jYu+vfhfP8/yez9PzPN8fsYAz4rfWVsvrTVNi6XXL1zcP8372AsHHTVHuRjmO5caYn1VqB1E4K5b439eubi3SyZG4BaCNQj8Nc1a6BGAKQHEm/14QhV0LhlvjPA+icGnez74U8BRCL4FRx+P2n6Cc2A46hgcbJ3J3KoK7KnbEcG7K1S6CGVh2w2qfKIfgmSAKTyUdVASncEWGPyQNE9gPYAPFflE1ALYSeEFrTlQEN+ABKx1zaQ4XaTtA80AW6yHbaQxPW6Ad4u2K4DMzf0XqnBVPzixxCYDkfgLxLPgc7uFYXfYsiCP/VaTQF3wJj6Zq+bPQuuxlGIzSwqfi85beZlF7gyjclrIogHk/ew1A1z8KXG+Owm4CJYkmUkzghAYE7jbkIUkXIdwV0QxgBYBHyVvL+HhpLEKb98H/ft8CnWkBAww0RtU7iaFC6kvhNka7cc00C7+m4Lo7SsogNllgI4W+xK7C9F8pjtevzcSxHUw+B4Ah1zVbGj4OT5Z3k8KTmc/tMl+3pmfeWGYlZ1Y2yPOuslDoaZocGZ8LeIflVV7N4nUt33JP5sEzq+q1iMuCibe5NPYbJkr3FXxl5TgAAAAASUVORK5CYII="},"456a":function(t,s,e){},"72fd":function(t,s){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAAXNSR0IArs4c6QAAAX5JREFUOBGtlUtqhEAQhrsnZhPwAm4DgYDgJiCaS5gscwA9wUCOkDAn0EMks3CXEwhxIQhZzXYuILgJxtTf2NLTbWYSY4FaXVV+VvWj5GxC0jQ9J3OEi3N+0/e9gzDS96S/k7rFlSTJJ+yqcHUAPcuyO3ppQ+ql7tPGO/rAOo7jV9U+AgmyItgTOddqwC/0DUEfCf6F2DP5guM4z6T/FYbXb8uyvMjz/A0DkeFQ5gsMc4UyvEf5fFiADwKdmrNT39pRwPWKblhNAxYEAfM8z4C4rsvgmxAwIgk0/E3TMN/3D6CAhWHI2rY14gdDZFHt2GdGQF3XwgYApOs6ASuKglVVJWz6DSyLYGLT6k6MdegxGOLBQsmLCkrGcbqaoso5Q2ayZMQdKXmPknE2DaAKUwFyTlWbTAYsiwY46A/SKJ+2bTN9zuScwveDbJff2GhBNI9zzvBBkmCAJVZ5aEFoWXMFHUe0sXHboAURbQ5UtC+ZydgPpWGxBiuBeP7nF/ANONmuLNQsYn4AAAAASUVORK5CYII="},7540:function(t,s,e){"use strict";e.r(s);var a=function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"goods-detail"},[a("div",{staticClass:"operateBox"},[a("h2",{staticClass:"big-title"},[t._v("操作")]),a("div",{staticClass:"save-inner"},[a("a",{staticClass:"btn-main",attrs:{href:"javascript:;"},on:{click:function(s){return t.saveGoods()}}},[t._v("保存")]),a("router-link",{staticClass:"btn-fill-main",attrs:{to:{name:"商品管理"}}},[t._v("返回")])],1)]),a("h2",{directives:[{name:"show",rawName:"v-show",value:t.firstCateList.length>0,expression:"firstCateList.length>0"}],staticClass:"big-title"},[t._v("类目选择")]),a("div",{directives:[{name:"show",rawName:"v-show",value:t.firstCateList.length>0,expression:"firstCateList.length>0"}],staticClass:"type-wrap"},[a("div",{staticClass:"type-content-wrap",class:{mb15:t.secondCateList.length>0}},[a("div",{staticClass:"type-title"},[t._v("一级类目：")]),a("div",{staticClass:"type-content border-bottom"},t._l(t.firstCateList,function(s,e){return a("div",{key:e+"first",staticClass:"type-item",class:{active:t.selectedCate.first===s.id}},[a("a",{staticClass:"ellipsis",class:{pr40:s.count>99},attrs:{href:"javascript:;"},on:{click:function(e){return t.selectCate(1,s)}}},[t._v("\n              "+t._s(s.name)+"\n              "),a("span",{staticClass:"item-count"},[t._v("("+t._s(s.count)+")")])])])}),0)]),a("div",{directives:[{name:"show",rawName:"v-show",value:t.secondCateList.length>0,expression:"secondCateList.length>0"}],staticClass:"type-content-wrap",class:{mb15:t.thirdCateList.length>0}},[a("div",{staticClass:"type-title"},[t._v("二级类目：")]),a("div",{staticClass:"type-content"},t._l(t.secondCateList,function(s,e){return a("div",{key:e+"second",staticClass:"type-item",class:{active:t.selectedCate.second===s.id}},[a("a",{staticClass:"ellipsis a1",class:{pr40:s.count>99},attrs:{href:"javascript:;"},on:{click:function(e){return t.selectCate(2,s)}}},[t._v("\n              "+t._s(s.name)+"\n              "),a("span",{staticClass:"item-count"},[t._v("("+t._s(s.count)+")")])])])}),0)]),a("div",{directives:[{name:"show",rawName:"v-show",value:t.thirdCateList.length>0,expression:"thirdCateList.length>0"}],staticClass:"type-content-wrap mb15"},[a("div",{staticClass:"type-title"},[t._v("三级类目：")]),a("div",{staticClass:"type-content"},t._l(t.thirdCateList,function(s,e){return a("div",{key:e+"third",staticClass:"type-item",class:{active:t.selectedCate.third===s.id}},[a("a",{staticClass:"ellipsis a2",class:{pr40:s.count>99},attrs:{href:"javascript:;"},on:{click:function(e){return t.selectCate(3,s)}}},[t._v("\n              "+t._s(s.name)+"\n              "),a("span",{staticClass:"item-count"},[t._v("("+t._s(s.count)+")")])])])}),0)])]),a("h2",{staticClass:"big-title"},[t._v("宝贝图片")]),a("div",{staticClass:"img-wrap"},[a("div",{staticClass:"main-img"},[a("img",{directives:[{name:"show",rawName:"v-show",value:t.mainImgUrl,expression:"mainImgUrl"}],attrs:{src:t.mainImgUrl}}),a("div",{directives:[{name:"show",rawName:"v-show",value:!t.mainImgUrl,expression:"!mainImgUrl"}],staticClass:"main-img-null"},[t._v("未设置")]),a("p",[t._v("商品主图")])]),a("div",{staticStyle:{display:"inline-block"}},[a("draggable",{model:{value:t.goodsImages,callback:function(s){t.goodsImages=s},expression:"goodsImages"}},[a("transition-group",{staticClass:"drop-wrapper",attrs:{tag:"div"}},t._l(t.goodsImages,function(s,i){return a("div",{key:i+"img",staticClass:"img-item"},[a("img",{attrs:{src:s.url}}),a("div",{staticClass:"set-main"},[a("a",{staticClass:"btn-fill-org-main",on:{click:function(e){return t.setMainImg(s)}}},[t._v("设为主图")])]),a("img",{staticClass:"remove-img",attrs:{src:e("b4ab")},on:{click:function(e){return t.removeImg(s,i)}}})])}),0)],1)],1),a("a",{directives:[{name:"show",rawName:"v-show",value:t.goodsImages.length<=7,expression:"goodsImages.length<=7"}],staticClass:"addGoodsImg",attrs:{href:"javascript:;"}},[a("upload",{attrs:{uploadType:"2"},on:{uploadSuccess:t.uploadSuccess}},[a("img",{attrs:{src:e("8799")}})])],1),a("div",{staticClass:"sugg"},[t._v("（商品图片尺寸建议800X800px，最多8张图片）")])]),a("h2",{staticClass:"big-title"},[t._v("宝贝参数")]),a("div",{ref:"mainCON",staticClass:"info-wrap",attrs:{id:"mainCON"}},[a("h2",{staticClass:"info-title"},[t._v("基本介绍:")]),a("div",{staticClass:"info-item"},[a("span",{staticClass:"info-item-title"},[t._v("所属品牌")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.goodsParams.brandName,expression:"goodsParams.brandName"}],staticClass:"form-control",staticStyle:{width:"748px"},attrs:{type:"text",placeholder:"请选择商品品牌"},domProps:{value:t.goodsParams.brandName},on:{focus:function(s){t.showBrandModal=!0},input:function(s){s.target.composing||t.$set(t.goodsParams,"brandName",s.target.value)}}})]),a("div",{staticClass:"info-item"},[a("span",{staticClass:"info-item-title"},[t._v("商品店铺")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.goodsParams.shopName,expression:"goodsParams.shopName"}],staticClass:"form-control",staticStyle:{width:"748px"},attrs:{type:"text",placeholder:"请选择商品店铺"},domProps:{value:t.goodsParams.shopName},on:{focus:function(s){t.showShopModal=!0},input:function(s){s.target.composing||t.$set(t.goodsParams,"shopName",s.target.value)}}})]),a("div",{staticClass:"info-item"},[a("span",{staticClass:"info-item-title"},[t._v("商品名称")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.goodsParams.name,expression:"goodsParams.name"}],staticClass:"form-control",staticStyle:{width:"748px"},attrs:{type:"text",maxlength:"50",placeholder:"请输入商品名称"},domProps:{value:t.goodsParams.name},on:{input:function(s){s.target.composing||t.$set(t.goodsParams,"name",s.target.value)}}}),a("span",{staticClass:"limit30"},[t._v("（限制50字符）")])]),a("div",{staticClass:"info-item"},[a("span",{staticClass:"info-item-title"},[t._v("商品型号")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.goodsParams.modelNo,expression:"goodsParams.modelNo"}],staticClass:"form-control",staticStyle:{width:"748px"},attrs:{type:"text",maxlength:"30",placeholder:"请输入您的商品型号"},domProps:{value:t.goodsParams.modelNo},on:{input:function(s){s.target.composing||t.$set(t.goodsParams,"modelNo",s.target.value)}}}),a("span",{staticClass:"limit30"},[t._v("（限制30字符）")])]),a("div",{staticClass:"info-item"},[a("span",{staticClass:"info-item-title"},[t._v("宝贝描述")]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.goodsParams.desc,expression:"goodsParams.desc"}],staticClass:"form-control desc",attrs:{placeholder:"请输入您的宝贝描述",maxlength:"300"},domProps:{value:t.goodsParams.desc},on:{input:[function(s){s.target.composing||t.$set(t.goodsParams,"desc",s.target.value)},function(s){return t.limit300()}]}}),a("span",{staticClass:"limit30"},[t._v("（限制300字符）")]),a("span",{staticClass:"limit300"},[t._v("\n          "+t._s(t.descLength)+"\n          "),a("span",[t._v("/300")])])]),a("div",{staticClass:"info-item-box"},[a("div",{staticClass:"info-item"},[a("span",{staticClass:"info-item-title"},[t._v("上架状态")]),t._e(),a("el-radio",{staticClass:"goods-status",attrs:{label:1},model:{value:t.goodsParams.status,callback:function(s){t.$set(t.goodsParams,"status",s)},expression:"goodsParams.status"}},[t._v("上架")]),a("el-radio",{staticClass:"goods-status",attrs:{label:2},model:{value:t.goodsParams.status,callback:function(s){t.$set(t.goodsParams,"status",s)},expression:"goodsParams.status"}},[t._v("下架")]),a("span",{staticClass:"line"},[t._v("|")])],1),a("div",{staticClass:"info-item"},[a("span",{staticClass:"info-item-title"},[t._v("设为赠品")]),a("el-radio",{staticClass:"goods-status",attrs:{label:1},model:{value:t.goodsParams.gift,callback:function(s){t.$set(t.goodsParams,"gift",s)},expression:"goodsParams.gift"}},[t._v("是")]),a("el-radio",{staticClass:"goods-status",attrs:{label:0},model:{value:t.goodsParams.gift,callback:function(s){t.$set(t.goodsParams,"gift",s)},expression:"goodsParams.gift"}},[t._v("否")]),a("span",{staticClass:"line"},[t._v("|")])],1),a("div",{staticClass:"info-item"},[a("span",{staticClass:"info-item-title"},[t._v("预售商品")]),a("el-radio",{staticClass:"goods-status",attrs:{label:1},model:{value:t.goodsParams.presell,callback:function(s){t.$set(t.goodsParams,"presell",s)},expression:"goodsParams.presell"}},[t._v("是")]),a("el-radio",{staticClass:"goods-status",attrs:{label:0},model:{value:t.goodsParams.presell,callback:function(s){t.$set(t.goodsParams,"presell",s)},expression:"goodsParams.presell"}},[t._v("否")])],1)])]),a("div",{staticClass:"spec-wrap"},[a("h2",{staticClass:"big-title shuTiao"},[t._v("宝贝规格:")]),a("div",{staticClass:"name-item skuTitle"},[a("span",[t._v("货币")]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.goodsParams.currency,expression:"goodsParams.currency"}],staticClass:"form-control",on:{change:function(s){var e=Array.prototype.filter.call(s.target.options,function(t){return t.selected}).map(function(t){var s="_value"in t?t._value:t.value;return s});t.$set(t.goodsParams,"currency",s.target.multiple?e:e[0])}}},[t._v("\n          "+t._s(t.goodsParams.currency)+"\n          "),t._l(t.currencyList,function(s,e){return a("option",{key:e+"currency",domProps:{value:s.code}},[t._v(t._s(s.symbol)+" "+t._s(s.name))])})],2)]),a("div",{staticClass:"name-item skuTitle"},[a("span",[t._v("商品单位")]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.goodsParams.unit,expression:"goodsParams.unit"}],staticClass:"form-control",attrs:{disabled:0===t.goodsParams.unitCanChange},on:{change:function(s){var e=Array.prototype.filter.call(s.target.options,function(t){return t.selected}).map(function(t){var s="_value"in t?t._value:t.value;return s});t.$set(t.goodsParams,"unit",s.target.multiple?e:e[0])}}},[t._v("\n          "+t._s(t.goodsParams.unit)+"\n          "),t._l(t.unitList,function(s,e){return a("option",{key:e,domProps:{value:s.unit}},[t._v(t._s(s.unit))])})],2)]),a("div",{staticClass:"name-item title-item"},[a("span",[t._v("商品规格")]),a("div",{staticClass:"addBtn",on:{click:function(s){return t.addSkuRow()}}},[t._v("添加规格名")]),a("span",{staticClass:"lookDemo",attrs:{slot:"reference"},slot:"reference"},[t._v("\n          查看示例\n          "),a("svg",{staticClass:"icon",staticStyle:{color:"#999999"},attrs:{"aria-hidden":"true"}},[a("use",{attrs:{"xlink:href":"#icon-help-fill"}})]),a("img",{staticClass:"lookDemoimg",attrs:{src:e("b9e0")},on:{click:function(s){return t.removeImg(t.item,t.index)}}})])]),t._l(t.setSkuNameValues,function(s,i){return a("div",{key:i+"sku",staticClass:"name-item skuItemBox"},[a("div",{staticClass:"skuNameBox"},[a("h2",[t._v("规格名")]),a("div",{staticClass:"skuNameInput"},[a("input",{directives:[{name:"model",rawName:"v-model",value:s.skuName,expression:"item.skuName"}],staticClass:"form-control name-input",attrs:{type:"text",placeholder:"如:size"},domProps:{value:s.skuName},on:{blur:function(e){return t.modifySkuName(s.skuName,i)},input:function(e){e.target.composing||t.$set(s,"skuName",e.target.value)}}}),a("img",{attrs:{src:e("b4ab")},on:{click:function(s){return t.removeSkuRow(i)}}})])]),a("div",{staticClass:"skuValueBox"},[a("h2",[t._v("规格值")]),a("div",{staticClass:"skuValueContBox-cont"},[a("div",{staticClass:"skuValueContBox"},[t._l(s.skuValues,function(n,o){return a("div",{key:o,staticClass:"skuValueCont"},[a("div",{staticClass:"skuValueInput"},[a("input",{directives:[{name:"model",rawName:"v-model",value:n.name,expression:"value.name"}],staticClass:"form-control name-input",attrs:{type:"text"},domProps:{value:n.name},on:{focus:function(s){return t.diffValue(n.name)},blur:function(e){return t.maxSkuList(s,i,!0,n.name)},input:function(s){s.target.composing||t.$set(n,"name",s.target.value)}}}),a("img",{attrs:{src:e("b4ab")},on:{click:function(e){return t.removeSkuValue(s,o)}}})]),0===i?a("div",{staticClass:"sku-img"},[a("upload",{directives:[{name:"show",rawName:"v-show",value:!t.goodsParams.firstSpecImages[o],expression:"!goodsParams.firstSpecImages[valueIndex]"}],attrs:{uploadType:"2",index:o},on:{uploadSuccess:t.uploadSKUSuccess}},[a("a",{staticClass:"btn-fill-org-main"},[t._v("添加图片")])]),a("img",{directives:[{name:"show",rawName:"v-show",value:t.goodsParams.firstSpecImages[o],expression:"goodsParams.firstSpecImages[valueIndex]"}],staticClass:"imageUrl",attrs:{src:t.goodsParams.firstSpecImages[o]}}),a("upload",{directives:[{name:"show",rawName:"v-show",value:t.goodsParams.firstSpecImages[o],expression:"goodsParams.firstSpecImages[valueIndex]"}],attrs:{uploadType:"2",index:o},on:{uploadSuccess:t.uploadSKUSuccess}},[a("a",{staticClass:"link"},[t._v("更换")])]),a("a",{directives:[{name:"show",rawName:"v-show",value:t.goodsParams.firstSpecImages[o],expression:"goodsParams.firstSpecImages[valueIndex]"}],staticClass:"link del-spec-img",on:{click:function(s){return t.removeSpecImg(o)}}},[t._v("删除")])],1):t._e()])}),a("a",{staticClass:"addSkuBtn",on:{click:function(e){return t.addSkuValue(s)}}},[t._v("添加规格值")])],2)])])])}),a("div",[a("a",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],staticClass:"btn-fill-main",on:{click:function(s){return t.openMixModal()}}},[t._v("添加组合装")]),a("span",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],staticClass:"set-sku-weight"},[a("span",{staticClass:"text"},[t._v("添加重量")]),a("ApiInput",{model:{value:t.batchWeight,callback:function(s){t.batchWeight=s},expression:"batchWeight"}}),a("span",{staticClass:"kg"},[t._v("KG")]),a("a",{staticClass:"btn-main",attrs:{href:"javascript:;"},on:{click:t.batchSetWeight}},[t._v("添加")])],1)]),a("div",{staticClass:"spec-list",staticStyle:{"min-width":"1200px",overflow:"auto"}},[a("table",{staticClass:"tableBox skuBoxTable",class:{autoWidth:t.autoWidth<=1280}},[a("thead",[a("tr",[a("th",{staticClass:"noWrap table-w120"},[t._v("规格")]),a("th",{staticClass:"table-w120"},[t._v("条形码")]),a("th",{staticClass:"table-w80"},[t._v("重量(kg)")]),a("th",{staticClass:"table-w130"},[t._v("\n                发货方式\n                ")]),a("th",{staticClass:"table-w130"},[t._v("\n                运费模板\n                ")]),a("th",{staticClass:"table-w80"},[t._v("\n                售价("+t._s(t.currencySymbol)+")\n                ")]),a("th",{staticClass:"table-w80"},[t._v("\n                企业价("+t._s(t.currencySymbol)+")\n                ")]),a("th",{staticClass:"table-w80"},[t._v("\n                原价("+t._s(t.currencySymbol)+")\n                ")]),a("th",{staticClass:"table-w80"},[t._v("数量("+t._s(t.goodsParams.unit)+")")]),a("th",{staticClass:"table-w100"},[t._v("商品编码")]),a("th",{staticClass:"table-w80"},[t._v("总库存")]),t.userConfig.hasWeiNiPrice&&1!=t.id&&""!=t.id?a("th",{staticClass:"noWrap table-w80"},[t._v("唯妮价")]):t._e(),a("th",{staticClass:"noWrap"},[t._v("操作")])])]),t._l(t.goodsParams.skuList,function(s,e){return a("tbody",{key:e,class:{selectedTr:t.selectedSKUName===s.displayName}},t._l(s.skuChannels,function(i,n){return a("tr",{key:n},[a("td",{staticClass:"noWrap sizeValue"},[a("el-popover",{attrs:{placement:"top-start",width:"200",trigger:"hover",content:s.valueName+"-"+s.quantity+t.goodsParams.unit+"装"}},[a("div",{staticStyle:{display:"inline-block"},attrs:{slot:"reference"},slot:"reference"},[s.valueName?a("span",[t._v(t._s(s.valueName)+"-")]):t._e(),s.quantity?a("span",[t._v(t._s(s.quantity))]):t._e(),t._v(t._s(t.goodsParams.unit)+"装\n                  ")])])],1),a("td",[a("input",{directives:[{name:"model",rawName:"v-model",value:s.upc,expression:"item.upc"}],staticClass:"form-control",class:{"form-control-error":0==t.status},staticStyle:{width:"100px"},attrs:{type:"text",disabled:1==i.hasSyncSupplier},domProps:{value:s.upc},on:{input:function(e){e.target.composing||t.$set(s,"upc",e.target.value)}}})]),a("td",[a("ApiInput",{staticStyle:{width:"60px"},attrs:{disabled:1==i.hasSyncSupplier},model:{value:s.weight,callback:function(e){t.$set(s,"weight",e)},expression:"item.weight"}})],1),a("td",[a("select",{directives:[{name:"model",rawName:"v-model",value:i.channelType,expression:"skuVal.channelType"}],staticClass:"form-control noWrap",class:{"form-control-error":i.hasSyncSupplier},staticStyle:{width:"120px"},attrs:{disabled:1==i.hasSyncSupplier},on:{change:function(s){var e=Array.prototype.filter.call(s.target.options,function(t){return t.selected}).map(function(t){var s="_value"in t?t._value:t.value;return s});t.$set(i,"channelType",s.target.multiple?e:e[0])}}},[a("option",{attrs:{selected:"",disabled:"",value:""}},[t._v("请选择发货方式")]),t._l(t.channelList,function(s,e){return a("option",{key:s.channelType+e,domProps:{value:s.channelType}},[t._v(t._s(s.channelName||s.channelTypeName))])})],2)]),a("td",[a("select",{directives:[{name:"model",rawName:"v-model",value:i.expressFeeTemplateId,expression:"skuVal.expressFeeTemplateId"}],staticClass:"form-control",class:{"unset-select":!i.expressFeeTemplateId},staticStyle:{width:"120px"},on:{change:function(s){var e=Array.prototype.filter.call(s.target.options,function(t){return t.selected}).map(function(t){var s="_value"in t?t._value:t.value;return s});t.$set(i,"expressFeeTemplateId",s.target.multiple?e:e[0])}}},[a("option",{attrs:{selected:"",disabled:"",value:""}},[t._v("请选择运费模板")]),t._l(t.expressTempList,function(s){return a("option",{key:s.id,domProps:{value:s.id}},[t._v(t._s(s.templateName))])})],2)]),a("td",[a("input",{directives:[{name:"model",rawName:"v-model",value:i.price,expression:"skuVal.price"}],staticClass:"form-control",staticStyle:{width:"70px"},attrs:{placeholder:""},domProps:{value:i.price},on:{blur:function(s){return t.handlePriceBlur(i)},input:function(s){s.target.composing||t.$set(i,"price",s.target.value)}}})]),a("td",[a("ApiInput",{staticStyle:{width:"70px"},model:{value:i.enterprisePrice,callback:function(s){t.$set(i,"enterprisePrice",s)},expression:"skuVal.enterprisePrice"}})],1),a("td",[a("ApiInput",{staticStyle:{width:"70px"},model:{value:i.originalPrice,callback:function(s){t.$set(i,"originalPrice",s)},expression:"skuVal.originalPrice"}})],1),a("td",[s.isMultiple?t._e():a("ApiInput",{staticStyle:{width:"50px"},attrs:{disabled:!0},model:{value:s.quantity,callback:function(e){t.$set(s,"quantity",e)},expression:"item.quantity"}}),s.isMultiple?a("ApiInput",{staticStyle:{width:"50px"},on:{focus:function(e){return t.diffNum(s.weight,s.quantity)},input:function(a){return t.handleNum(s,e)}},model:{value:s.quantity,callback:function(e){t.$set(s,"quantity",e)},expression:"item.quantity"}}):t._e()],1),a("td",[t._v(t._s(i.itemCode))]),a("td",[a("ApiInput",{staticStyle:{width:"60px"},attrs:{disabled:!0},model:{value:i.totalStock,callback:function(s){t.$set(i,"totalStock",s)},expression:"skuVal.totalStock"}})],1),t.userConfig.hasWeiNiPrice&&1!=t.id&&""!=t.id?a("td",{staticClass:"weini noWrap"},[i.refPrice?a("span",[t._v(t._s(i.refPrice.weiniPrice))]):t._e()]):t._e(),a("td",{staticClass:"noWrap"},[a("a",{staticClass:"link",class:{select:i.show},attrs:{href:"javascript:;"},on:{click:function(a){return a.stopPropagation(),t.btnSetSupplier(i,e,n,s)}}},[t._v("供货商设置")]),s.isMultiple?t._e():a("a",{staticClass:"link",staticStyle:{"margin-left":"10px"},attrs:{href:"javascript:;"},on:{click:function(s){return s.stopPropagation(),t.addRow(e,i)}}},[t._v("添加多件装")]),s.isMultiple?a("a",{staticClass:"del link",attrs:{href:"javascript:;"},on:{click:function(s){return s.stopPropagation(),t.delRow(e)}}},[t._v("删除多件装")]):t._e()])])}),0)})],2)])],2),t.selectedSKUName?a("div",{staticClass:"supportBox"},[a("h2",{staticClass:"big-title"},[t._v("供货商设置")]),a("table",{staticClass:"tableBox table"},[a("thead",[a("tr",[a("th",{staticClass:"table-w140"},[t._v("供货商名称")]),a("th",{staticClass:"table-w140"},[t._v("供应商旧价("+t._s(t.currencySymbol)+")")]),a("th",{staticClass:"table-w140"},[t._v("供应商新价("+t._s(t.currencySymbol)+")")]),1!=t.id?a("th",{staticClass:"table-w40"}):t._e(),a("th",{staticClass:"table-w140"},[t._v("供应商库存")]),a("th",{staticClass:"table-w140"},[t._v("利润率")]),a("th",{staticClass:"operateTh table-w140"},[a("el-popover",{staticClass:"ellipsis",attrs:{placement:"top-end",width:"200",trigger:"hover"}},[a("div",{staticClass:"alertBox"},[a("div",{staticClass:"itemCont"},[a("el-switch",{attrs:{value:!0,"active-color":"#13ce66"}}),a("span",[t._v("指启用")])],1),a("div",{staticClass:"itemCont"},[a("el-switch",{attrs:{value:!1}}),a("span",[t._v("指禁用")])],1)]),a("span",{staticClass:"operation",attrs:{slot:"reference"},slot:"reference"},[t._v("\n                  销售状态\n                  "),a("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[a("use",{attrs:{"xlink:href":"#icon-help-fill"}})])])])],1),a("th",{directives:[{name:"show",rawName:"v-show",value:1!=t.id&&""!==t.id,expression:"id!= 1&&id!== ''"}],staticClass:"operateTh"},[a("el-popover",{staticClass:"ellipsis",attrs:{placement:"top-end",width:"200",trigger:"hover"}},[a("div",{staticClass:"alertBox"},[a("div",{staticClass:"itemCont"},[a("el-switch",{attrs:{value:!0,"active-color":"#13ce66"}}),a("span",[t._v("指启用")])],1),a("div",{staticClass:"itemCont"},[a("el-switch",{attrs:{value:!1}}),a("span",[t._v("指禁用")])],1)]),a("span",{staticClass:"operation",attrs:{slot:"reference"},slot:"reference"},[t._v("\n                  审核开关\n                  "),a("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[a("use",{attrs:{"xlink:href":"#icon-help-fill"}})])])])],1),a("th",[t._v("变更记录")])])]),a("tbody",t._l(t.goodsParams.supplierStocks,function(s,i){return a("tr",{key:i+"channel"},[a("td",[a("el-popover",{attrs:{placement:"top",width:"120",trigger:"hover"}},[a("span",[t._v(t._s(s.supplierName))]),a("span",{staticClass:"ellipsis",attrs:{slot:"reference"},slot:"reference"},[t._v(t._s(s.supplierName))])])],1),a("td",[a("input",{directives:[{name:"model",rawName:"v-model",value:s.approvedChannelPrice,expression:"item.approvedChannelPrice"}],staticClass:"form-control",attrs:{placeholder:"",disabled:!0},domProps:{value:s.approvedChannelPrice},on:{input:function(e){e.target.composing||t.$set(s,"approvedChannelPrice",e.target.value)}}})]),a("td",[a("input",{directives:[{name:"model",rawName:"v-model",value:s.channelPrice,expression:"item.channelPrice"}],staticClass:"form-control",attrs:{placeholder:"",disabled:Boolean(s.thirdAttr&&s.thirdAttr.authId)},domProps:{value:s.channelPrice},on:{blur:function(e){return t.handleBlur(s)},input:function(e){e.target.composing||t.$set(s,"channelPrice",e.target.value)}}})]),1!=t.id?a("td",[s.channelPrice>s.approvedChannelPrice?a("img",{attrs:{src:e("9690")}}):t._e(),s.channelPrice<s.approvedChannelPrice?a("img",{attrs:{src:e("1c33")}}):t._e()]):t._e(),a("td",[a("input",{directives:[{name:"model",rawName:"v-model",value:s.stock,expression:"item.stock"}],staticClass:"form-control",attrs:{placeholder:"",disabled:Boolean(s.thirdAttr&&s.thirdAttr.authId)},domProps:{value:s.stock},on:{input:function(e){e.target.composing||t.$set(s,"stock",e.target.value)}}})]),a("td",[s.isRed?a("span",{staticStyle:{color:"#F56C6C"}},[t._v(t._s(s.profitRate))]):t._e(),s.isRed?t._e():a("span",[t._v(t._s(s.profitRate))])]),a("td",{staticClass:"switchOperate"},[a("a",{staticClass:"link",attrs:{href:"javascript:;"}},[a("el-switch",{attrs:{"active-value":1,"inactive-value":0,"active-color":"#13ce66"},model:{value:s.status,callback:function(e){t.$set(s,"status",e)},expression:"item.status"}})],1)]),a("td",{directives:[{name:"show",rawName:"v-show",value:1!=t.id&&""!==t.id,expression:"id!= 1&&id!== ''"}],staticClass:"switchOperate"},[a("a",{staticClass:"link",attrs:{href:"javascript:;"}},[a("el-switch",{attrs:{"active-value":1,"inactive-value":0,disabled:Boolean(s.isLock),"active-color":"#13ce66"},model:{value:s.approvedStatus,callback:function(e){t.$set(s,"approvedStatus",e)},expression:"item.approvedStatus"}})],1)]),a("td",{staticStyle:{"line-height":"48px"}},[s.changes&&s.changes.length>0?a("span",{staticClass:"link",on:{click:function(e){return t.log(t.goodsParams,s)}}},[t._v("查看记录")]):a("span",[t._v("无记录")])])])}),0)])]):t._e(),t.userConfig.hasWeiNiPrice&&1!=t.id&&""!=t.id?a("div",{staticClass:"sameGroupBox"},[a("div",{staticClass:"top",class:{topline:t.sameGroupTableShow&&t.groupData.groupNum}},[a("h2",{staticClass:"big-title shuTiao title"},[t._v("同组宝贝:")]),a("div",{staticClass:"boxInFo"},[a("div",{staticClass:"totalInfo"},[t.groupData.groupNum?a("span",[t._v("同组商品共计"+t._s(t.groupData.groupNum)+"个(含当前商品)")]):a("span",[t._v("暂无同组宝贝")])]),a("div",{staticClass:"operateBtn",on:{click:t.sameGroupTableVisible}},[t.groupData.groupNum?a("span",{staticStyle:{cursor:"pointer"}},[t._v("管理同组商品")]):a("span",[t._v("添加同组商品")])])])]),t.sameGroupTableShow&&t.groupData.groupNum?a("div",{staticClass:"cont"},[a("el-tabs",{on:{"tab-click":t.handleClick},model:{value:t.activeName,callback:function(s){t.activeName=s},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:t.labelName.firstLabel,name:"first"}}),a("el-tab-pane",{attrs:{label:t.labelName.secondLabel,name:"second"}})],1),a("div",{staticClass:"operate"},[a("div",{staticClass:"left"},[a("div",{staticClass:"dot",class:{dotAll:t.checkAll},on:{click:function(s){return t.selectAll()}}}),a("div",{staticClass:"dotName"},[t._v("全选")]),a("div",{staticClass:"operateBtn"},["first"==t.activeName?a("span",{class:{active:t.avtiveOk},on:{click:function(s){return t.groupDete()}}},[t._v("批量剔除")]):a("span",{class:{active:t.avtiveOk},on:{click:function(s){return t.groupAdd()}}},[t._v("批量添加")])])]),"second"==t.activeName?a("div",{staticClass:"serachBox"},[a("span",{staticClass:"title"},[t._v("关键字")]),a("el-input",{attrs:{placeholder:"请输入商品名称、商品ID、条形码"},model:{value:t.input,callback:function(s){t.input=s},expression:"input"}}),a("span",{staticClass:"searchBtn",on:{click:t.search}},[t._v("搜索")])],1):t._e()]),a("table",{staticClass:"table"},[a("thead",[a("tr",[a("th",{staticClass:"dot",class:{active:t.checkAll},on:{click:function(s){return t.selectAll()}}}),a("th",{staticClass:"table-w100"},[t._v("宝贝ID")]),a("th",{staticClass:"table-w60"},[t._v("主图")]),a("th",{staticClass:"table-w160"},[t._v("商品名称")]),a("th",{staticClass:"table-w100"},[t._v("品牌")]),a("th",{staticClass:"table-w100"},[t._v("型号")]),a("th",{staticClass:"table-w80"},[t._v("价格")]),a("th",{staticClass:"table-w100"},[t._v("发货方式")]),a("th",{staticClass:"table-w100"},[t._v("操作")])])]),a("tbody",t._l(t.sameGroupTableData,function(s,e){return a("tr",{key:e+"table",class:{selectedTr:s.checked,noSuccess:s.status}},[a("td",{staticClass:"dot",class:{active:s.checked},on:{click:function(e){return t.selectItem(s)}}}),a("td",[t._v(t._s(s.id))]),a("td",[a("el-popover",{staticClass:"imgBoxCont",attrs:{placement:"top",width:"260",trigger:"hover"}},[a("img",{staticStyle:{width:"100%",height:"100%"},attrs:{src:s.mainImageUrl}}),a("div",{attrs:{slot:"reference"},slot:"reference"},[a("img",{staticClass:"imgBox",attrs:{src:s.mainImageUrl}})])])],1),a("td",[a("el-popover",{attrs:{placement:"top",width:"260",trigger:"hover"}},[a("span",[t._v(t._s(s.name))]),a("span",{staticClass:"ellipsis goodsName",attrs:{slot:"reference"},on:{click:function(e){return t.goDetail(s)}},slot:"reference"},[t._v(t._s(s.name))])])],1),a("td",[t._v(t._s(s.brandName))]),a("td",[a("el-popover",{attrs:{placement:"top",width:"260",trigger:"hover"}},[a("span",t._l(s.skuList,function(e,i){return a("span",{key:i+"sku"},[t._v("\n                      "+t._s(e)+"\n                      "),a("span",{directives:[{name:"show",rawName:"v-show",value:i!=s.skuList.length-1,expression:"sku_index != item.skuList.length-1"}]},[t._v("、")])])}),0),a("span",{staticClass:"ellipsis",attrs:{slot:"reference"},slot:"reference"},t._l(s.skuList,function(e,i){return a("span",{key:i+"sku"},[t._v("\n                      "+t._s(e)+"\n                      "),a("span",{directives:[{name:"show",rawName:"v-show",value:i!=s.skuList.length-1,expression:"sku_index != item.skuList.length-1"}]},[t._v("、")])])}),0)])],1),a("td",[a("span",{staticClass:"itemPrice"},[t._v(t._s(s.price))])]),a("td",[a("el-popover",{staticClass:"ellipsis",attrs:{placement:"top",width:"260",trigger:"hover"}},[a("span",t._l(s.channels,function(e,i){return a("span",{key:i+"sku"},[t._v("\n                      "+t._s(e)+"\n                      "),a("span",{directives:[{name:"show",rawName:"v-show",value:i!=s.channels.length-1,expression:"channels_index != item.channels.length-1"}]},[t._v("、")])])}),0),a("span",{staticClass:"transportStyle",attrs:{slot:"reference"},slot:"reference"},t._l(s.channels,function(e,i){return a("span",{key:i+"sku"},[t._v("\n                      "+t._s(e)+"\n                      "),a("span",{directives:[{name:"show",rawName:"v-show",value:i!=s.channels.length-1,expression:"sku_index != item.channels.length-1"}]},[t._v("、")])])}),0)])],1),a("td",["first"==t.activeName&&s.id!==t.adminGoodsData.id?a("a",{staticClass:"link base-margin-right",attrs:{href:"javascript:;"},on:{click:function(e){return t.deteItem(s)}}},[t._v("剔除")]):t._e(),"second"==t.activeName&&s.id!==t.adminGoodsData.id?a("a",{staticClass:"link",attrs:{href:"javascript:;"},on:{click:function(e){return t.addItem(s)}}},[t._v("添加")]):t._e()])])}),0)]),a("pagination",{directives:[{name:"show",rawName:"v-show",value:t.total>0,expression:"total>0"}],attrs:{total:t.total,page:t.listParams.page,layout:"total, sizes, prev, pager, next, jumper",limit:t.listParams.limit},on:{"update:page":function(s){return t.$set(t.listParams,"page",s)},"update:limit":function(s){return t.$set(t.listParams,"limit",s)},pagination:function(s){return t.getGoodsList()}}}),0===t.total?a("noData"):t._e()],1):t._e()]):t._e(),a("div",{staticClass:"editor-wrap"},[a("h2",{staticClass:"big-title shuTiao"},[t._v("图文详情")]),a("editor",{model:{value:t.goodsParams.richDesc,callback:function(s){t.$set(t.goodsParams,"richDesc",s)},expression:"goodsParams.richDesc"}})],1),a("div",{staticClass:"save-box"},[a("h2",{staticClass:"title"},[t._v("操作")]),a("div",{staticClass:"save-inner"},[a("a",{staticClass:"btn-main",attrs:{href:"javascript:;"},on:{click:function(s){return t.saveGoods()}}},[t._v("保存")]),a("router-link",{staticClass:"btn-fill-main",attrs:{to:{name:"商品管理"}}},[t._v("返回")])],1)]),t.showShopModal?a("selectShop",{attrs:{multiply:!1},on:{dialogShop:t.dialogShop,dialogShopCancel:t.dialogShopCancel}}):t._e(),t.showBrandModal?a("SelectBrand",{attrs:{multiply:!1},on:{dialogBrand:t.dialogBrand,dialogBrandCancel:t.dialogBrandCancel}}):t._e(),a("el-dialog",{attrs:{title:"添加组合装:",visible:t.addShow,width:"840px"},on:{"update:visible":function(s){t.addShow=s}}},[a("div",{staticClass:"dialog-form"},[t._l(t.modalSkuValues,function(s,e){return a("div",{key:e+"sku",staticClass:"modal-item"},[a("span",[t._v("规格"+t._s(e+1)+"可选")]),a("div",{staticClass:"item-content"},t._l(s.skuValues,function(e,i){return a("span",{key:i+"val",staticClass:"spec-item",class:{spec_active:s.activeSpec===e},on:{click:function(a){return t.selectMixItem(s,e)}}},[t._v(t._s(e))])}),0)])}),a("div",{staticClass:"modal-item current-mix-box"},[a("span",[t._v("当前已选")]),a("div",{directives:[{name:"show",rawName:"v-show",value:t.modalSkuValues.length>0,expression:"modalSkuValues.length>0"}],staticClass:"item-content"},[t._l(t.modalSkuValues,function(s,e){return a("span",{key:e+"cur",staticClass:"current-mix"},[t._v("\n              "+t._s(s.activeSpec)+"\n              "),a("span",{directives:[{name:"show",rawName:"v-show",value:e!=t.modalSkuValues.length-1,expression:"index != modalSkuValues.length-1"}]},[t._v("+")])])}),a("a",{staticClass:"btn-fill-main",attrs:{href:"javascript:;"},on:{click:function(s){return t.appendMix()}}},[t._v("添加")])],2)]),a("div",{staticClass:"set-current"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.modalParams.groupSkuValue,expression:"modalParams.groupSkuValue"}],staticClass:"form-control set-name",attrs:{type:"text",placeholder:"请输入组合名称"},domProps:{value:t.modalParams.groupSkuValue},on:{input:function(s){s.target.composing||t.$set(t.modalParams,"groupSkuValue",s.target.value)}}}),a("span",{directives:[{name:"show",rawName:"v-show",value:t.mixedList.length>0,expression:"mixedList.length>0"}],staticClass:"colon"},[t._v(":")]),t._l(t.mixedList,function(s,i){return a("div",{key:i+"mix",staticClass:"conected-spec"},[a("span",{staticClass:"conected-spec-name"},[t._v("\n              "+t._s(s.mixedName)+"\n              "),a("img",{attrs:{src:e("72fd")}})]),a("span",{staticClass:"conected-spec-count"},[a("span",{staticClass:"count"},[t._v(t._s(s.quantity))]),a("span",{staticClass:"set-count"},[a("span",{staticClass:"add-count",on:{click:function(e){return t.setQuantity(1,s)}}}),a("span",{staticClass:"reduce-count",on:{click:function(e){return t.setQuantity(2,s)}}})])]),i<t.mixedList.length-1?a("span",{staticClass:"colon"},[a("img",{attrs:{src:e("f4dc")}})]):t._e()])})],2),a("div",{staticClass:"modal-item modal-item-bot"},[a("span",[t._v("重量")]),a("ApiInput",{attrs:{placeholder:"请输入组合重量"},model:{value:t.modalParams.weight,callback:function(s){t.$set(t.modalParams,"weight",s)},expression:"modalParams.weight"}})],1),a("div",{staticClass:"modal-item modal-item-bot"},[a("span",[t._v("原价")]),a("ApiInput",{attrs:{placeholder:"请输入原价"},model:{value:t.modalParams.originalPrice,callback:function(s){t.$set(t.modalParams,"originalPrice",s)},expression:"modalParams.originalPrice"}})],1)],2),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("button",{staticClass:"btn-main",on:{click:function(s){return t.saveModal()}}},[t._v("保存")]),a("button",{staticClass:"btn-fill-grey-main",on:{click:function(s){t.addShow=!1}}},[t._v("取消")])])]),a("el-dialog",{attrs:{title:"渠道设置:",visible:t.showChannelModal,width:"840px"},on:{"update:visible":function(s){t.showChannelModal=s}}},[a("div",{staticClass:"dialog-form channel-dialog"},[a("div",{staticClass:"search-item selected－brand"},[a("span",{staticClass:"title"},[t._v("已选渠道：")]),t._l(t.selectedChannelList,function(s,e){return a("span",{key:e+"selected",staticClass:"selected-item"},[t._v("\n            "+t._s(s.channelTypeName)+"\n            "),a("a",{attrs:{href:"javascript:;"},on:{click:function(s){return t.removeChannel(e)}}},[t._v("X")])])})],2),a("div",{staticClass:"search-item selected-box"},t._l(t.channelList,function(s){return a("span",{key:s.channelType,staticClass:"brand-item"},[a("a",{staticClass:"link",on:{click:function(e){return t.selectChannel(s)}}},[t._v(t._s(s.channelTypeName))])])}),0)]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("button",{staticClass:"btn-main",on:{click:function(s){return t.saveChannelModal()}}},[t._v("保存")]),a("button",{staticClass:"btn-fill-grey-main",on:{click:function(s){t.showChannelModal=!1}}},[t._v("取消")])])]),a("el-dialog",{attrs:{title:"供货商变更历史记录",visible:t.logTar,width:"600px"},on:{"update:visible":function(s){t.logTar=s}}},[a("div",{staticClass:"tableLog"},[a("table",[a("tr",[a("th",[t._v("变更时间")]),a("th",[t._v("变更内容")]),a("th",[t._v("变更类型")])]),t._l(t.logData,function(s,e){return a("tr",{key:e},[a("td",[t._v(t._s(s.createTime))]),a("td",[t._v(t._s(t._f("content")(s)))]),a("td",[t._v(t._s(t._f("typeName")(s)))])])})],2)]),t.logDataLen>30?a("div",{staticClass:"log-more"},[t._v("\n        只显示最近30条记录\n      ")]):t._e()])],1)},i=[],n=(e("8e6e"),e("456d"),e("c5f6"),e("bd86")),o=(e("6762"),e("2fdb"),e("28a5"),e("7f7f"),e("ac6a"),e("0351")),l=e("8d0f"),r=e("f88c"),c=e("4d86"),u=e("4162"),d=e("310e"),m=e.n(d);function h(t,s){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);s&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),e.push.apply(e,a)}return e}function p(t){for(var s=1;s<arguments.length;s++){var e=null!=arguments[s]?arguments[s]:{};s%2?h(e,!0).forEach(function(s){Object(n["a"])(t,s,e[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):h(e).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(e,s))})}return t}var g={data:function(){return{logTar:!1,logData:[],logDataLen:0,isExam:!1,status:1,id:"",isShelves:!0,showShopModal:!1,showBrandModal:!1,addShow:!1,showChannelModal:!1,detailLoaded:!1,selectedChannelList:[],selectedSKUName:"",selectedSKUItem:{},categoryTree:[],mainImgUrl:"",firstCateList:[],secondCateList:[],thirdCateList:[],searchBrandList:[],searchShopList:[],selectedCate:{first:"",second:"",third:""},batchWeight:"",currencyList:[],channelList:[],expressTempList:[],setSkuNameValues:[],goodsImages:[],goodsParams:{status:1,gift:0,presell:0,currency:"",unit:"",unitCanChange:"",richDesc:"",categoryId:"",brandId:"",brandName:"",desc:"",shopId:"",shopName:"",modelNo:"",firstSpecImages:[],delImageIds:[],skuNameValues:[],skuList:[],supplierStocks:[]},modalSkuValues:[],mixedList:[],modalParams:{},currentModal:[],supplierList:[],supplierList1:[],skuTable:{skuChannels:[]},checkAll:!1,sameGroupTableData:[],avtiveOk:!1,avtiveNo:!1,total:1,listParams:{page:1,limit:10},activeName:"first",labelName:{firstLabel:"管理同组商品",secondLabel:"增加同组商品"},input:"",adminGoodsData:{},groupData:{groupNum:0},sameGroupTableShow:!1,currencySymbol:"",itemDetail:{},detailData:{},isRed:!1,isShow:!1,unitList:[],descLength:0,isNoSku:!1,guivalue:"",newguivalue:"",weightValue:"",autoWidth:""}},mounted:function(){},created:function(){var t=this;this.status=this.$route.params.status,window.onresize=function(){t.autoWidth=document.body.clientWidth},1==this.status||2==this.status?this.isExam=!0:this.isExam=!1,this.getNewSuppList(),this.init()},filters:{content:function(t){return t.type?1==t.type?'调整供货价由"￥'.concat(t.originalValue,'" 为 "￥').concat(t.value,'"'):3==t.type?"将该商品进行下架":2==t.type?'调整重量由"'.concat(t.originalValue,'kg" 为 "').concat(t.value,'kg";'):void 0:"error"},typeName:function(t){return t.type?1==t.type?"调整供价":3==t.type?"下架商品":2==t.type?"调整重量":void 0:"error"},testBack:function(){}},methods:{init:function(){var t=this;this.id=this.$route.params.id||"",this.api.common.currency({}).then(function(s){t.currencyList=s.data,t.goodsParams.currency=t.currencyList[0].code}),this.api.category.tree({hasCount:!0}).then(function(s){t.categoryTree=s.data}),this.api.goods.unitList({}).then(function(s){t.unitList=s.data}),this.api.goods.channel({}).then(function(s){t.channelList=s.data,t.id&&1!=t.id?(t.getDetail(),t.getSuppList()):t.goodsParams.unit="件"}),this.getCate(0,""),this.id||(this.remoteMethod(""),this.remoteShopMethod("")),this.api.feetemplate.allTemp({}).then(function(s){t.expressTempList=s.data}),this.adminGoodsData=JSON.parse(localStorage.getItem("groupGoodsInfo")),this.groupNum(),this.listParams={isGift:-1,page:1,limit:10,statusList:[1,2],itemId:this.adminGoodsData.id},this.adminGoodsData.groupId&&(this.listParams.groupId=this.adminGoodsData.groupId),this.getGoodsList()},log:function(t){0==t.supplierStocks[0].changes?this.$message.warning({message:"无变更数据！",showClose:!0}):(this.logTar=!0,this.logDataLen=t.supplierStocks[0].changes.length,this.logDataLen>30?this.logData=t.supplierStocks[0].changes.splice(0,30):this.logData=t.supplierStocks[0].changes,console.log(this.logData))},handlePriceBlur:function(t){t.price&&t.supplierStocks.forEach(function(s){if(s.channelPrice){var e=(t.price-s.channelPrice)/s.channelPrice;s.profitRate=Math.round(1e4*e)/100+"%"}})},handleBlur:function(t){if(this.itemDetail.price&&t.channelPrice){var s=(this.itemDetail.price-t.channelPrice)/t.channelPrice;t.profitRate=Math.round(1e4*s)/100+"%"}},diffValue:function(t){this.guivalue=t},getNewSuppList:function(){var t=this;this.api.supplier.newList({channelType:0}).then(function(s){if(s.data.forEach(function(t){t.approvedChannelPrice="",t.approvedStatus=1,t.channelPrice="",t.status=1,t.stock="",t.supplierId=t.id,t.supplierName=t.supplierName}),t.supplierList1=s.data,1==t.id||""===t.id){t.isNoSku=!0;var e={upc:"",skuValues:[{skuName:"",skuValue:""}],originalPrice:"",weight:"",quantity:1,valueName:"",transportWays:[],skuChannels:[{channelName:"",channelPrice:"",channelType:"",enterprisePrice:"",expressFeeTemplateId:"",hasSyncSupplier:!1,itemCode:"",originalPrice:"",price:"",supplierStocks:t.supplierList1,totalStock:0}]};t.goodsParams.skuList.push(e)}else t.isNoSku=!1})},getSuppList:function(){var t=this;this.api.supplier.list({limit:99999}).then(function(s){s.data.dataList.forEach(function(s){s.status&&t.supplierList.push(Object.assign(s,{channelPrice:"",approvedChannelPrice:"",stock:"",supplierId:s.id,newAdd:!0}))})})},getCate:function(t,s){var e=this,a=s||0;this.api.category.categoryNode({parentId:a}).then(function(s){0===t?(e.firstCateList=s.data,e.secondCateList=[],e.thirdCateList=[]):1===t?(e.secondCateList=s.data,e.thirdCateList=[]):e.thirdCateList=s.data})},removeSkuChannel:function(t,s){this.$msgbox({title:"",message:"确认删除该渠道？",showCancelButton:!0,confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(e){if("confirm"===e){var a="";t.skuChannels.forEach(function(t,e){t.channelType===s.channelType&&(a=e)}),a&&t.skuChannels.splice(a,1)}})},uploadSuccess:function(t){this.goodsImages.push({url:t.data,type:0,showBtn:!1})},uploadSKUSuccess:function(t){this.$set(this.goodsParams.firstSpecImages,t.index,t.data)},removeSpecImg:function(t){this.$set(this.goodsParams.firstSpecImages,t,"")},selectCate:function(t,s){1===t?this.selectedCate.first!==s.id&&(this.getCate(1,s.id),this.selectedCate.first=s.id,this.selectedCate.second="",this.selectedCate.third=""):2===t?this.selectedCate.second!==s.id&&(this.getCate(2,s.id),this.selectedCate.second=s.id,this.selectedCate.third=""):this.selectedCate.third=s.id},maxSkuList:function(t,s,e,a){if(t.skuName&&this.guivalue!==a){this.newguivalue=a;var i=[];t.skuValues.forEach(function(t){-1===i.indexOf(t.name)&&""!=t.name&&i.push(t.name)}),this.$set(this.goodsParams.skuNameValues,s,{skuName:t.skuName,skuValues:i}),e&&this.createSKU()}},createSKU:function(){var t=this,s=[];this.goodsParams.skuNameValues.forEach(function(t){var e=[];t.skuValues.forEach(function(t){e.push(t.name||t)}),s.push(e||"")});var e=[],a=[];this.doExchange(s).forEach(function(s){var i=[],n=s.name?s.name:s,o=n.split("*");t.goodsParams.skuNameValues.forEach(function(s,e){o.forEach(function(a){if(s.skuValues.includes(a)){var n={skuName:s.skuName,skuValue:a};0==e&&t.goodsParams.firstSpecImages[s.skuValues.indexOf(a)]&&(n.imageUrl=t.goodsParams.firstSpecImages[s.skuValues.indexOf(a)]),i.push(n)}})});var l={valueName:n,skuValues:i,upc:"",weight:"",transportWays:t.channelList,quantity:s.quantity?s.quantity:1,skuChannels:[{addSku:!0,channelType:"",expressFeeTemplateId:"",price:"",enterprisePrice:"",originalPrice:"",totalStock:"",refPrice:{weiniPrice:""},supplierStocks:t.supplierList1}]};t.goodsParams.skuList.forEach(function(s){s.valueName.indexOf(t.newguivalue),s.valueName===n&&-1!=s.valueName.indexOf(t.newguivalue)&&(a.push(s),l=p({},s))}),e.push(l)}),this.goodsParams.skuList=[].concat(e),this.goodsParams.skuList.length<a.length&&""===this.guivalue&&(this.goodsParams.skuList=a)},arrGetRe:function(t){for(var s=[],e=[],a=0;a<t.length;a++)-1===e.indexOf(t[a])?e.push(t[a]):s.push(t[a]);return s},doExchange:function(t){var s=t.length;if(s>=2){for(var e=t[0].length,a=t[1].length,i=e*a,n=new Array(i),o=0,l=0;l<e;l++)for(var r=0;r<a;r++)n[o]=t[0][l]+"*"+t[1][r],o++;for(var c=new Array(s-1),u=2;u<t.length;u++)c[u-1]=t[u];return c[0]=n,this.doExchange(c)}return 1==s?t[0]:t},addSkuValue:function(t){t.skuValues.push({name:""})},selectSKU:function(t){this.selectedSKUName===t.displayName?this.selectedSKUName="":this.selectedSKUName=t.displayName},chooseBrand:function(){var t=this;this.searchBrandList.forEach(function(s){s.name===t.goodsParams.brandName&&(t.goodsParams.brandId=s.id)})},chooseShop:function(){var t=this;this.searchShopList.forEach(function(s){s.name===t.goodsParams.shopName&&(t.goodsParams.shopId=s.id)})},delRow:function(t){this.goodsParams.skuList.splice(t,1)},addRow:function(t,s){var e=this.copy(this.goodsParams.skuList[t]),a=this.copy(s);this.goodsParams.skuList[t].skuChannels.length>0&&(e.skuChannels=[a]),e.isMultiple=!0,e.quantity=2,e.weight=2*this.goodsParams.skuList[t].weight,e.skuChannels[0].show=!1,e.skuChannels[0].supplierStocks=this.supplierList1,e.id="",e.groupSkuValue=this.goodsParams.skuList[t].displaySkuValue,e.quantity=2,console.log(this.goodsParams.skuList[t]),e.skuValues=this.goodsParams.skuList[t].skuValues,console.log(e),this.goodsParams.skuList.splice(t+1,0,e)},addSkuRow:function(){var t={skuName:"",skuValues:[{name:""}]};this.setSkuNameValues.push(t)},removeSkuValue:function(t,s){t.skuValues.splice(s,1);var e=!1;this.goodsParams.skuNameValues.forEach(function(s){if(s.skuName==t.skuName){var a=[];t.skuValues.forEach(function(t){-1===a.indexOf(t.name)&&""!=t.name&&a.push(t.name)}),s.skuValues=a}s.skuValues.length||(e=!0)}),e&&this.goodsParams.skuNameValues.splice(s+1,1),this.createSKU()},unARR:function(t,s){var e=!1;return s.forEach(function(s){-1!=t.indexOf(s)&&(e=!0)}),e},removeSkuRow:function(t){this.setSkuNameValues.splice(t,1),this.goodsParams.skuNameValues.splice(t,1),this.createSKU()},removeImg:function(t,s){this.mainImgUrl===t.url&&(this.mainImgUrl=""),this.id&&t.id&&this.goodsParams.delImageIds.push(t.id),this.goodsImages.splice(s,1)},openMixModal:function(){var t=this;0!==this.goodsParams.skuNameValues.length?(this.modalSkuValues=[],this.modalSkuValues=this.copy(this.goodsParams.skuNameValues),this.modalSkuValues.forEach(function(s){t.$set(s,"currentSpec",{skuName:"",skuValue:""}),t.$set(s,"activeSpec","")}),this.mixedList=[],this.modalParams={},this.addShow=!0):this.$message.warning({message:"请添加至少一个规格",showClose:!0})},selectMixItem:function(t,s){t.currentSpec={skuName:t.skuName,skuValue:s},t.activeSpec=s},batchSetWeight:function(){var t=this;0===this.goodsParams.skuList.length?this.$message.info({message:"请先新增一个规格",showClose:!0}):this.batchWeight?this.goodsParams.skuList.forEach(function(s){s.weight=t.batchWeight}):this.$message.info({message:"请输入批量更改的重量",showClose:!0})},appendMix:function(){var t=[],s="";this.modalSkuValues.forEach(function(e){t.push(e.currentSpec),s+=e.activeSpec+"+"}),s=s.substring(0,s.length-1);var e={mixedName:s,skuValues:t,quantity:1};this.mixedList.push(e)},setMainImg:function(t){this.goodsImages.forEach(function(t){t.type=0}),t.type=1,this.mainImgUrl=t.url},setQuantity:function(t,s){if(1===t)s.quantity+=1;else{if(1===s.quantity)return void this.$message.warning({message:"数量不能少于1",showClose:!0});s.quantity-=1}},dialogShop:function(t){this.goodsParams.shopId=t.shopList[0].id,this.goodsParams.shopName=t.shopList[0].name,this.showShopModal=!1},dialogShopCancel:function(){this.showShopModal=!1},dialogBrand:function(t){this.goodsParams.brandId=t.brandList[0].id,this.goodsParams.brandName=t.brandList[0].name,this.showBrandModal=!1},dialogBrandCancel:function(){this.showBrandModal=!1},getDetail:function(){var t=this;this.detailLoaded=!0;var s=0;s=1==this.status||2==this.status?0:1,this.api.goods.detail({id:this.id,fromPage:s}).then(function(s){t.detailData=s.data;var e=s.data;t.goodsParams.name=e.name,t.goodsParams.gift=e.gift,t.goodsParams.presell=e.presell,t.goodsParams.brandId=e.brandId,t.goodsParams.brandName=e.brandName,t.goodsParams.shopId=e.shopId,t.goodsParams.shopName=e.shopName,t.goodsParams.desc=e.desc,t.descLength=e.desc.length,t.goodsParams.modelNo=e.modelNo,t.goodsParams.status=e.status,t.goodsParams.richDesc=e.richDesc,t.goodsParams.currency=e.currency,t.goodsParams.unit=e.unit?e.unit:"件",t.goodsParams.unitCanChange=e.unitCanChange,t.goodsParams.firstSpecImages=e.skuNameValues[0],t.goodsParams.skuNameValues=e.skuNameValues,t.goodsParams.id=t.id,e.skuList.forEach(function(t){var s="";t.quantity>1?(t.skuValues.length>0&&t.skuValues.forEach(function(t,e){s+=e>0?"*"+t.skuValue:t.skuValue}),t.valueName=s,t.isMultiple=!0):(t.quantity=1,t.isMultiple=!1,t.skuValues.forEach(function(t){t.skuValue&&(s+="".concat(t.skuValue,"*"))}),t.valueName=s.substring(0,s.length-1))}),t.goodsParams.skuList=e.skuList,t.goodsParams.skuList.forEach(function(t){var s=[];t.skuChannels.forEach(function(t){s.push(t)}),t.transportWays=s}),t.setSkuNameValues=[],t.categoryTree.forEach(function(s){s.id===e.cateId1&&(t.selectedCate.first=e.cateId1,t.secondCateList=s.children||[],t.secondCateList&&t.secondCateList.length>0&&t.secondCateList.forEach(function(s){s.id===e.cateId2&&(t.selectedCate.second=s.id,t.thirdCateList=s.children,t.thirdCateList.forEach(function(s){s.id===e.cateId3&&(t.selectedCate.third=s.id)}))}))}),e.imageList?e.imageList.forEach(function(s){s.showBtn=!1,1===s.type&&(t.mainImgUrl=s.url)}):t.mainImgUrl="",t.goodsImages=e.imageList||[],e.skuNameValues.forEach(function(s){var e=[];s.skuValues&&s.skuValues.length&&s.skuValues.forEach(function(t){e.push({name:t})}),t.setSkuNameValues.push({skuName:s.skuName,skuValues:e})}),t.goodsParams.firstSpecImages=[],e.skuNameValues&&e.skuNameValues.length>1&&e.skuNameValues[0].skuValueImages&&e.skuNameValues[0].skuValues&&(t.goodsParams.firstSpecImages.length=e.skuNameValues[0].skuValues.length,e.skuNameValues[0].skuValues.forEach(function(s,a){e.skuNameValues[0].skuValueImages.forEach(function(e){s==e.skuValue&&(t.goodsParams.firstSpecImages[a]=e.imageUrl)})}))})},saveGoods:function(){var t=this;this.goodsParams.categoryId=this.selectedCate.third||this.selectedCate.second||this.selectedCate.first||"";var s=this.copy(this.goodsParams);s.skuList.forEach(function(t){if(t.skuChannels.forEach(function(t){t.supplierStocks.forEach(function(t){delete t.supplierName,delete t.expressFeeTemplates})}),t.skuGroup){var e="";s.skuNameValues.length&&(t.skuGroup[0].skuValues.forEach(function(t){t.skuName?e+=t.skuName+":"+t.skuValue+",":e+=","}),e=e.substring(0,e.length-1)),t.groupSkuValue=e+"*"+t.skuGroup[0].quantity}});var e=!0;if(s.skuList.forEach(function(t){t.valueName&&t.skuChannels.forEach(function(){})}),e){var a=[];s.firstSpecImages.forEach(function(t,e){a.push({skuValue:s.skuNameValues[0].skuValues[e],imageUrl:t||""})}),s.skuNameValues.length&&s.skuNameValues[0].skuName?(s.skuNameValues[0].skuValueImages=[],a.forEach(function(t){t.skuValue&&s.skuNameValues[0].skuValueImages.push(t)})):(s.skuNameValues=[],s.skuList.forEach(function(t){t.groupSkuValue?t.skuGroup[0].skuValues=[]:t.skuValues=[]})),delete s.firstSpecImages,1==this.status||2==this.status?s.fromPage=0:s.fromPage=1;var i=JSON.parse(JSON.stringify(this.goodsImages)),n=1;i=i.map(function(t){return 1==t.type?t.sort=0:(t.sort=n,n++),t})||[],s.addImages=JSON.stringify(i),s.skuNameValues=JSON.stringify(s.skuNameValues);var o=!1;if(s.skuList.forEach(function(t){t.skuChannels.forEach(function(t){t.supplierStocks.forEach(function(t){0==t.approvedStatus&&(o=!0)})})}),s.skuList.forEach(function(t){t.skuChannels.forEach(function(t){t.supplierStocks.forEach(function(t){1==t.status&&(t.stock||(t.stock=-1))})})}),console.log(s),console.log(o),o)this.$msgbox({type:"warning",title:"友情提示",message:"您当前存在审核不通过的商品规格或供应商，是否继续保存？（保存后商品将不含有审核不通过的规格数据）",showClose:!0,showCancelButton:!0,cancelButtonText:"关闭",confirmButtonText:"我已知晓，继续保存",center:!0,beforeClose:function(e,a,i){if("confirm"===e){o=!1,i(),s.skuList.forEach(function(t){t.skuChannels.forEach(function(t){t.supplierStocks.forEach(function(t){0==t.approvedStatus&&(t.approvedStatus=2)})})}),s.skuList=JSON.stringify(s.skuList);var n={};for(var l in s)""!==s[l]&&(n[l]=s[l]);t.id&&1!=t.id?(n.id=t.id,s.delImageIds.length&&(n.delImageIds=JSON.stringify(s.delImageIds)),t.api.goods.update(n).then(function(s){t.$message.success({message:s.message,showClose:!0}),t.$router.push({name:"商品管理"})})):t.api.goods.add(n).then(function(s){t.$message.success({message:s.message,showClose:!0}),t.$router.push({name:"商品管理"})})}else"cancel"===e&&(o=!0,i())}});else{var l=JSON.parse(JSON.stringify(this.setSkuNameValues)),r=[];l&&l.length>0&&(this.goodsParams.firstSpecImages.forEach(function(s,e){s&&r.push({skuValue:t.setSkuNameValues[0].skuValues[e].name,imageUrl:s})}),l[0].skuValueImages=r),l.forEach(function(t,s){var e=[];t.skuValues.forEach(function(t){e.push(t.name)}),l[s].skuValues=e}),s.skuNameValues=JSON.stringify(l),s.skuList=JSON.stringify(s.skuList);var c={};for(var u in s)""!==s[u]&&(c[u]=s[u]);this.id&&1!=this.id?(c.id=this.id,s.delImageIds.length&&(c.delImageIds=JSON.stringify(s.delImageIds)),this.api.goods.update(c).then(function(s){t.$message.success({message:s.message,showClose:!0}),t.$router.push({name:"商品管理"})})):this.api.goods.add(c).then(function(s){t.$message.success({message:s.message,showClose:!0}),t.$router.push({name:"商品管理"})})}}},handleNum:function(t){t.quantity>100&&(t.quantity=100,this.$message.warning({message:"多件装的数量不能大于100",showClose:!0})),this.weightValue!==t.quantity&&(t.weight=this.weightValue*t.quantity)},diffNum:function(t,s){this.weightValue=t/s},btnSetSupplier:function(t,s,e){this.selectedSKUName=!1,this.goodsParams.skuList.forEach(function(t){t.skuChannels.forEach(function(t){t.show=!1})}),this.goodsParams.skuList[s].skuChannels[e].show=!0;var a=[];t.supplierStocks.forEach(function(t){var s,e;t.profitRate&&(s=Number(t.profitRate.split("%")[0])<2.2),t.approvedStatus&&(e=0!==t.profitRate);var i={approvedChannelPrice:t.approvedChannelPrice,approvedStatus:t.approvedStatus?t.approvedStatus:0,channelPrice:t.channelPrice,offlineType:t.offlineType,profitRate:t.profitRate,status:t.status,stock:t.stock,supplierId:t.supplierId,supplierName:t.supplierName,thirdAttr:t.thirdAttr?t.thirdAttr:[],isRed:s,isLock:e,changes:t.changes};a.push(i)}),t.supplierStocks=a,this.goodsParams.supplierStocks=t.supplierStocks,this.itemDetail=t,this.selectedSKUName=!0},btnSelectSKU:function(t){var s=this;this.selectedSKUName="",this.selectedChannelList=[],this.selectedSKUItem=t,t.skuChannels&&t.skuChannels.length>0&&t.skuChannels.forEach(function(t){s.selectedChannelList.push(t)}),this.showChannelModal=!0},btnSetPrice:function(t){this.selectedSKUName===t.displayName?this.selectedSKUName="":this.selectedSKUName=t.displayName,t.skuChannels&&t.skuChannels.length>0||this.$set(t,"skuChannels",this.copy(this.channelList))},removeChannel:function(t){this.selectedChannelList.splice(t,1)},selectChannel:function(t){if(this.selectedChannelList.length>0){var s=!1;this.selectedChannelList.forEach(function(e){e.channelType===t.channelType&&(s=!0)}),s||this.selectedChannelList.push(t)}else this.selectedChannelList.push(t)},saveChannelModal:function(){this.selectedSKUItem.skuChannels=this.copy(this.selectedChannelList),this.selectedSKUName=this.copy(this.selectedSKUItem.displayName),this.showChannelModal=!1},saveModal:function(){var t="［"+this.modalParams.groupSkuValue+"］";this.mixedList.forEach(function(s){t+="("+s.mixedName+")*"+s.quantity+"+"}),t=t.substring(0,t.length-1);var s={displayName:t,originalPrice:this.modalParams.originalPrice,groupSkuValue:this.modalParams.groupSkuValue,weight:this.modalParams.weight,skuGroup:this.mixedList,skuChannels:this.copy(this.channelList)};this.goodsParams.skuList.push(s),this.addShow=!1},remoteMethod:function(t){var s=this;this.api.brand.list({name:t}).then(function(t){s.searchBrandList=t.data.dataList})},remoteShopMethod:function(t){var s=this;this.api.store.allShop({name:t}).then(function(t){s.searchShopList=t.data})},sameGroupTableVisible:function(){this.sameGroupTableShow=!this.sameGroupTableShow,this.groupData.groupNum?(this.activeName="first",this.labelName.firstLabel="管理同组商品(".concat(this.groupData.groupNum,")")):this.activeName="second"},groupNum:function(){var t=this,s=[],e=[];this.adminGoodsData.groupId?s.push(this.adminGoodsData.groupId):e.push(this.adminGoodsData.id),this.api.goods.goodsGroupNum({groupIds:JSON.stringify(s),itemIds:JSON.stringify(e)}).then(function(s){t.groupData.groupNum=s.data,t.groupData.groupNum&&(t.labelName.firstLabel="管理同组商品(".concat(t.groupData.groupNum,")"))})},limit300:function(){this.descLength=this.goodsParams.desc.length,this.descLength>300&&(this.$message.warning({message:"宝贝描述应不多于300字符",showClose:!0}),this.goodsParams.desc=this.goodsParams.desc.substring(0,300))},goDetail:function(t){var s="/center/goods/commodity/detail/".concat(t.id,"/1");window.open(s,"_blank")},groupDete:function(){var t=this,s=[];this.sameGroupTableData.forEach(function(t){t.checked&&s.push(t.id)}),s.length?(this.avtiveOk?this.avtiveOk=!1:this.avtiveOk=!0,this.api.goods.removeGoodsFromGroup({itemIds:JSON.stringify(s)}).then(function(){t.$message.success({message:"更新成功",showClose:!0}),t.getGoodsList()})):this.$message.warning({message:"请选择商品",showClose:!0})},groupAdd:function(){var t=this,s=[],e=[];this.sameGroupTableData.forEach(function(t){t.checked&&(t.groupId?s.push(t.groupId):e.push(t.id))}),s.length||e.length?(this.avtiveOk?this.avtiveOk=!1:this.avtiveOk=!0,this.api.goods.mergeGoodsGroup({itemIds:JSON.stringify(e),groupIds:JSON.stringify(s)}).then(function(){t.$message.success({message:"更新成功",showClose:!0}),t.getGoodsList()})):this.$message.warning({message:"请选择商品",showClose:!0})},getGoodsList:function(){var t=this;this.api.goods.groupList(this.listParams).then(function(s){s.data.dataList.forEach(function(t){t.checked=!1}),t.sameGroupTableData=s.data.dataList,t.total=s.data.total,t.checkAll=!1}).catch(function(){t.total=0,t.checkAll=!1,t.sameGroupTableData=[]}),this.groupNum()},selectAll:function(){var t=this;this.checkAll=!this.checkAll,this.sameGroupTableData.forEach(function(s){t.checkAll?s.checked=!0:s.checked=!1})},selectItem:function(t){t.checked?t.checked=!1:t.checked=!0,t.checked||(this.checkAll=!1)},deteItem:function(t){var s=this;this.api.goods.removeGoodsFromGroup({itemIds:JSON.stringify([t.id])}).then(function(){s.$message.success({message:"剔除成功",showClose:!0}),s.getGoodsList()})},addItem:function(t){var s=this,e=[],a=[];this.adminGoodsData.groupId?a.push(this.adminGoodsData.groupId):e.push(this.adminGoodsData.id),t.groupId?a.push(t.groupId):e.push(t.id),this.api.goods.mergeGoodsGroup({itemIds:JSON.stringify(e),groupIds:JSON.stringify(a)}).then(function(t){s.$message.success({message:"添加成功",showClose:!0}),s.getGoodsList(),s.adminGoodsData.groupId=t.data?t.data:0})},handleClick:function(t){this.listParams.keyword&&delete this.listParams.keyword,this.listParams.page=1,"first"==t.name?(this.listParams.groupId=this.adminGoodsData.groupId,this.listParams.itemId=this.adminGoodsData.id,this.listParams.exceptGroupId&&delete this.listParams.exceptGroupId,this.listParams.page=1,delete this.listParams.exceptItemId):(delete this.listParams.groupId,this.listParams.exceptGroupId=this.adminGoodsData.groupId,this.listParams.exceptItemId=this.adminGoodsData.id,this.listParams.itemId&&delete this.listParams.itemId,this.listParams.page=1),this.getGoodsList()},search:function(){this.listParams={isGift:-1,page:1,limit:10,statusList:JSON.stringify(["1","2"]),keyword:this.input},this.getGoodsList()}},watch:{"goodsParams.currency":function(){var t=this;this.currencyList.forEach(function(s){s.code==t.goodsParams.currency&&(t.currencySymbol=s.symbol)})}},components:{editor:r["a"],selectShop:o["a"],SelectBrand:l["a"],Pagination:c["a"],noData:u["a"],draggable:m.a}},f=g,v=(e("b123"),e("9796"),e("2877")),C=Object(v["a"])(f,a,i,!1,null,"dcef6d18",null);s["default"]=C.exports},7715:function(t,s,e){},7862:function(t,s,e){},8518:function(t,s,e){},8799:function(t,s){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABcAAAAXCAYAAADgKtSgAAAAAXNSR0IArs4c6QAAAMBJREFUSA1jZCASzJo1q+3///9xjIyMR9PS0sKJ0cZEjCKoGkEgLQ3EIsTqIcVwYs2Eqxs1HB4UyIzRYEEODTibpsHCCMx5U4FW6cOtw8EA5k5loJQEEH8E5tIrOJQhCz9lAfJ0gRqtkUUJsPmJVH8PZPhqID5LwECQtDMQ6wLxYyBeC8R4AdB3bxnxqkCSBAbfdKCLM4Ca9gELLpBFBAFNI3TUcKzhPxos9A8WUA4lCgAz0HVgBtoDpM8TpQGoCACeKy06aSivrgAAAABJRU5ErkJggg=="},"8d0f":function(t,s,e){"use strict";var a=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"select-brand"},[e("el-dialog",{attrs:{title:"品牌选择:",visible:t.brandShow,width:"815px","before-close":t.cancelBrand},on:{"update:visible":function(s){t.brandShow=s}}},[e("div",{staticClass:"dialog-form border-bottom"},[e("div",{staticClass:"search-item"},[e("span",{staticClass:"title"},[t._v("品牌筛选：")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.brandName,expression:"brandName"}],staticClass:"form-control",attrs:{type:"text",placeholder:"请输入品牌名称"},domProps:{value:t.brandName},on:{keyup:function(s){return!s.type.indexOf("key")&&t._k(s.keyCode,"enter",13,s.key,"Enter")?null:t.getBrand(s)},input:function(s){s.target.composing||(t.brandName=s.target.value)}}})]),e("div",{staticClass:"search-item"},[e("span",{staticClass:"title"},[t._v("品牌英文名筛选：")]),t._l(t.letterList,function(s,a){return e("span",{key:a+"letter",staticClass:"letter",class:{active:t.currentLetter===s},on:{click:function(e){return t.selectLetter(s)}}},[t._v(t._s(s))])})],2)]),e("div",{staticClass:"dialog-form"},[e("div",{staticClass:"search-item selected－brand"},[e("span",{staticClass:"title"},[t._v("已选品牌：")]),t._l(t.selectedBrandList,function(s,a){return e("span",{key:a+"selected",staticClass:"selected-item"},[t._v("\n            "+t._s(s.name)+"\n            "),e("a",{attrs:{href:"javascript:;"},on:{click:function(s){return t.removeSelect(a)}}},[t._v("X")])])})],2),e("div",{staticClass:"search-item selected-box"},t._l(t.searchBrandList,function(s,a){return e("span",{key:a+"brand",staticClass:"brand-item"},[e("a",{staticClass:"link",on:{click:function(e){return t.selectItem(s)}}},[t._v(t._s(s.name))])])}),0)]),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("button",{staticClass:"btn-main",on:{click:function(s){return t.exportBrand()}}},[t._v("确定")]),e("button",{staticClass:"btn-fill-grey-main",on:{click:function(s){return t.cancelBrand()}}},[t._v("取消")])])])],1)},i=[],n=(e("ac6a"),{name:"selectBrand",props:{multiply:{default:!0},selected:{default:""}},data:function(){return{brandShow:!0,searchBrandList:[],selectedBrandList:[],brandName:"",currentLetter:"",letterList:["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","#"]}},created:function(){this.init()},methods:{showDialog:function(){this.brandShow=!0},init:function(){this.selected.length>0&&(this.selectedBrandList=this.copy(this.selected)),this.getBrand()},getBrand:function(){var t=this;this.api.brand.letterList({name:this.brandName,letter:this.currentLetter}).then(function(s){t.searchBrandList=s.data})},selectLetter:function(t){this.currentLetter===t?this.currentLetter="":this.currentLetter=t,this.getBrand()},selectItem:function(t){if(this.multiply)if(this.selectedBrandList.length>0){var s=!1;this.selectedBrandList.forEach(function(e){e.id===t.id&&(s=!0)}),s||this.selectedBrandList.push(t)}else this.selectedBrandList.push(t);else this.selectedBrandList=[],this.selectedBrandList.push(t)},removeSelect:function(t){this.selectedBrandList.splice(t,1)},exportBrand:function(){0!==this.selectedBrandList.length?this.$emit("dialogBrand",{brandList:this.selectedBrandList}):this.$message.info({message:"请选择品牌",showClose:!0})},cancelBrand:function(){this.brandShow=!0,this.$emit("dialogBrandCancel")}}}),o=n,l=(e("b557"),e("2877")),r=Object(l["a"])(o,a,i,!1,null,"3f6ec815",null);s["a"]=r.exports},"8dec":function(t,s,e){},9690:function(t,s){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABcAAAAMCAYAAACJOyb4AAAChElEQVQ4T52ST0hUURTGv3PfzJg4GlpoSgRS+MwsDCusQDScN2qmEOVCyW1BiwprlZYQtYhatQiiQNKgbJOg4XujpVK4cWgT5jPElIgyHSmscf68e+I9NKZ/i+msDt+59/ede+4hJMRWXct2Cbofl9wy7TfmE2t2Xjpe6l5e2njaXMq4VZD15QgY+ba+ss7dmRqO3YFLtJmHBszNPftT3zeOhWkNUPS8wmvFPMM2A0BQcUcrJiqHlxMNdulaWoTQT0QfJMtxAhUB3AKXshOW7BUWNb2p1l+phtYPok4H7nQU2tAHQEuAGd6sxbrgnmAs0UDtPZiONO9F7/RCe/BkMKYGtK9QxF4HLqjJsviYIFSmZS6WExikDmpdYDT/PgYQHphVxgnYpwBs17ViKdBg+oyr6qCvnSXVAthLLrHDhhMwwoziqLCOzlQNfaJCw3+Dwa1/gFcFAt2c1PTzDnzAnysFPwOhG8z7iGhCCoy6BL21ohwQgi5D4DXiHLU80Y8/Z25fVg3N6dAOUzN+qa3pqq7lM3EJgVqJxJXJl2WBwgNjbQzZBtBnZmwiwhwY15OHG748FlROEpfsx9imErxbED20P9QS3C0sUTtZM/DuP+D+MwyUR92R5nhKhLzf0mcA6WOIx6vwCxB4NFVlPEkaXmBoIwDdndL0LmeUAW1BcVGZFec+B66wRkCO6TPOJQXPH6zP8ciVWUVS3kS1HlJf1Kfj+0qII9FcpHjGBOGeBC0TuMNyKSVJwQsDVX6Gctb06TVqwN8I5tsgjEbJOuWRyiyAIYCvgagBTIt/3Yh/raWjc4cAdciinuOecFYo095nW97Sdzhzrq5/yc63Pa3JWJ89H/4BTm4duKJLq/IAAAAASUVORK5CYII="},9796:function(t,s,e){"use strict";var a=e("8dec"),i=e.n(a);i.a},b123:function(t,s,e){"use strict";var a=e("8518"),i=e.n(a);i.a},b4ab:function(t,s){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAAXNSR0IArs4c6QAAAahJREFUOBGtlb8vBEEUx98bq3CSk1BYJBIkkq3PH3I0EoVKoaKQEyqnUbgodAqVP4D7Q1y9FRKJHxehkDjx43bMd5jN7Ozi1pnibua99/3MrzdvmTKaLJV6by+ey1JGZWKeYaJRhEmia5LylFnU/Ym+Ojcab65cxSZbcyiYjSKqSZJTSU9yxMRnQlBl+D48sT3CDGS1Km4Gg912JI9/g0GDGMRCA63hxCvUDikrxpHnn5lrIw/hOjQaiG1itjwQN7ZH8By2z/oCzlthJ9t0IfYYZ+pPFgKhbzPjAoo7m9S/umRrdL+wvEjwuQ0LAkvo1HC9avx+eUXFrbUEFLABBWs37zIU6qJUmnnIM9VLBbQOjrQNADT58qphj9t79LR/qG2pH8XykLRp3GeoC/0RpiRgxfmTmu2PBk8/J6LpLL05M6zMbBlx320ZLA9vU8WkgDbMBpgztW3xYhTLw0NXt7MQG7863vgYuWdmzhS+rAbW/yc2ShCqRtaMeWxgaBZE+g2qB54HYMeiOJgyFqeNvzK/AYcd2EkfGmhNbFy+jKHbApsCAtzNJ+ADZY/W0D4Cv+sAAAAASUVORK5CYII="},b557:function(t,s,e){"use strict";var a=e("7862"),i=e.n(a);i.a},b9e0:function(t,s,e){t.exports=e.p+"img/lookDemo.f6db8290.png"},c768:function(t,s,e){"use strict";var a=e("456a"),i=e.n(a);i.a},c8f0:function(t,s,e){"use strict";var a=e("7715"),i=e.n(a);i.a},f4dc:function(t,s){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAOCAYAAAAfSC3RAAAAAXNSR0IArs4c6QAAAMFJREFUKBW1UjsOwjAMxTRDOuQQICaQYOgQxt6As3KDrtkACVgQHKJDMqQKfp2iyFJRJTzEfs8f+RNaCNK2re773rErGWOOXdeFMkyVBLD3fs1qDzuEsGL1hJ3LMgeSnVIiiZ9MlJLAzU4kLAJz5C0Nw7BhfEZlIjpVVfWCDWGctNYfaprmwvgwsr8/N7QqDj9RIym+k53VqlTZWruNMd7hU0rtnHOPMm72Vv+XiPWXbY4jSGRd12/+5Ff2EW4mxXwBZI1GX0TcOS4AAAAASUVORK5CYII="},f88c:function(t,s,e){"use strict";var a=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"tinymce-container editor-container",class:{fullscreen:t.fullscreen}},[e("textarea",{staticClass:"tinymce-textarea",attrs:{id:t.tinymceId}}),e("div",{staticClass:"editor-custom-btn-container"},[e("editorImage",{staticClass:"editor-upload-btn",on:{successCBK:t.imageSuccessCBK}})],1)])},i=[],n=(e("ac6a"),e("c5f6"),function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"upload-container"},[a("button",{staticClass:"btn-fill-main",on:{click:function(s){t.dialogVisible=!0}}},[t._v("上传图片\n  ")]),a("el-dialog",{attrs:{visible:t.dialogVisible,title:"图片上传"},on:{"update:visible":function(s){t.dialogVisible=s}}},[a("div",{staticClass:"dialog-form"},[t._l(t.arr,function(s,i){return a("div",{key:i+"img",staticClass:"img-item"},[a("img",{attrs:{src:s.url}}),a("img",{staticClass:"remove-img",attrs:{src:e("b4ab")},on:{click:function(s){return t.removeImg(i)}}})])}),a("a",{staticClass:"addGoodsImg",attrs:{href:"javascript:;"}},[a("upload",{attrs:{uploadType:"2"},on:{uploadSuccess:t.uploadSuccess}},[a("img",{attrs:{src:e("8799")}})])],1)],2),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("button",{staticClass:"btn-main",on:{click:t.handleSubmit}},[t._v("确定")]),a("button",{staticClass:"btn-fill-grey-main",on:{click:function(s){t.dialogVisible=!1}}},[t._v("取消")])])])],1)}),o=[],l={name:"EditorSlideUpload",data:function(){return{dialogVisible:!1,listObj:{},fileList:[],arr:[]}},methods:{uploadSuccess:function(t){this.arr.push({name:"",url:t.data})},removeImg:function(t){this.arr.splice(t,1)},handleSubmit:function(){this.$emit("successCBK",this.arr),this.dialogVisible=!1}}},r=l,c=(e("c768"),e("2877")),u=Object(c["a"])(r,n,o,!1,null,null,null),d=u.exports,m=["advlist anchor autolink autosave code codesample colorpicker colorpicker contextmenu directionality emoticons fullscreen hr image imagetools importcss insertdatetime link lists media nonbreaking noneditable pagebreak paste preview print save searchreplace spellchecker tabfocus table template textcolor textpattern visualblocks visualchars wordcount"],h=m,p=["bold italic underline strikethrough alignleft aligncenter alignright outdent indent  blockquote undo redo removeformat subscript superscript code codesample","hr bullist numlist link image charmap preview anchor pagebreak insertdatetime media table emoticons forecolor backcolor fullscreen"],g=p,f={name:"Tinymce",components:{editorImage:d},props:{id:{type:String,default:function(){return"vue-tinymce-"+ +new Date+(1e3*Math.random()).toFixed(0)}},value:{type:String,default:""},toolbar:{type:Array,required:!1,default:function(){return[]}},menubar:{type:String,default:"file edit insert view format table"},height:{type:Number,required:!1,default:360}},data:function(){return{hasChange:!1,hasInit:!1,tinymceId:this.id,fullscreen:!1,languageTypeList:{en:"en",zh:"zh_CN"}}},computed:{},watch:{value:function(t){var s=this;!this.hasChange&&this.hasInit&&this.$nextTick(function(){return window.tinymce.get(s.tinymceId).setContent(t||"")})}},mounted:function(){this.initTinymce()},activated:function(){this.initTinymce()},deactivated:function(){this.destroyTinymce()},destroyed:function(){this.destroyTinymce()},methods:{initTinymce:function(){var t=this,s=this;window.tinymce.init({language:"zh_CN",selector:"#".concat(this.tinymceId),height:this.height,body_class:"panel-body ",object_resizing:!1,toolbar:this.toolbar.length>0?this.toolbar:g,menubar:this.menubar,plugins:h,end_container_on_empty_block:!0,powerpaste_word_import:"clean",code_dialog_height:450,code_dialog_width:1e3,advlist_bullet_styles:"square",advlist_number_styles:"default",imagetools_cors_hosts:["www.tinymce.com","codepen.io"],default_link_target:"_blank",link_title:!1,nonbreaking_force_tab:!0,init_instance_callback:function(e){s.value&&e.setContent(s.value),s.hasInit=!0,e.on("NodeChange Change KeyUp SetContent",function(){t.hasChange=!0,t.$emit("input",e.getContent())})},setup:function(t){t.on("FullscreenStateChanged",function(t){s.fullscreen=t.state})}})},destroyTinymce:function(){window.tinymce.get(this.tinymceId)&&window.tinymce.get(this.tinymceId).destroy()},setContent:function(t){window.tinymce.get(this.tinymceId).setContent(t)},getContent:function(){window.tinymce.get(this.tinymceId).getContent()},imageSuccessCBK:function(t){var s=this;t.forEach(function(t){window.tinymce.get(s.tinymceId).insertContent('<img class="wscnph" src="'.concat(t.url,'" >'))})}}},v=f,C=(e("c8f0"),Object(c["a"])(v,a,i,!1,null,"653726a2",null));s["a"]=C.exports}}]);
//# sourceMappingURL=chunk-565ffc7d.99156003.js.map