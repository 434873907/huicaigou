(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a432a5aa"],{"3ed3":function(a,t,e){"use strict";e.r(t);var s=function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("div",{staticClass:"buy-limit-detail"},[e("h2",{staticClass:"big-title"},[a._v("编辑活动")]),e("div",{staticClass:"wrap"},[e("div",{staticClass:"form-wrap"},[e("div",{staticClass:"form-name"},[a._v("团购名称:")]),e("input",{directives:[{name:"model",rawName:"v-model",value:a.detailData.name,expression:"detailData.name"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:a.detailData.name},on:{input:function(t){t.target.composing||a.$set(a.detailData,"name",t.target.value)}}})]),e("div",{staticClass:"form-wrap"},[e("div",{staticClass:"form-name"},[a._v("活动时间:")]),e("el-date-picker",{staticClass:"timepicker-control",attrs:{size:"small",type:"datetime","value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"请选择开始时间"},model:{value:a.detailData.startTime,callback:function(t){a.$set(a.detailData,"startTime",t)},expression:"detailData.startTime"}}),e("el-date-picker",{staticClass:"timepicker-control",attrs:{size:"small",type:"datetime","value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"请选择结束时间"},model:{value:a.detailData.endTime,callback:function(t){a.$set(a.detailData,"endTime",t)},expression:"detailData.endTime"}})],1),e("div",{staticClass:"form-wrap"},[e("div",{staticClass:"form-name"},[a._v("海报图片:")]),e("upload",{staticClass:"banner",attrs:{uploadType:"2"},on:{uploadSuccess:a.uploadSuccess}},[e("a",{directives:[{name:"show",rawName:"v-show",value:!a.detailData.banner,expression:"!detailData.banner"}],staticClass:"btn-main"},[a._v("上传")]),e("img",{directives:[{name:"show",rawName:"v-show",value:a.detailData.banner,expression:"detailData.banner"}],attrs:{src:a.detailData.banner}})])],1),e("div",{staticClass:"form-wrap"},[e("div",{staticClass:"form-name"},[a._v("禁用优惠券:")]),e("el-radio",{attrs:{name:"disabled",label:1},model:{value:a.detailData.disableCoupons,callback:function(t){a.$set(a.detailData,"disableCoupons",t)},expression:"detailData.disableCoupons"}},[a._v("是")]),e("el-radio",{attrs:{name:"disabled",label:0},model:{value:a.detailData.disableCoupons,callback:function(t){a.$set(a.detailData,"disableCoupons",t)},expression:"detailData.disableCoupons"}},[a._v("否")])],1),e("div",{staticClass:"form-wrap"},[e("div",{staticClass:"form-name"},[a._v("团购商品:")]),e("a",{staticClass:"select-goods",on:{click:function(t){a.showGoodsModal=!0}}},[a._v("+ 选择商品")])]),a._m(0),e("div",{staticClass:"goods-list"},[e("table",[e("thead",[e("tr",[e("th",{staticClass:"w300"},[a._v("商品名称")]),e("th",{directives:[{name:"show",rawName:"v-show",value:!a.userConfig.singleChannel,expression:"!userConfig.singleChannel"}],staticClass:"w150"},[a._v("渠道")]),e("th",{staticClass:"w150"},[a._v("SKU")]),e("th",{staticClass:"w100"},[a._v("库存")]),e("th",{staticClass:"w100"},[a._v("原价")]),e("th",[a._v("操作")])])]),e("tbody",a._l(a.itemData.items,function(t,s){return e("tr",{key:t.skuId},[0==s?e("td",{staticClass:"item-name",attrs:{rowspan:a.itemData.items.length}},[e("img",{attrs:{src:a.itemData.mainImg}}),e("span",[a._v(a._s(a.itemData.itemName))])]):a._e(),a.userConfig.singleChannel||0!=s?a._e():e("td",{attrs:{rowspan:a.itemData.items.length}},[a._v(a._s(a.itemData.channelName))]),e("td",[a._v(a._s(t.skuValue))]),e("td",[a._v(a._s(t.stockNum))]),e("td",[a._v(a._s(t.price))]),e("td",[e("a",{staticClass:"link",on:{click:function(t){return a.removeSku(s)}}},[a._v("删除")])])])}),0)])]),e("div",{staticClass:"form-wrap"},[e("div",{staticClass:"form-name"},[a._v("货币:")]),e("select",{directives:[{name:"model",rawName:"v-model",value:a.detailData.currency,expression:"detailData.currency"}],staticClass:"form-control",class:{"unset-select":!a.detailData.currency},on:{change:function(t){var e=Array.prototype.filter.call(t.target.options,function(a){return a.selected}).map(function(a){var t="_value"in a?a._value:a.value;return t});a.$set(a.detailData,"currency",t.target.multiple?e:e[0])}}},[e("option",{domProps:{value:0}},[a._v("请选择")]),a._l(a.currencyList,function(t){return e("option",{key:t.code,domProps:{value:t.code}},[a._v(a._s(t.mixName))])})],2)]),e("div",{staticClass:"form-wrap"},[e("div",{staticClass:"form-name"},[a._v("团购价:")]),e("ApiInput",{model:{value:a.detailData.groupPrice,callback:function(t){a.$set(a.detailData,"groupPrice",t)},expression:"detailData.groupPrice"}})],1),e("div",{staticClass:"form-wrap"},[e("div",{staticClass:"form-name"},[a._v("团购库存:")]),e("ApiInput",{model:{value:a.detailData.stockNum,callback:function(t){a.$set(a.detailData,"stockNum",t)},expression:"detailData.stockNum"}})],1),e("div",{staticClass:"form-wrap"},[e("div",{staticClass:"form-name"},[a._v("是否限购:")]),e("el-radio",{attrs:{name:"disabled",label:1},model:{value:a.detailData.limit,callback:function(t){a.$set(a.detailData,"limit",t)},expression:"detailData.limit"}},[a._v("是")]),e("el-radio",{attrs:{name:"disabled",label:0},model:{value:a.detailData.limit,callback:function(t){a.$set(a.detailData,"limit",t)},expression:"detailData.limit"}},[a._v("否")])],1),e("div",{directives:[{name:"show",rawName:"v-show",value:a.detailData.limit,expression:"detailData.limit"}],staticClass:"form-wrap"},[e("div",{staticClass:"form-name"},[a._v("限购数量:")]),e("ApiInput",{model:{value:a.detailData.limitNum,callback:function(t){a.$set(a.detailData,"limitNum",t)},expression:"detailData.limitNum"}})],1),e("div",{staticClass:"btn-main",on:{click:function(t){return a.save()}}},[a._v("保存")])]),a.showGoodsModal?e("selectActGoods",{attrs:{type:"group"},on:{dialogGoods:a.dialogGoods,dialogGoodsCancel:a.dialogGoodsCancel}}):a._e()],1)},i=[function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("div",{staticClass:"form-wrap"},[e("div",{staticClass:"form-name"},[a._v("商品信息:")])])}],l=(e("7f7f"),e("ac6a"),e("7994")),n={components:{selectActGoods:l["a"]},data:function(){return{showGoodsModal:!1,itemData:{itemName:"",mainImg:"",channelName:"",items:[]},currencyList:[],detailData:{name:"",startTime:"",endTime:"",banner:"",itemId:"",skuIds:[],channelType:"",groupPrice:"",stockNum:"",limit:0,limitNum:"",currency:0,disableCoupons:0}}},created:function(){var a=this,t=this.$route.params.id;this.getCurrency(),t&&this.api.groupBuy.get({id:t}).then(function(t){a.detailData.name=a.extend(a.detailData,t.data),a.itemData={itemName:t.data.itemName,mainImg:t.data.itemImage,channelName:t.data.channelName,items:[]},t.data.skuInfoList.forEach(function(t){a.itemData.items.push({skuId:t.skuId,skuValue:t.skuValue,stockNum:t.stock,price:t.price||t.originalPrice})})})},methods:{getCurrency:function(){var a=this;this.api.common.currency({}).then(function(t){a.currencyList=t.data,a.currencyList.forEach(function(a){a.mixName=a.symbol+" "+a.name})})},dialogGoods:function(a){var t=this;console.log("1111111"),this.itemData={itemName:"",mainImg:"",channelName:"",items:[]},console.log(a.goodsList),a.goodsList.forEach(function(a){t.detailData.itemId=a.itemId,t.detailData.skuIds=[],t.detailData.channelType=a.selectedChannel,t.itemData.mainImg=a.mainImg,t.itemData.itemName=a.itemName,t.itemData.channelName=a.selectedChannelName,a.selectedSku.forEach(function(a){t.itemData.items.push({skuId:a.skuId,skuValue:a.skuValue,stockNum:a.stockNum,price:a.price})})}),this.showGoodsModal=!1},dialogGoodsCancel:function(){this.showGoodsModal=!1},uploadSuccess:function(a){this.detailData.banner=a.data},removeSku:function(a){this.itemData.items.splice(a,1)},save:function(){var a=this,t=this.copy(this.detailData);if(t.itemId){t.limit||delete t.limitNum,this.itemData.items.forEach(function(a){t.skuIds.push(a.skuId)}),t.skuIds=t.skuIds.join(",");var e="add";this.$route.params.id&&(t.id=this.$route.params.id,e="update"),this.api.groupBuy[e](t).then(function(t){a.$message.success({message:t.message,showClose:!0}),a.$router.push({name:"团购"})})}else this.$message.info({message:"请选择商品",showClose:!0})}}},o=n,c=(e("4cbb"),e("2877")),m=Object(c["a"])(o,s,i,!1,null,null,null);t["default"]=m.exports},"4cbb":function(a,t,e){"use strict";var s=e("ce5e"),i=e.n(s);i.a},ce5e:function(a,t,e){}}]);
//# sourceMappingURL=chunk-a432a5aa.21b04e27.js.map