(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5c77ed10"],{"20d9":function(e,t,a){"use strict";var l=a("b1ef"),s=a.n(l);s.a},"262d":function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"level-detail"},[a("h2",{staticClass:"title"},[e._v(e._s(e.id?"编辑":"新增")+"会员等级")]),a("div",{staticClass:"level-wrap"},[a("div",{staticClass:"level-item"},[a("span",{staticClass:"level-title"},[e._v("会员等级名称")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.levelParams.ruleName,expression:"levelParams.ruleName"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:e.levelParams.ruleName},on:{input:function(t){t.target.composing||e.$set(e.levelParams,"ruleName",t.target.value)}}})]),a("div",{staticClass:"level-item"},[a("span",{staticClass:"level-title"},[e._v("时间类型")]),a("input",{directives:[{name:"show",rawName:"v-show",value:0!=e.levelParams.timeIntervalType,expression:"levelParams.timeIntervalType!=0"},{name:"model",rawName:"v-model",value:e.levelParams.timeInterval,expression:"levelParams.timeInterval"}],staticClass:"form-control stort-input",attrs:{type:"text",placeholder:"请输入限制的数量"},domProps:{value:e.levelParams.timeInterval},on:{input:function(t){t.target.composing||e.$set(e.levelParams,"timeInterval",t.target.value)}}}),a("select",{directives:[{name:"model",rawName:"v-model",value:e.levelParams.timeIntervalType,expression:"levelParams.timeIntervalType"}],staticClass:"form-control stort-input",on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){var t="_value"in e?e._value:e.value;return t});e.$set(e.levelParams,"timeIntervalType",t.target.multiple?a:a[0])}}},e._l(e.timeList,function(t){return a("option",{key:t.id,domProps:{value:t.id}},[e._v(e._s(t.name))])}),0)]),a("div",{staticClass:"level-item"},[a("span",{staticClass:"level-title"},[e._v("等级设置")]),a("div",{staticClass:"level-box"},e._l(e.levelParams.levelRules,function(t,l){return a("div",{key:l+"rule",staticClass:"rule-item"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"item.name"}],staticClass:"form-control stort-input",attrs:{type:"number",placeholder:"请输入等级称号"},domProps:{value:t.name},on:{keyup:function(t){return e.handleInput(t.target,l,"name")},input:function(a){a.target.composing||e.$set(t,"name",a.target.value)}}}),a("input",{directives:[{name:"model",rawName:"v-model",value:t.limitValue,expression:"item.limitValue"}],staticClass:"form-control stort-input",attrs:{type:"number",placeholder:"请设置等级要求"},domProps:{value:t.limitValue},on:{input:[function(a){a.target.composing||e.$set(t,"limitValue",a.target.value)},function(t){return e.handleInput(t.target,l,"limitValue")}]}}),a("span",{staticClass:"text"},[e._v("元以上")]),a("span",{staticClass:"op",on:{click:function(t){return e.addRule()}}},[e._v("+")]),a("span",{directives:[{name:"show",rawName:"v-show",value:0!=l,expression:"index!=0"}],staticClass:"op",on:{click:function(t){return e.removeRule(l)}}},[e._v("-")])])}),0)]),a("div",{staticClass:"level-item"},[a("span",{staticClass:"level-title"},[e._v("默认启用")]),a("el-radio",{staticClass:"radio",attrs:{label:1},model:{value:e.levelParams.status,callback:function(t){e.$set(e.levelParams,"status",t)},expression:"levelParams.status"}},[e._v("是")]),a("el-radio",{staticClass:"radio",attrs:{label:0},model:{value:e.levelParams.status,callback:function(t){e.$set(e.levelParams,"status",t)},expression:"levelParams.status"}},[e._v("否")])],1)]),a("div",{staticClass:"bot-btn"},[a("a",{staticClass:"btn-main",attrs:{href:"javascript:;"},on:{click:function(t){return e.saveLevel()}}},[e._v("保存")]),a("span",{staticClass:"btn-fill-main",on:{click:function(t){return e.$router.go(-1)}}},[e._v("返回")])])])},s=[],i={data:function(){return{id:"",typeList:[{id:1,name:"历史消费金额"}],timeList:[{id:0,name:"无限期"},{id:1,name:"日"},{id:2,name:"周"},{id:3,name:"月"},{id:4,name:"年"}],levelParams:{ruleName:"",timeInterval:"",timeIntervalType:0,status:0,levelRules:[{name:"",limitValue:""}]}}},created:function(){this.id=this.$route.params.id||"",this.id&&this.getDetail()},methods:{handleInput:function(e,t,a){/^\d+$/.test(e.value)||(this.levelParams.levelRules[t][a]="")},getDetail:function(){var e=this;this.api.staff.levelDetail({id:this.id}).then(function(t){t.data.levelRules=JSON.parse(t.data.levelRules),e.levelParams=t.data})},addRule:function(){this.levelParams.levelRules.push({name:"",limitValue:""})},removeRule:function(e){this.levelParams.levelRules.splice(e,1)},saveLevel:function(){var e=this,t=this.copy(this.levelParams);0==t.timeIntervalType&&delete t.timeInterval,t.levelRules=JSON.stringify(t.levelRules);var a=this.levelParams.id?"updateLevel":"addLevel";this.api.staff[a](t).then(function(t){e.$message.success({message:t.message,showClose:!0}),e.$router.push({name:"会员等级"})})}}},n=i,r=(a("20d9"),a("2877")),v=Object(r["a"])(n,l,s,!1,null,"c0c1850e",null);t["default"]=v.exports},b1ef:function(e,t,a){}}]);
//# sourceMappingURL=chunk-5c77ed10.f239ce1f.js.map