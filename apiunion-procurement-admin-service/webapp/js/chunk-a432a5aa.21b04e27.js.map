{"version":3,"sources":["webpack:///./src/pages/center/marketing/groupBuy/detail.vue?a5ef","webpack:///src/pages/center/marketing/groupBuy/detail.vue","webpack:///./src/pages/center/marketing/groupBuy/detail.vue?c6fc","webpack:///./src/pages/center/marketing/groupBuy/detail.vue?f811","webpack:///./src/pages/center/marketing/groupBuy/detail.vue?acdc"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","_v","directives","name","rawName","value","detailData","expression","attrs","domProps","on","$event","target","composing","$set","model","callback","$$v","uploadSuccess","banner","showGoodsModal","_m","userConfig","singleChannel","_l","itemData","item","index","key","skuId","items","length","mainImg","_s","itemName","_e","channelName","skuValue","stockNum","price","removeSku","class","currency","$$selectedVal","Array","prototype","filter","call","options","o","selected","map","val","_value","multiple","code","mixName","save","dialogGoods","dialogGoodsCancel","staticRenderFns","components","data","currencyList","startTime","endTime","itemId","skuIds","channelType","groupPrice","limit","limitNum","disableCoupons","created","getCurrency","api","groupBuy","get","res","itemImage","skuInfoList","forEach","sku","stock","originalPrice","methods","common","then","symbol","console","log","goodsList","selectedSku","splice","params","push","join","id","$route","$message","info","component"],"mappings":"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","file":"js/chunk-a432a5aa.21b04e27.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"buy-limit-detail\"},[_c('h2',{staticClass:\"big-title\"},[_vm._v(\"编辑活动\")]),_c('div',{staticClass:\"wrap\"},[_c('div',{staticClass:\"form-wrap\"},[_c('div',{staticClass:\"form-name\"},[_vm._v(\"团购名称:\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.detailData.name),expression:\"detailData.name\"}],staticClass:\"form-control\",attrs:{\"type\":\"text\"},domProps:{\"value\":(_vm.detailData.name)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.detailData, \"name\", $event.target.value)}}})]),_c('div',{staticClass:\"form-wrap\"},[_c('div',{staticClass:\"form-name\"},[_vm._v(\"活动时间:\")]),_c('el-date-picker',{staticClass:\"timepicker-control\",attrs:{\"size\":\"small\",\"type\":\"datetime\",\"value-format\":\"yyyy-MM-dd HH:mm:ss\",\"placeholder\":\"请选择开始时间\"},model:{value:(_vm.detailData.startTime),callback:function ($$v) {_vm.$set(_vm.detailData, \"startTime\", $$v)},expression:\"detailData.startTime\"}}),_c('el-date-picker',{staticClass:\"timepicker-control\",attrs:{\"size\":\"small\",\"type\":\"datetime\",\"value-format\":\"yyyy-MM-dd HH:mm:ss\",\"placeholder\":\"请选择结束时间\"},model:{value:(_vm.detailData.endTime),callback:function ($$v) {_vm.$set(_vm.detailData, \"endTime\", $$v)},expression:\"detailData.endTime\"}})],1),_c('div',{staticClass:\"form-wrap\"},[_c('div',{staticClass:\"form-name\"},[_vm._v(\"海报图片:\")]),_c('upload',{staticClass:\"banner\",attrs:{\"uploadType\":\"2\"},on:{\"uploadSuccess\":_vm.uploadSuccess}},[_c('a',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.detailData.banner),expression:\"!detailData.banner\"}],staticClass:\"btn-main\"},[_vm._v(\"上传\")]),_c('img',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.detailData.banner),expression:\"detailData.banner\"}],attrs:{\"src\":_vm.detailData.banner}})])],1),_c('div',{staticClass:\"form-wrap\"},[_c('div',{staticClass:\"form-name\"},[_vm._v(\"禁用优惠券:\")]),_c('el-radio',{attrs:{\"name\":\"disabled\",\"label\":1},model:{value:(_vm.detailData.disableCoupons),callback:function ($$v) {_vm.$set(_vm.detailData, \"disableCoupons\", $$v)},expression:\"detailData.disableCoupons\"}},[_vm._v(\"是\")]),_c('el-radio',{attrs:{\"name\":\"disabled\",\"label\":0},model:{value:(_vm.detailData.disableCoupons),callback:function ($$v) {_vm.$set(_vm.detailData, \"disableCoupons\", $$v)},expression:\"detailData.disableCoupons\"}},[_vm._v(\"否\")])],1),_c('div',{staticClass:\"form-wrap\"},[_c('div',{staticClass:\"form-name\"},[_vm._v(\"团购商品:\")]),_c('a',{staticClass:\"select-goods\",on:{\"click\":function($event){_vm.showGoodsModal=true}}},[_vm._v(\"+ 选择商品\")])]),_vm._m(0),_c('div',{staticClass:\"goods-list\"},[_c('table',[_c('thead',[_c('tr',[_c('th',{staticClass:\"w300\"},[_vm._v(\"商品名称\")]),_c('th',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.userConfig.singleChannel),expression:\"!userConfig.singleChannel\"}],staticClass:\"w150\"},[_vm._v(\"渠道\")]),_c('th',{staticClass:\"w150\"},[_vm._v(\"SKU\")]),_c('th',{staticClass:\"w100\"},[_vm._v(\"库存\")]),_c('th',{staticClass:\"w100\"},[_vm._v(\"原价\")]),_c('th',[_vm._v(\"操作\")])])]),_c('tbody',_vm._l((_vm.itemData.items),function(item,index){return _c('tr',{key:item.skuId},[(index==0)?_c('td',{staticClass:\"item-name\",attrs:{\"rowspan\":_vm.itemData.items.length}},[_c('img',{attrs:{\"src\":_vm.itemData.mainImg}}),_c('span',[_vm._v(_vm._s(_vm.itemData.itemName))])]):_vm._e(),(!_vm.userConfig.singleChannel&&index==0)?_c('td',{attrs:{\"rowspan\":_vm.itemData.items.length}},[_vm._v(_vm._s(_vm.itemData.channelName))]):_vm._e(),_c('td',[_vm._v(_vm._s(item.skuValue))]),_c('td',[_vm._v(_vm._s(item.stockNum))]),_c('td',[_vm._v(_vm._s(item.price))]),_c('td',[_c('a',{staticClass:\"link\",on:{\"click\":function($event){return _vm.removeSku(index)}}},[_vm._v(\"删除\")])])])}),0)])]),_c('div',{staticClass:\"form-wrap\"},[_c('div',{staticClass:\"form-name\"},[_vm._v(\"货币:\")]),_c('select',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.detailData.currency),expression:\"detailData.currency\"}],staticClass:\"form-control\",class:{'unset-select':!_vm.detailData.currency},on:{\"change\":function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return val}); _vm.$set(_vm.detailData, \"currency\", $event.target.multiple ? $$selectedVal : $$selectedVal[0])}}},[_c('option',{domProps:{\"value\":0}},[_vm._v(\"请选择\")]),_vm._l((_vm.currencyList),function(item){return _c('option',{key:item.code,domProps:{\"value\":item.code}},[_vm._v(_vm._s(item.mixName))])})],2)]),_c('div',{staticClass:\"form-wrap\"},[_c('div',{staticClass:\"form-name\"},[_vm._v(\"团购价:\")]),_c('ApiInput',{model:{value:(_vm.detailData.groupPrice),callback:function ($$v) {_vm.$set(_vm.detailData, \"groupPrice\", $$v)},expression:\"detailData.groupPrice\"}})],1),_c('div',{staticClass:\"form-wrap\"},[_c('div',{staticClass:\"form-name\"},[_vm._v(\"团购库存:\")]),_c('ApiInput',{model:{value:(_vm.detailData.stockNum),callback:function ($$v) {_vm.$set(_vm.detailData, \"stockNum\", $$v)},expression:\"detailData.stockNum\"}})],1),_c('div',{staticClass:\"form-wrap\"},[_c('div',{staticClass:\"form-name\"},[_vm._v(\"是否限购:\")]),_c('el-radio',{attrs:{\"name\":\"disabled\",\"label\":1},model:{value:(_vm.detailData.limit),callback:function ($$v) {_vm.$set(_vm.detailData, \"limit\", $$v)},expression:\"detailData.limit\"}},[_vm._v(\"是\")]),_c('el-radio',{attrs:{\"name\":\"disabled\",\"label\":0},model:{value:(_vm.detailData.limit),callback:function ($$v) {_vm.$set(_vm.detailData, \"limit\", $$v)},expression:\"detailData.limit\"}},[_vm._v(\"否\")])],1),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.detailData.limit),expression:\"detailData.limit\"}],staticClass:\"form-wrap\"},[_c('div',{staticClass:\"form-name\"},[_vm._v(\"限购数量:\")]),_c('ApiInput',{model:{value:(_vm.detailData.limitNum),callback:function ($$v) {_vm.$set(_vm.detailData, \"limitNum\", $$v)},expression:\"detailData.limitNum\"}})],1),_c('div',{staticClass:\"btn-main\",on:{\"click\":function($event){return _vm.save()}}},[_vm._v(\"保存\")])]),(_vm.showGoodsModal)?_c('selectActGoods',{attrs:{\"type\":'group'},on:{\"dialogGoods\":_vm.dialogGoods,\"dialogGoodsCancel\":_vm.dialogGoodsCancel}}):_vm._e()],1)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"form-wrap\"},[_c('div',{staticClass:\"form-name\"},[_vm._v(\"商品信息:\")])])}]\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"buy-limit-detail\">\n    <h2 class=\"big-title\">编辑活动</h2>\n    <div class=\"wrap\">\n      <div class=\"form-wrap\">\n        <div class=\"form-name\">团购名称:</div>\n        <input type=\"text\" class=\"form-control\" v-model=\"detailData.name\">\n      </div>\n      <div class=\"form-wrap\">\n        <div class=\"form-name\">活动时间:</div>\n        <el-date-picker class=\"timepicker-control\" size=\"small\" type=\"datetime\" value-format=\"yyyy-MM-dd HH:mm:ss\"  placeholder=\"请选择开始时间\" v-model=\"detailData.startTime\"></el-date-picker>\n        <el-date-picker class=\"timepicker-control\" size=\"small\" type=\"datetime\" value-format=\"yyyy-MM-dd HH:mm:ss\"  placeholder=\"请选择结束时间\" v-model=\"detailData.endTime\"></el-date-picker>\n      </div>\n      <div class=\"form-wrap\">\n        <div class=\"form-name\">海报图片:</div>\n        <upload class=\"banner\" uploadType='2' v-on:uploadSuccess=\"uploadSuccess\">\n          <a class=\"btn-main\" v-show=\"!detailData.banner\">上传</a>\n          <img :src=\"detailData.banner\" v-show=\"detailData.banner\"/>\n        </upload>\n      </div>\n      <div class=\"form-wrap\">\n        <div class=\"form-name\">禁用优惠券:</div>\n        <el-radio name=\"disabled\" v-model=\"detailData.disableCoupons\" :label=\"1\">是</el-radio>\n        <el-radio name=\"disabled\" v-model=\"detailData.disableCoupons\" :label=\"0\">否</el-radio>\n      </div>\n      <div class=\"form-wrap\">\n        <div class=\"form-name\">团购商品:</div>\n        <a class=\"select-goods\" @click=\"showGoodsModal=true\">+ 选择商品</a>\n      </div>\n      <div class=\"form-wrap\">\n        <div class=\"form-name\">商品信息:</div>\n      </div>\n      <div class=\"goods-list\">\n        <table>\n          <thead>\n            <tr>\n              <th class=\"w300\">商品名称</th>\n              <th class=\"w150\" v-show=\"!userConfig.singleChannel\">渠道</th>\n              <th class=\"w150\">SKU</th>\n              <th class=\"w100\">库存</th>\n              <th class=\"w100\">原价</th>\n              <!-- <th>剩余库存</th> -->\n              <th>操作</th>\n            </tr>\n          </thead>\n          <tbody>\n            <tr v-for=\"(item, index) in itemData.items\" :key=\"item.skuId\">\n              <td :rowspan=\"itemData.items.length\" v-if=\"index==0\" class=\"item-name\">\n                  <img :src=\"itemData.mainImg\" />\n                  <span>{{itemData.itemName}}</span>\n              </td>\n              <td :rowspan=\"itemData.items.length\" v-if=\"!userConfig.singleChannel&&index==0\">{{itemData.channelName}}</td>\n              <td>{{item.skuValue}}</td>\n              <td>{{item.stockNum}}</td>\n              <td>{{item.price}}</td>\n              <td>\n                <a class=\"link\" @click=\"removeSku(index)\">删除</a>\n              </td>\n            </tr>\n          </tbody>\n        </table>\n      </div>\n      <div class=\"form-wrap\">\n        <div class=\"form-name\">货币:</div>\n        <select class=\"form-control\" v-model=\"detailData.currency\" :class=\"{'unset-select':!detailData.currency}\">\n          <option :value=\"0\">请选择</option>\n          <option v-for=\"item in currencyList\" :key=\"item.code\" :value=\"item.code\">{{item.mixName}}</option>\n        </select>\n      </div>\n      <div class=\"form-wrap\">\n        <div class=\"form-name\">团购价:</div>\n        <ApiInput v-model=\"detailData.groupPrice\"/>\n      </div>\n      <div class=\"form-wrap\">\n        <div class=\"form-name\">团购库存:</div>\n        <ApiInput v-model=\"detailData.stockNum\"/>\n      </div>\n      <div class=\"form-wrap\">\n        <div class=\"form-name\">是否限购:</div>\n        <el-radio name=\"disabled\" v-model=\"detailData.limit\" :label=\"1\">是</el-radio>\n        <el-radio name=\"disabled\" v-model=\"detailData.limit\" :label=\"0\">否</el-radio>\n      </div>\n      <div class=\"form-wrap\" v-show=\"detailData.limit\">\n        <div class=\"form-name\">限购数量:</div>\n        <ApiInput v-model=\"detailData.limitNum\"/>\n      </div>\n      <div class=\"btn-main\" @click=\"save()\">保存</div>\n    </div>\n    <selectActGoods v-if=\"showGoodsModal\" :type=\"'group'\" v-on:dialogGoods=\"dialogGoods\" v-on:dialogGoodsCancel=\"dialogGoodsCancel\"></selectActGoods>\n  </div>\n</template>\n\n<script>\nimport selectActGoods from '@/components/selectActGoods/index.vue';\nexport default {\n  components: { selectActGoods },\n  data() {\n    return {\n      showGoodsModal: false,\n      itemData:{\n        itemName: '',\n        mainImg: '',\n        channelName: '',\n        items: []\n      },\n      currencyList:[],\n      detailData: {\n        name:'',\n        startTime:'',\n        endTime:'',\n        banner:'',\n        itemId:'',\n        skuIds:[],\n        channelType:'',\n        groupPrice:'',\n        stockNum:'',\n        limit:0,\n        limitNum:'',\n        currency:0,\n        disableCoupons:0\n      }\n    }\n  },\n  created() {\n    let id = this.$route.params.id;\n    this.getCurrency();\n    if(id){\n      this.api.groupBuy.get({id:id}).then((res) => {\n        this.detailData.name =  this.extend(this.detailData ,res.data);\n        this.itemData = {\n          itemName: res.data.itemName,\n          mainImg: res.data.itemImage,\n          channelName: res.data.channelName,\n          items: []\n        }\n        res.data.skuInfoList.forEach(sku => {\n          this.itemData.items.push({\n            skuId: sku.skuId,\n            skuValue: sku.skuValue,\n            stockNum: sku.stock,\n            price: sku.price || sku.originalPrice\n          });\n        });\n      });\n    }\n  },\n  methods: {\n    getCurrency() {\n      this.api.common.currency({}).then((res) => {\n        this.currencyList = res.data;\n        this.currencyList.forEach(item => {\n          item.mixName = item.symbol + ' ' + item.name;\n        });\n      });\n    },\n    dialogGoods(res) {\n      console.log('1111111')\n      this.itemData = {\n        itemName: '',\n        mainImg: '',\n        channelName: '',\n        items: []\n      };\n      console.log(res.goodsList)\n      res.goodsList.forEach(item => {\n        this.detailData.itemId = item.itemId;\n        this.detailData.skuIds = [];\n        this.detailData.channelType = item.selectedChannel;\n        this.itemData.mainImg = item.mainImg;\n        this.itemData.itemName = item.itemName;\n        this.itemData.channelName = item.selectedChannelName;\n        item.selectedSku.forEach(sku => {\n          this.itemData.items.push({\n            skuId: sku.skuId,\n            skuValue: sku.skuValue,\n            stockNum: sku.stockNum,\n            price: sku.price\n          });\n        });\n      });\n      this.showGoodsModal = false;\n    },\n    dialogGoodsCancel() {\n      this.showGoodsModal = false;\n    },\n    uploadSuccess(res) {\n      this.detailData.banner = res.data;\n    },\n    removeSku(index) {\n      this.itemData.items.splice(index, 1);\n    },\n    save(){\n      let params = this.copy(this.detailData);\n      if(!params.itemId) {\n        this.$message.info({message: '请选择商品', showClose: true});\n        return\n      }\n      if(!params.limit) {\n        delete params.limitNum;\n      }\n      this.itemData.items.forEach(sku => {\n        params.skuIds.push(sku.skuId);\n      });\n      params.skuIds = params.skuIds.join(',');\n      let api = 'add';\n      if(this.$route.params.id){\n        params.id = this.$route.params.id;\n        api = 'update';\n      }\n      this.api.groupBuy[api](params).then(res => {\n        this.$message.success({message: res.message, showClose: true});\n        this.$router.push({ name: '团购' });\n      });\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\">\n  .buy-limit-detail{\n    .big-title{\n      color: #333333;\n      font-size: 14px;\n      font-weight: bold;\n      padding-bottom: 10px;\n    }\n    .wrap{\n      background: #fff;\n      padding: 10px 20px;\n      box-shadow: 0 2px 3px #E5E5E5;\n      border-radius: 4px;\n      .form-wrap{\n        margin-bottom: 15px;\n        .banner{\n          display: inline-block;\n          vertical-align: top;\n          img{\n            max-width: 200px;\n            max-height: 200px;\n          }\n        }\n        .form-name{\n          vertical-align: top;\n          line-height: 30px;\n          width: 80px;\n        }\n        .form-control{\n          width: 160px;\n        }\n        .timepicker-control{\n          width: 160px;\n          margin-right: 15px;\n        }\n        .select-goods{\n          display: inline-block;\n          vertical-align: top;\n          width: 110px;\n          height: 30px;\n          border: 1px dashed #F06941;\n          color: #F06941;\n          text-align: center;\n          line-height: 30px;\n          margin-right: 10px;\n          border-radius: 15px;\n          cursor: pointer;\n        }\n        .el-radio{\n          line-height: 30px;\n        }\n        &:last-child{\n          margin-bottom: 0;\n        }\n      }\n      .goods-list{\n        margin-bottom: 15px;\n        table {\n          width: 1000px;\n          border-collapse: collapse;\n          border-spacing: 0;\n          border-radius: 4px;\n          overflow: hidden;\n          box-shadow: 0 0 0 1px $border-color;\n          .w300{\n            width: 300px;\n          }\n          .w150{\n            width: 150px;\n          }\n          .w100{\n            width: 100px;\n          }\n          thead {\n            background: #EBEFFC;\n          }\n          .item-name{\n            img{\n              display: inline-block;\n              vertical-align: middle;\n              max-width: 54px;\n              max-height: 54px;\n            }\n            span{\n              display: inline-block;\n              vertical-align: middle;\n              width: 210px;\n              white-space: normal;\n              word-break: break-all;\n              padding-left: 10px;\n              line-height: 18px;\n            }\n          }\n          tr {\n            th{\n              white-space: nowrap;\n            }\n            th, td {\n              padding: 10px;\n              text-align: left;\n              line-height: 20px;\n              vertical-align: middle;\n              .link{\n                margin-right: 10px;\n              }\n            }\n          }\n        }\n      }\n    }\n    .el-dialog__body{\n      padding: 0;\n    }\n  }\n</style>","import mod from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./detail.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./detail.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./detail.vue?vue&type=template&id=04412615&\"\nimport script from \"./detail.vue?vue&type=script&lang=js&\"\nexport * from \"./detail.vue?vue&type=script&lang=js&\"\nimport style0 from \"./detail.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./detail.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./detail.vue?vue&type=style&index=0&lang=scss&\""],"sourceRoot":""}