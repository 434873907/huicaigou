(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-64bf1586"],{"0351":function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"select-shop"},[a("el-dialog",{attrs:{title:"店铺选择:",visible:t.shopShow,width:"815px","before-close":t.cancelShop},on:{"update:visible":function(e){t.shopShow=e}}},[a("div",{staticClass:"dialog-form border-bottom"},[a("div",{staticClass:"search-item"},[a("span",{staticClass:"title"},[t._v("店铺名称：")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.shopName,expression:"shopName"}],staticClass:"form-control",attrs:{type:"text",placeholder:"请输入店铺名称"},domProps:{value:t.shopName},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.getShop(e)},input:function(e){e.target.composing||(t.shopName=e.target.value)}}})])]),a("div",{staticClass:"dialog-form"},[a("div",{staticClass:"search-item selected－shop"},[a("span",{staticClass:"title"},[t._v("已选店铺：")]),t._l(t.selectedShopList,function(e,s){return a("span",{key:s+"selected",staticClass:"selected-item"},[t._v("\n            "+t._s(e.name)+"\n            "),a("a",{attrs:{href:"javascript:;"},on:{click:function(e){return t.removeSelect(s)}}},[t._v("X")])])})],2),a("div",{staticClass:"search-item selected-box"},t._l(t.searchShopList,function(e,s){return a("span",{key:s+"shop",staticClass:"shop-item"},[a("a",{staticClass:"link",on:{click:function(a){return t.selectItem(e)}}},[t._v(t._s(e.name))])])}),0)]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("button",{staticClass:"btn-main",on:{click:function(e){return t.exportShop()}}},[t._v("确定")]),a("button",{staticClass:"btn-fill-grey-main",on:{click:function(e){return t.cancelShop()}}},[t._v("取消")])])])],1)},i=[],c=(a("ac6a"),{name:"selectShop",props:{multiply:{default:!0}},data:function(){return{shopShow:!0,searchShopList:[],selectedShopList:[],shopName:""}},created:function(){this.init()},methods:{showDialog:function(){this.shopShow=!0},init:function(){this.getShop()},getShop:function(){var t=this;this.api.store.allShop({name:this.shopName}).then(function(e){t.searchShopList=e.data})},selectItem:function(t){if(this.multiply)if(this.selectedShopList.length>0){var e=!1;this.selectedShopList.forEach(function(a){a.id===t.id&&(e=!0)}),e||this.selectedShopList.push(t)}else this.selectedShopList.push(t);else this.selectedShopList=[],this.selectedShopList.push(t)},removeSelect:function(t){this.selectedShopList.splice(t,1)},exportShop:function(){0!=this.selectedShopList.length?this.$emit("dialogShop",{shopList:this.selectedShopList}):this.$message.info({message:"请选择店铺",showClose:!0})},cancelShop:function(){this.shopShow=!0,this.$emit("dialogShopCancel")}}}),n=c,o=(a("f8c5"),a("2877")),r=Object(o["a"])(n,s,i,!1,null,"28854089",null);e["a"]=r.exports},"456a":function(t,e,a){},7715:function(t,e,a){},8799:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABcAAAAXCAYAAADgKtSgAAAAAXNSR0IArs4c6QAAAMBJREFUSA1jZCASzJo1q+3///9xjIyMR9PS0sKJ0cZEjCKoGkEgLQ3EIsTqIcVwYs2Eqxs1HB4UyIzRYEEODTibpsHCCMx5U4FW6cOtw8EA5k5loJQEEH8E5tIrOJQhCz9lAfJ0gRqtkUUJsPmJVH8PZPhqID5LwECQtDMQ6wLxYyBeC8R4AdB3bxnxqkCSBAbfdKCLM4Ca9gELLpBFBAFNI3TUcKzhPxos9A8WUA4lCgAz0HVgBtoDpM8TpQGoCACeKy06aSivrgAAAABJRU5ErkJggg=="},"8e87":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"promotion-detail"},[a("div",{staticClass:"operateBox"},[a("h2",{staticClass:"big-title"},[t._v("操作")]),a("div",{staticClass:"save-inner"},[a("a",{staticClass:"btn-main",attrs:{href:"javascript:;"},on:{click:function(e){return t.saveActivity()}}},[t._v("保存")]),a("router-link",{staticClass:"btn-fill-main",attrs:{to:{name:"平台促销"}}},[t._v("返回")])],1)]),a("h2",{staticClass:"big-title"},[t._v("基本信息")]),a("div",{staticClass:"wrap info-wrap"},[a("div",{staticClass:"info-wrap-item"},[a("div",{staticClass:"form-wrap"},[a("div",{staticClass:"form-name"},[t._v("活动名称")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.activityParams.actName,expression:"activityParams.actName"}],staticClass:"form-control long-input",attrs:{placeholder:"请输入活动名称"},domProps:{value:t.activityParams.actName},on:{input:[function(e){e.target.composing||t.$set(t.activityParams,"actName",e.target.value)},t.inputChange]}})]),a("div",{staticClass:"form-wrap"},[a("div",{staticClass:"form-name"},[t._v("活动时间")]),a("el-date-picker",{staticClass:"timepicker-control",attrs:{type:"datetime","value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"请选择开始时间"},model:{value:t.activityParams.startTime,callback:function(e){t.$set(t.activityParams,"startTime",e)},expression:"activityParams.startTime"}}),a("el-date-picker",{staticClass:"timepicker-control",attrs:{type:"datetime","value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"请选择结束时间"},model:{value:t.activityParams.endTime,callback:function(e){t.$set(t.activityParams,"endTime",e)},expression:"activityParams.endTime"}})],1),a("div",{staticClass:"form-wrap"},[a("div",{staticClass:"form-name"},[t._v("海报图片")]),a("upload",{attrs:{uploadType:"2"},on:{uploadSuccess:t.uploadPCSuccess}},[a("a",{staticClass:"poster-img"},[t._v("PC配图 +")])]),a("upload",{attrs:{uploadType:"2"},on:{uploadSuccess:t.uploadAppSuccess}},[a("a",{staticClass:"poster-img"},[t._v("App配图 +")])])],1)]),a("div",{staticClass:"info-wrap-item info-editor-right"},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.activityParams.bannerImage.bannerImageUrlForPC,expression:"activityParams.bannerImage.bannerImageUrlForPC"}],staticClass:"form-wrap pc-item"},[a("div",{staticClass:"form-name"},[t._v("PC配图")]),a("img",{attrs:{src:t.activityParams.bannerImage.bannerImageUrlForPC}})]),a("div",{directives:[{name:"show",rawName:"v-show",value:t.activityParams.bannerImage.bannerImageUrlForAPP,expression:"activityParams.bannerImage.bannerImageUrlForAPP"}],staticClass:"form-wrap pc-item"},[a("div",{staticClass:"form-name"},[t._v("App配图")]),a("img",{attrs:{src:t.activityParams.bannerImage.bannerImageUrlForAPP}})])]),a("div",{staticClass:"info-editor-item"},[a("div",{staticClass:"form-wrap"},[a("div",{staticClass:"form-name"},[t._v("活动介绍")]),a("div",{staticClass:"editor-wrap"},[a("editor",{model:{value:t.activityParams.summary,callback:function(e){t.$set(t.activityParams,"summary",e)},expression:"activityParams.summary"}})],1)])]),a("div",{staticClass:"info-wrap-rule"},[a("h4",[t._v("活动规则")]),a("div",{staticClass:"form-wrap"},[a("div",{staticClass:"form-name"},[t._v("活动类型")]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.activityParams.actType,expression:"activityParams.actType"}],staticClass:"form-control long-input",class:{"unset-select":!t.activityParams.actType},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.$set(t.activityParams,"actType",e.target.multiple?a:a[0])}}},[a("option",{attrs:{value:""}},[t._v("请选择活动类型")]),t._l(t.typeList,function(e){return a("option",{key:e.code,domProps:{value:e.code}},[t._v(t._s(e.remark))])})],2)]),a("div",{directives:[{name:"show",rawName:"v-show",value:3!==t.activityParams.actType,expression:"activityParams.actType!==3"}],staticClass:"form-wrap"},[a("div",{staticClass:"form-name"},[t._v("货币")]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.actCurrency,expression:"actCurrency"}],staticClass:"form-control long-input",class:{"unset-select":!t.actCurrency},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.actCurrency=e.target.multiple?a:a[0]}}},[a("option",{attrs:{value:""}},[t._v("请选择")]),t._l(t.currencyList,function(e){return a("option",{key:e.code,domProps:{value:e.code}},[t._v(t._s(e.mixName))])})],2)]),a("div",{directives:[{name:"show",rawName:"v-show",value:2===t.activityParams.actType,expression:"activityParams.actType===2"}],staticClass:"type-content"},[a("div",{staticClass:"form-wrap"},[a("div",{staticClass:"form-name"},[t._v("满减规则")]),a("div",{staticClass:"rule-content"},t._l(t.limitRules,function(e,s){return a("div",{key:s+"limitPrice",staticClass:"rule-row"},[a("span",{staticClass:"text"},[t._v("满")]),a("ApiInput",{attrs:{placeholder:"请填写金额"},model:{value:e.limitPrice,callback:function(a){t.$set(e,"limitPrice",a)},expression:"item.limitPrice"}}),a("span",{staticClass:"text"},[t._v(t._s(t.currencyName)+"减")]),a("ApiInput",{attrs:{placeholder:"请填写金额"},model:{value:e.reductionPrice,callback:function(a){t.$set(e,"reductionPrice",a)},expression:"item.reductionPrice"}}),a("span",{staticClass:"text"},[t._v(t._s(t.currencyName))]),a("a",{staticClass:"add-btn",on:{click:function(e){return t.addLimitPrice()}}},[t._v("添加")]),a("a",{directives:[{name:"show",rawName:"v-show",value:s>0,expression:"index > 0"}],staticClass:"add-btn",on:{click:function(e){return t.delLimitPrice(s)}}},[t._v("删除")])],1)}),0)])]),a("div",{directives:[{name:"show",rawName:"v-show",value:4===t.activityParams.actType,expression:"activityParams.actType===4"}],staticClass:"type-content"},[a("div",{staticClass:"form-wrap"},[a("div",{staticClass:"form-name"},[t._v("满赠设置")]),a("div",{staticClass:"rule-content"},[a("el-radio",{attrs:{name:"give",label:1},model:{value:t.ladderParams.type,callback:function(e){t.$set(t.ladderParams,"type",e)},expression:"ladderParams.type"}},[t._v("阶梯满赠")]),a("el-radio",{attrs:{name:"give",label:2},model:{value:t.ladderParams.type,callback:function(e){t.$set(t.ladderParams,"type",e)},expression:"ladderParams.type"}},[t._v("高价满赠")])],1)]),t._l(t.ladderParams.fullGiftLimitList,function(e,s){return a("div",{key:s+"ladder"},[a("div",{staticClass:"form-wrap"},[a("div",{staticClass:"form-name"},[t._v(t._s(s+1)+"级优惠")]),a("div",{staticClass:"rule-content"},[a("span",{staticClass:"text"},[t._v("满")]),a("ApiInput",{attrs:{placeholder:"请填写金额"},model:{value:e.limitPrice,callback:function(a){t.$set(e,"limitPrice",a)},expression:"item.limitPrice"}}),a("span",{staticClass:"text"},[t._v(t._s(t.currencyName)+"赠送")]),a("a",{staticClass:"select-ladder",on:{click:function(e){return t.selectLadder(s)}}},[t._v("选择赠品")]),a("a",{directives:[{name:"show",rawName:"v-show",value:s,expression:"index"}],staticClass:"select-ladder",on:{click:function(e){return t.deleteByIndex(s)}}},[t._v("删除")])],1)]),a("div",{directives:[{name:"show",rawName:"v-show",value:e.giftInfoList.length>0,expression:"item.giftInfoList.length>0"}],staticClass:"form-wrap add-ladder"},[a("div",{staticClass:"form-name"},[t._v("赠品信息")]),a("div",{staticClass:"rule-content"},[a("div",{staticClass:"spec-list"},[a("table",{staticClass:"table"},[t._m(0,!0),a("tbody",t._l(e.giftInfoList,function(s,i){return a("tr",{key:i+"sku"},[a("td",[a("img",{attrs:{src:s.mainImg}}),a("p",{staticClass:"sname"},[t._v(t._s(s.itemName))])]),a("td",[t._v(t._s(s.skuValue))]),a("td",[t._v(t._s(s.stockNum))]),a("td",[a("a",{staticClass:"link",on:{click:function(a){return t.removeLadderGoods(e,i)}}},[t._v("删除")])])])}),0)])])])])])}),a("div",{staticClass:"form-wrap"},[a("a",{staticClass:"btn-fill-org-main",on:{click:t.addLadder}},[t._v("添加"+t._s(t.ladderParams.fullGiftLimitList.length+1)+"级优惠")])])],2),a("div",{directives:[{name:"show",rawName:"v-show",value:3===t.activityParams.actType,expression:"activityParams.actType===3"}],staticClass:"type-content"},[a("div",{staticClass:"form-wrap"},[a("div",{staticClass:"form-name"},[t._v("活动规则")]),a("div",{staticClass:"rule-content"},[a("ApiInput",{staticClass:"discount",attrs:{placeholder:"请填写0-1,0.1表示1折,1表示不打折"},model:{value:t.actDiscount,callback:function(e){t.actDiscount=e},expression:"actDiscount"}})],1)])]),a("div",{directives:[{name:"show",rawName:"v-show",value:5===t.activityParams.actType,expression:"activityParams.actType===5"}],staticClass:"type-content"},[a("div",{staticClass:"form-wrap"},[a("div",{staticClass:"form-name"},[t._v("打包价")]),a("div",{staticClass:"rule-content"},t._l(t.packingPriceList,function(e,s){return a("div",{key:s+"packingPriceList",staticClass:"rule-row"},[a("span",{staticClass:"text"},[t._v("满")]),a("ApiInput",{attrs:{placeholder:"请填写件数"},model:{value:e.itemNum,callback:function(a){t.$set(e,"itemNum",a)},expression:"item.itemNum"}}),a("span",{staticClass:"text"},[t._v("件,打包价")]),a("ApiInput",{attrs:{placeholder:"请填写金额"},model:{value:e.price,callback:function(a){t.$set(e,"price",a)},expression:"item.price"}}),a("span",{staticClass:"text"},[t._v(t._s(t.currencyName))]),a("a",{staticClass:"add-btn",on:{click:function(e){return t.addPackingPrice()}}},[t._v("添加")]),a("a",{directives:[{name:"show",rawName:"v-show",value:s>0,expression:"index > 0"}],staticClass:"add-btn",on:{click:function(e){return t.delPackingPrice(s)}}},[t._v("删除")])],1)}),0)])])])]),a("h2",{staticClass:"big-title"},[t._v("活动商品")]),a("div",{staticClass:"tab-bar"},[a("div",{staticClass:"tab-item",class:{active:1===t.currentTab},on:{click:function(e){return t.changeTab(1)}}},[t._v("选择商品")]),a("div",{directives:[{name:"show",rawName:"v-show",value:1===t.activityParams.actType,expression:"activityParams.actType===1"}],staticClass:"tab-item",class:{active:2===t.currentTab},on:{click:function(e){return t.changeTab(2)}}},[t._v("设置活动价")])]),a("div",{directives:[{name:"show",rawName:"v-show",value:1===t.currentTab,expression:"currentTab===1"}],staticClass:"wrap act-wrap"},[a("div",{staticClass:"list-wrap"},[a("div",{directives:[{name:"show",rawName:"v-show",value:1===t.selectTab,expression:"selectTab===1"}],staticClass:"search-bar"},[a("a",{staticClass:"btn-fill-org-main",on:{click:function(e){t.showBrandModal=!0}}},[t._v("品牌选择")]),t._l(t.selectBrand,function(e,s){return a("span",{key:s+"brand",staticClass:"btn-org-small"},[t._v("\n          "+t._s(e.name)+"\n          "),a("a",{attrs:{href:"javascript:;"},on:{click:function(e){return t.removeSearchBrand(s)}}},[t._v("X")])])}),a("a",{staticClass:"btn-fill-main",on:{click:function(e){t.showCategoryModal=!0}}},[t._v("类目选择")]),a("span",{directives:[{name:"show",rawName:"v-show",value:t.selectCate.id,expression:"selectCate.id"}],staticClass:"btn-small"},[t._v("\n          "+t._s(t.selectCate.name)+"\n          "),a("a",{attrs:{href:"javascript:;"},on:{click:function(e){return t.removeSearchCate()}}},[t._v("X")])]),a("a",{staticClass:"btn-fill-main btn-fill-main-shop",on:{click:function(e){t.showShopModal=!0}}},[t._v("店铺选择")]),t._l(t.selectShop,function(e,s){return a("span",{key:s+"shop",staticClass:"btn-small btn-small-shop"},[t._v("\n          "+t._s(e.name)+"\n          "),a("a",{attrs:{href:"javascript:;"},on:{click:function(e){return t.removeSearchShop(s)}}},[t._v("X")])])}),a("select",{directives:[{name:"model",rawName:"v-model",value:t.goodsParams.itemChannelTypes,expression:"goodsParams.itemChannelTypes"},{name:"show",rawName:"v-show",value:!t.userConfig.singleChannel,expression:"!userConfig.singleChannel"}],staticClass:"form-control",class:{"unset-select":!t.goodsParams.itemChannelTypes},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.$set(t.goodsParams,"itemChannelTypes",e.target.multiple?a:a[0])}}},[a("option",{attrs:{value:""}},[t._v("渠道选择")]),t._l(t.channelList,function(e){return a("option",{key:e.channelType,domProps:{value:e.channelType}},[t._v(t._s(e.channelTypeName))])})],2),a("input",{directives:[{name:"model",rawName:"v-model",value:t.goodsParams.keyword,expression:"goodsParams.keyword"}],staticClass:"form-control",attrs:{type:"text",placeholder:"商品名称"},domProps:{value:t.goodsParams.keyword},on:{input:function(e){e.target.composing||t.$set(t.goodsParams,"keyword",e.target.value)}}}),a("a",{staticClass:"btn-fill-main",on:{click:function(e){return t.getGoodsList()}}},[t._v("搜索")]),a("a",{staticClass:"btn-fill-grey-main",on:{click:function(e){return t.clearSearch()}}},[t._v("清空")])],2),a("div",{staticClass:"search-bar select-bar"},[a("div",{directives:[{name:"show",rawName:"v-show",value:1===t.selectTab,expression:"selectTab===1"}],staticClass:"right"},[a("span",{staticClass:"text"},[t._v("批量操作：")]),a("a",{staticClass:"btn-fill-org-main",on:{click:function(e){return t.batchSelect()}}},[t._v("批量加入")]),a("a",{staticClass:"btn-fill-org-main",on:{click:function(e){return t.pageSelect()}}},[t._v("本页加入")])]),a("div",{staticClass:"select-tab",class:{active:1===t.selectTab},on:{click:function(e){return t.changeSelectTab(1)}}},[t._v("商品列表")]),a("div",{staticClass:"select-tab",class:{active:2===t.selectTab},on:{click:function(e){return t.changeSelectTab(2)}}},[t._v("已选择")]),a("div",{staticClass:"select-tab",class:{active:3===t.selectTab},on:{click:function(e){return t.changeSelectTab(3)}}},[t._v("已置顶")])]),a("div",{directives:[{name:"show",rawName:"v-show",value:1===t.selectTab,expression:"selectTab===1"}],staticClass:"select-inner"},[a("table",{staticClass:"table"},[a("thead",[a("tr",[a("th",{staticClass:"dot",class:{active:t.checkAll},on:{click:function(e){return t.selectAll()}}}),a("th",{staticClass:"table-w100"},[t._v("商品图片")]),a("th",{staticClass:"table-w200"},[t._v("商品名称")]),a("th",{staticClass:"table-w100"},[t._v("价格")]),a("th",[t._v("操作")])])]),a("tbody",t._l(t.goodsList,function(e){return a("tr",{key:e.id,class:{selected:e.isSelected}},[a("td",{staticClass:"dot",class:{active:e.checked},on:{click:function(a){return t.selectCheckItem(e)}}}),a("td",[a("el-popover",{staticClass:"imgBoxCont",attrs:{placement:"top",width:"200",trigger:"hover"}},[a("img",{staticStyle:{width:"100%",height:"100%"},attrs:{src:e.mainImageUrl}}),a("img",{staticClass:"imgBox",attrs:{slot:"reference",src:e.mainImageUrl},slot:"reference"})])],1),a("td",[a("el-popover",{attrs:{placement:"top",width:"260",trigger:"hover"}},[a("span",[t._v(t._s(e.name))]),a("span",{staticClass:"ellipsis",attrs:{slot:"reference"},slot:"reference"},[t._v(t._s(e.name))])])],1),a("td",{staticClass:"price"},[t._v(t._s(e.price))]),a("td",[a("a",{directives:[{name:"show",rawName:"v-show",value:!e.isSelected,expression:"!item.isSelected"}],staticClass:"link",on:{click:function(a){return t.selectItem(e)}}},[t._v("选取")]),a("span",{directives:[{name:"show",rawName:"v-show",value:e.isSelected,expression:"item.isSelected"}],staticClass:"hasSelected"},[t._v("已选取")])])])}),0)]),a("pagination",{directives:[{name:"show",rawName:"v-show",value:t.total>0,expression:"total>0"}],attrs:{total:t.total,page:t.goodsParams.page,limit:t.goodsParams.limit},on:{"update:page":function(e){return t.$set(t.goodsParams,"page",e)},"update:limit":function(e){return t.$set(t.goodsParams,"limit",e)},pagination:function(e){return t.getGoodsList()}}})],1),a("div",{directives:[{name:"show",rawName:"v-show",value:2===t.selectTab,expression:"selectTab===2"}],staticClass:"select-inner"},[a("table",{staticClass:"table"},[t._m(1),a("tbody",t._l(t.selected,function(e,s){return a("tr",{key:e.id,class:{selected:e.isToped}},[a("td",[a("el-popover",{staticClass:"imgBoxCont",attrs:{placement:"top",width:"200",trigger:"hover"}},[a("img",{staticStyle:{width:"100%",height:"100%"},attrs:{src:e.mainImageUrl}}),a("img",{staticClass:"imgBox",attrs:{slot:"reference",src:e.mainImageUrl},slot:"reference"})])],1),a("td",[a("el-popover",{attrs:{placement:"top",width:"260",trigger:"hover"}},[a("span",[t._v(t._s(e.name))]),a("span",{staticClass:"ellipsis",attrs:{slot:"reference"},slot:"reference"},[t._v(t._s(e.name))])])],1),a("td",{staticClass:"price"},[t._v(t._s(e.price))]),a("td",[a("a",{staticClass:"link",on:{click:function(a){return t.cancelItem(e,s)}}},[t._v("取消")]),a("a",{directives:[{name:"show",rawName:"v-show",value:!e.isToped,expression:"!item.isToped"}],staticClass:"link",on:{click:function(a){return t.setTop(e)}}},[t._v("置顶")]),a("span",{directives:[{name:"show",rawName:"v-show",value:e.isToped,expression:"item.isToped"}],staticClass:"hasSelected"},[t._v("已置顶")])])])}),0)])]),a("div",{directives:[{name:"show",rawName:"v-show",value:3===t.selectTab,expression:"selectTab===3"}],staticClass:"select-inner"},[a("table",{staticClass:"table"},[t._m(2),a("tbody",t._l(t.toped,function(e,s){return a("tr",{key:e.id},[a("td",{staticClass:"dot"}),a("td",[a("el-popover",{staticClass:"imgBoxCont",attrs:{placement:"top",width:"200",trigger:"hover"}},[a("img",{staticStyle:{width:"100%",height:"100%"},attrs:{src:e.mainImageUrl}}),a("img",{staticClass:"imgBox",attrs:{slot:"reference",src:e.mainImageUrl},slot:"reference"})])],1),a("td",[a("el-popover",{attrs:{placement:"top",width:"260",trigger:"hover"}},[a("span",[t._v(t._s(e.name))]),a("span",{staticClass:"ellipsis",attrs:{slot:"reference"},slot:"reference"},[t._v(t._s(e.name))])])],1),a("td",{staticClass:"price"},[t._v(t._s(e.price))]),a("td",[a("a",{staticClass:"link",on:{click:function(e){return t.unsetTop(s)}}},[t._v("取消置顶")])])])}),0)])])])]),a("div",{directives:[{name:"show",rawName:"v-show",value:2===t.currentTab,expression:"currentTab===2"}],staticClass:"wrap set-wrap"},[a("div",{staticClass:"search-bar"},[a("el-radio",{attrs:{label:1},model:{value:t.setStatus,callback:function(e){t.setStatus=e},expression:"setStatus"}},[a("span",{staticClass:"text"},[t._v("全部减价")]),a("ApiInput",{model:{value:t.activityParams.actStrategy.allPriceReduction,callback:function(e){t.$set(t.activityParams.actStrategy,"allPriceReduction",e)},expression:"activityParams.actStrategy.allPriceReduction"}}),a("span",{staticClass:"text"},[t._v(t._s(t.currencyName))])],1),a("el-radio",{staticClass:"one-price",attrs:{label:2},model:{value:t.setStatus,callback:function(e){t.setStatus=e},expression:"setStatus"}},[a("span",{staticClass:"text"},[t._v("全场一口价")]),a("ApiInput",{model:{value:t.activityParams.actStrategy.allOnePrice,callback:function(e){t.$set(t.activityParams.actStrategy,"allOnePrice",e)},expression:"activityParams.actStrategy.allOnePrice"}}),a("span",{staticClass:"text"},[t._v(t._s(t.currencyName))])],1)],1),a("table",{staticClass:"table"},[t._m(3),a("tbody",t._l(t.activityParams.actStrategy.itemPriceReductionInfoList,function(e,s){return a("tr",{key:e.id},[a("td",[a("el-popover",{staticClass:"imgBoxCont",attrs:{placement:"top",width:"200",trigger:"hover"}},[a("img",{staticStyle:{width:"100%",height:"100%"},attrs:{src:e.mainImageUrl}}),a("img",{staticClass:"imgBox",attrs:{slot:"reference",src:e.mainImageUrl},slot:"reference"})])],1),a("td",[a("el-popover",{attrs:{placement:"top",width:"260",trigger:"hover"}},[a("span",[t._v(t._s(e.name))]),a("span",{staticClass:"ellipsis",attrs:{slot:"reference"},slot:"reference"},[t._v(t._s(e.name))])])],1),a("td",{staticClass:"price"},[t._v(t._s(e.price))]),a("td",[a("el-input",{attrs:{placeholder:t.activityParams.actStrategy.allPriceReduction,type:"number",size:"mini",disabled:1!==t.setStatus},model:{value:e.priceReduction,callback:function(a){t.$set(e,"priceReduction",a)},expression:"item.priceReduction"}},[a("template",{slot:"prepend"},[t._v("减价")])],2)],1),a("td",[a("el-input",{attrs:{placeholder:t.activityParams.actStrategy.allOnePrice,type:"number",size:"mini",disabled:2!==t.setStatus},model:{value:e.onePrice,callback:function(a){t.$set(e,"onePrice",a)},expression:"item.onePrice"}},[a("template",{slot:"prepend"},[t._v("一口价")])],2)],1),a("td",[a("a",{staticClass:"link",on:{click:function(a){return t.cancelSetItem(e,s)}}},[t._v("取消选取")])])])}),0)])]),t.showShopModal?a("SelectShop",{on:{dialogShop:t.dialogShop,dialogShopCancel:t.dialogShopCancel}}):t._e(),t.showBrandModal?a("SelectBrand",{on:{dialogBrand:t.dialogBrand,dialogBrandCancel:t.dialogBrandCancel}}):t._e(),t.showCategoryModal?a("SelectCategory",{attrs:{multiply:!1},on:{dialogCategory:t.dialogCategory,dialogCategoryCancel:t.dialogCategoryCancel}}):t._e(),t.showGoodsModal?a("selectActGoods",{attrs:{gift:1},on:{dialogGoods:t.dialogGoods,dialogGoodsCancel:t.dialogGoodsCancel}}):t._e(),a("div",{staticClass:"save-box"},[a("h2",{staticClass:"title"},[t._v("操作")]),a("div",{staticClass:"save-inner"},[a("a",{staticClass:"btn-main",attrs:{href:"javascript:;"},on:{click:function(e){return t.saveActivity()}}},[t._v("保存")]),a("router-link",{staticClass:"btn-fill-main",attrs:{to:{name:"平台促销"}}},[t._v("返回")])],1)])],1)},i=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",{staticClass:"w300"},[t._v("赠品名称")]),a("th",{staticClass:"w200"},[t._v("赠品规格")]),a("th",{staticClass:"w100"},[t._v("库存")]),a("th",[t._v("操作")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",{staticClass:"table-w100"},[t._v("商品图片")]),a("th",{staticClass:"table-w200"},[t._v("商品名称")]),a("th",{staticClass:"table-w100"},[t._v("价格")]),a("th",[t._v("操作")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",{staticClass:"dot"}),a("th",{staticClass:"table-w100"},[t._v("商品图片")]),a("th",{staticClass:"table-w200"},[t._v("商品名称")]),a("th",{staticClass:"table-w100"},[t._v("价格")]),a("th",[t._v("操作")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",{staticClass:"table-w100"},[t._v("商品图片")]),a("th",{staticClass:"table-w200"},[t._v("商品名称")]),a("th",{staticClass:"table-w100"},[t._v("价格")]),a("th",{staticClass:"table-w200"},[t._v("活动策略")]),a("th",{staticClass:"table-w200"}),a("th",[t._v("操作")])])])}],c=(a("7f7f"),a("ac6a"),a("8d0f")),n=a("a4d1"),o=a("0351"),r=a("4d86"),l=a("f88c"),d=a("7994"),m={data:function(){return{currentTab:1,checkAll:!1,showBrandModal:!1,showCategoryModal:!1,showShopModal:!1,showGoodsModal:!1,selectBrand:[],selectShop:[],selectCate:{},typeList:[],currencyList:[],channelList:[],goodsList:[],detailPriceReductionInfo:{},goodsParams:{page:1,limit:10,statusList:1,itemChannelTypes:"",keywordType:2,keyword:""},total:0,selected:[],toped:[],selectTab:1,selectGoodsList:[],topGoodsList:[],setStatus:0,actCurrency:"",currencyName:"",limitRules:[{limitPrice:"",reductionPrice:""}],packingPriceList:[{itemNum:"",price:""}],actDiscount:"",ladderParams:{type:1,fullGiftLimitList:[{limitPrice:"",giftInfoList:[]}]},selectLadderIndex:0,activityParams:{actName:"",actType:"",startTime:"",endTime:"",summary:"",bannerImage:{bannerImageUrlForPC:"",bannerImageUrlForAPP:""},actStrategy:{allPriceReduction:"",allOnePrice:"",itemPriceReductionInfoList:[]}}}},created:function(){this.id=this.$route.params.id||"",this.getType(),this.getCurrency(),this.getChannel(),this.getGoodsList(),this.id&&this.getDetail(this.id)},methods:{inputChange:function(){this.activityParams.actName.length>25&&(this.$message.warning({message:"商品名字不能超过25字",showClose:!0}),this.activityParams.actName=this.activityParams.actName.substring(0,25))},deleteByIndex:function(t){this.ladderParams.fullGiftLimitList.splice(t,1)},getType:function(){var t=this;this.api.activity.typeList({}).then(function(e){t.typeList=e.data})},getCurrency:function(){var t=this;this.api.common.currency({}).then(function(e){t.currencyList=e.data,t.currencyList.forEach(function(t){t.mixName=t.symbol+" "+t.name}),t.actCurrency=t.actCurrency||t.currencyList[0].code||""})},getChannel:function(){var t=this;this.api.goods.channel({}).then(function(e){t.channelList=e.data})},getDetail:function(t){var e=this;this.api.activity.detail({id:t}).then(function(t){e.activityParams.actName=t.data.actName,e.activityParams.actType=t.data.actType,e.activityParams.shopId=t.data.shopId,e.activityParams.startTime=t.data.startTime,e.activityParams.endTime=t.data.endTime,e.activityParams.bannerImage.bannerImageUrlForPC=t.data.bannerImage.bannerImageUrlForPC,e.activityParams.bannerImage.bannerImageUrlForAPP=t.data.bannerImage.bannerImageUrlForAPP,e.activityParams.summary=t.data.summary,e.selected=t.data.actScope,e.selected.length>0&&e.selected.forEach(function(t){t.mainImageUrl=t.mainImg}),e.toped=t.data.headItemList,e.toped.length>0&&e.toped.forEach(function(t){t.mainImageUrl=t.mainImg}),1===t.data.actType&&(e.actCurrency=t.data.actStrategy.currency,t.data.actStrategy&&((t.data.actStrategy.allOnePrice||0===t.data.actStrategy.allOnePrice)&&(e.setStatus=2,e.activityParams.actStrategy.allOnePrice=t.data.actStrategy.allOnePrice,e.activityParams.actStrategy.allPriceReduction=""),(t.data.actStrategy.allPriceReduction||0===t.data.actStrategy.allPriceReduction)&&(e.setStatus=1,e.activityParams.actStrategy.allPriceReduction=t.data.actStrategy.allPriceReduction,e.activityParams.actStrategy.allOnePrice=""),t.data.actStrategy.itemPriceReductionInfoList.length>0&&(e.activityParams.actStrategy.itemPriceReductionInfoList=t.data.actStrategy.itemPriceReductionInfoList,e.detailPriceReductionInfo=t.data.actStrategy))),2===t.data.actType&&t.data.actStrategy&&(e.actCurrency=t.data.actStrategy.currency,e.limitRules=t.data.actStrategy.fullReductionLimitList),3===t.data.actType&&t.data.actStrategy&&(e.actDiscount=t.data.actStrategy.discount),4===t.data.actType&&(e.ladderParams=t.data.actStrategy,e.ladderParams.fullGiftLimitList.forEach(function(t){t.giftInfoList.forEach(function(t){t.mainImg=t.itemImg})})),5===t.data.actType&&t.data.actStrategy&&(e.actCurrency=t.data.actStrategy.currency,e.packingPriceList=t.data.actStrategy.packingPriceList),e.checkToped(),e.checkSelected()})},addLimitPrice:function(){this.limitRules.push({limitPrice:"",reductionPrice:""})},delLimitPrice:function(t){this.limitRules.splice(t,1)},addPackingPrice:function(){this.packingPriceList.push({itemNum:"",price:""})},delPackingPrice:function(t){this.packingPriceList.splice(t,1)},addLadder:function(){this.ladderParams.fullGiftLimitList.push({limitPrice:"",giftInfoList:[]})},getGoodsList:function(){var t=this,e=this.copy(this.goodsParams);if(this.selectBrand.length>0){var a="";this.selectBrand.forEach(function(t){a+=t.id+","}),a=a.substring(0,a.length-1),e.brandIds=a}if(this.selectShop.length>0){var s=[];this.selectShop.forEach(function(t){s.push(t.id)}),s=s.join(","),e.shopIds=s}this.selectCate.id&&(e.cateId=this.selectCate.id),console.log("params",e),this.api.goods.list(e).then(function(e){e.data.dataList.forEach(function(t){t.checked=!1}),t.goodsList=e.data.dataList,t.total=e.data.total,t.goodsList.forEach(function(t){t.isSelected=!1,t.isToped=!1})})},clearSearch:function(){this.goodsParams={page:1,limit:10,statusList:1,itemChannelTypes:"",keywordType:2,keyword:""},this.selectBrand=[],this.selectCate={},this.getGoodsList()},checkSelected:function(){if(this.selected.length>0){var t=[];this.selected.forEach(function(e){t.push(e.id)}),this.goodsList.forEach(function(e){-1!=t.indexOf(e.id)?e.isSelected=!0:e.isSelected=!1})}else this.goodsList.forEach(function(t){t.isSelected=!1})},checkToped:function(){if(this.toped.length>0){var t=[];this.toped.forEach(function(e){t.push(e.id)}),this.selected.forEach(function(e){-1!=t.indexOf(e.id)?e.isToped=!0:e.isToped=!1})}else this.selected.forEach(function(t){t.isToped=!1})},selectCheckItem:function(t){var e=this;this.checkAll=!0,t.checked=!t.checked,this.goodsList.forEach(function(t){t.checked||(e.checkAll=!1)})},selectAll:function(){var t=this;this.checkAll=!this.checkAll,this.goodsList.forEach(function(e){t.checkAll?e.checked=!0:e.checked=!1})},changeTab:function(t){var e=this;2===t?(this.activityParams.actStrategy.itemPriceReductionInfoList=[],0===this.selected.length?this.$message.info({message:"请先选择活动商品",showClose:!0}):(this.selected.forEach(function(t){e.activityParams.actStrategy.itemPriceReductionInfoList.push({itemId:t.id,mainImageUrl:t.mainImageUrl,name:t.name,priceReduction:"",onePrice:"",price:t.price})}),this.detailPriceReductionInfo.itemPriceReductionInfoList&&this.detailPriceReductionInfo.itemPriceReductionInfoList.forEach(function(t){e.activityParams.actStrategy.itemPriceReductionInfoList.forEach(function(e){t.itemId===e.itemId&&(e.priceReduction=t.priceReduction,e.onePrice=t.onePrice)})}),this.currentTab=t)):this.currentTab=t},batchSelect:function(){var t=this,e=[];if(this.goodsList.forEach(function(t){t.checked&&e.push(t)}),0===e.length)this.$message.info({message:"至少选择一件商品",showClose:!0});else if(this.selected.length>0){var a=[];this.selected.forEach(function(t){a.push(t.id)});var s=!1;e.forEach(function(e){-1===a.indexOf(e.id)&&(t.selected.push(e),s=!0)}),s?(this.$message.success({message:"已选取",showClose:!0}),this.checkSelected()):this.$message.info({message:"商品均已被选取",showClose:!0})}else this.selected=this.copy(e),this.$message.success({message:"已选取",showClose:!0}),this.checkSelected()},pageSelect:function(){var t=this,e=this.copy(this.goodsList);if(0!==e.length)if(this.selected.length>0){var a=[];this.selected.forEach(function(t){a.push(t.id)});var s=!1;e.forEach(function(e){-1===a.indexOf(e.id)&&(t.selected.push(e),s=!0)}),s?(this.$message.success({message:"已选取",showClose:!0}),this.checkSelected()):this.$message.info({message:"商品均已被选取",showClose:!0})}else this.selected=this.copy(e),this.$message.success({message:"已选取",showClose:!0}),this.checkSelected()},changeSelectTab:function(t){this.selectTab=t},uploadPCSuccess:function(t){this.activityParams.bannerImage.bannerImageUrlForPC=t.data},uploadAppSuccess:function(t){this.activityParams.bannerImage.bannerImageUrlForAPP=t.data},dialogShop:function(t){this.selectShop=t.shopList,this.showShopModal=!1},dialogShopCancel:function(){this.showShopModal=!1},removeSearchShop:function(t){this.selectShop.splice(t,1)},dialogBrand:function(t){this.selectBrand=t.brandList,this.showBrandModal=!1},dialogBrandCancel:function(){this.showBrandModal=!1},removeSearchBrand:function(t){this.selectBrand.splice(t,1)},dialogCategory:function(t){this.selectCate=t.categoryList[0],this.showCategoryModal=!1},dialogCategoryCancel:function(){this.showCategoryModal=!1},removeSearchCate:function(){this.selectCate={}},selectItem:function(t){if(this.selected.length>0){var e=!1;this.selected.forEach(function(a){a.id===t.id&&(e=!0)}),e?this.$message.info({message:"不能选取相同的商品",showClose:!0}):(this.selected.push(t),this.checkSelected(),this.$message.success({message:"已选取",showClose:!0}))}else this.selected.push(t),this.checkSelected(),this.$message.success({message:"已选取",showClose:!0})},cancelItem:function(t,e){var a=this;if(this.toped.length>0){var s="";this.toped.forEach(function(e,a){e.id===t.id&&(s=a)}),s||0===s?this.$msgbox({title:"",message:"该商品已被置顶，确认取消？",showCancelButton:!0,confirmButtonText:"是",cancelButtonText:"否"}).then(function(t){"confirm"===t&&(a.toped.splice(s,1),a.selected.splice(e,1),a.checkSelected())}):(this.selected.splice(e,1),this.checkSelected())}else this.selected.splice(e,1),this.checkSelected()},cancelSetItem:function(t,e){var a=this;if(this.toped.length>0){var s="";if(this.toped.forEach(function(e,a){e.id===t.itemId&&(s=a)}),s||0===s)this.$msgbox({title:"",message:"该商品已被置顶，确认取消？",showCancelButton:!0,confirmButtonText:"是",cancelButtonText:"否"}).then(function(i){if("confirm"===i){a.toped.splice(s,1),a.activityParams.actStrategy.itemPriceReductionInfoList.splice(e,1),a.checkToped();var c="";a.selected.forEach(function(e,a){e.id===t.itemId&&(c=a)}),(c||0===c)&&a.selected.splice(c,1),a.checkSelected()}});else{this.activityParams.actStrategy.itemPriceReductionInfoList.splice(e,1),this.checkToped();var i="";this.selected.forEach(function(e,a){e.id===t.itemId&&(i=a)}),(i||0===i)&&this.selected.splice(i,1),this.checkSelected()}}else{this.activityParams.actStrategy.itemPriceReductionInfoList.splice(e,1),this.checkToped();var c="";this.selected.forEach(function(e,a){e.id===t.itemId&&(c=a)}),(c||0===c)&&this.selected.splice(c,1),this.checkSelected()}},setTop:function(t){if(this.toped.length>0){var e=!1;this.toped.forEach(function(a){a.id===t.id&&(e=!0)}),e?this.$message.info({message:"不能置顶相同的商品",showClose:!0}):(this.toped.push(t),this.checkToped(),this.$message.success({message:"已置顶",showClose:!0}))}else this.toped.push(t),this.checkToped(),this.$message.success({message:"已置顶",showClose:!0})},unsetTop:function(t){this.toped.splice(t,1),this.checkToped()},selectLadder:function(t){this.selectLadderIndex=t,this.showGoodsModal=!0},removeLadderGoods:function(t,e){t.giftInfoList.splice(e,1)},dialogGoods:function(t){var e=[];t.goodsList.forEach(function(t){t.selectedSku.forEach(function(a){e.push({itemId:t.itemId,itemName:t.itemName,mainImg:t.mainImg,channelType:t.selectedChannel,skuId:a.skuId,skuValue:a.skuValue,stockNum:a.stockNum})})}),this.ladderParams.fullGiftLimitList[this.selectLadderIndex].giftInfoList=e,this.showGoodsModal=!1},dialogGoodsCancel:function(){this.showGoodsModal=!1},saveActivity:function(){var t=this,e=this.copy(this.activityParams);if(e.actType){if(1===e.actType){if(0===this.setStatus)return void this.$message.info({message:"请选择一种活动策略",showClose:!0});var a=[];if(1===this.setStatus){if(!e.actStrategy.allPriceReduction)return void this.$message.info({message:"请输入减价金额",showClose:!0});delete e.actStrategy.allOnePrice,e.actStrategy.itemPriceReductionInfoList.forEach(function(t){(t.priceReduction||0===t.priceReduction)&&a.push({itemId:t.itemId,priceReduction:t.priceReduction})}),e.actStrategy.itemPriceReductionInfoList=a}else delete e.actStrategy.allPriceReduction,e.actStrategy.itemPriceReductionInfoList.forEach(function(t){(t.allOnePrice||0===t.allOnePrice)&&a.push({itemId:t.itemId,allOnePrice:t.allOnePrice})}),e.actStrategy.itemPriceReductionInfoList=a;if(e.actStrategy.currency=this.actCurrency,!e.actStrategy.currency)return void this.$message.info({message:"请选择货币",showClose:!0})}var s={itemIdList:[]};if(this.selected.forEach(function(t){s.itemIdList.push(t.id)}),e.actScope=s,this.toped.length>0){var i=[];this.toped.forEach(function(t){i.push(t.id)}),e.headItemIds=i}if(2===e.actType){if(""==this.limitRules[0].limitPrice&&""==this.limitRules[0].reductionPrice)return void this.$message.warning({message:"请填写满减金额",showClose:!0});if(e.actStrategy={fullReductionLimitList:this.copy(this.limitRules),currency:this.actCurrency||""},!e.actStrategy.currency)return void this.$message.info({message:"请选择货币",showClose:!0})}if(3!==e.actType||(e.actStrategy={discount:this.copy(this.actDiscount)},e.actStrategy.discount)){if(4===e.actType){var c=[];if(this.ladderParams.fullGiftLimitList.forEach(function(t){var e={limitPrice:t.limitPrice,giftInfoList:[]};t.giftInfoList.forEach(function(t){e.giftInfoList.push({itemId:t.itemId,skuId:t.skuId,channelType:t.channelType})}),c.push(e)}),e.actStrategy={type:this.ladderParams.type,fullGiftLimitList:c,currency:this.actCurrency},!e.actStrategy.currency)return void this.$message.info({message:"请选择货币",showClose:!0})}5!==e.actType||(e.actStrategy={currency:this.actCurrency,packingPriceList:this.copy(this.packingPriceList)},e.actStrategy.currency)?(this.console("params:",e),e.actStrategy=JSON.stringify(e.actStrategy),e.bannerImage=JSON.stringify(e.bannerImage),e.actScope=JSON.stringify(e.actScope),this.id?(e.id=this.id,this.api.activity.edit(e).then(function(e){t.$message.success({message:e.message,showClose:!0}),t.$router.push({name:"平台促销"})})):this.api.activity.add(e).then(function(e){t.$message.success({message:e.message,showClose:!0}),t.$router.push({name:"平台促销"})})):this.$message.info({message:"请选择货币",showClose:!0})}else this.$message.info({message:"请输入折扣",showClose:!0})}else this.$message.info({message:"请选择活动类型",showClose:!0})}},components:{editor:l["a"],Pagination:r["a"],SelectBrand:c["a"],SelectCategory:n["a"],SelectShop:o["a"],selectActGoods:d["a"]},watch:{actCurrency:function(t){var e=this;this.currencyName="",this.currencyList.forEach(function(a){t===a.code&&(e.currencyName=a.name)})}}},u=m,h=(a("d4ff"),a("2877")),p=Object(h["a"])(u,s,i,!1,null,null,null);e["default"]=p.exports},a918:function(t,e,a){},b4ab:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAAXNSR0IArs4c6QAAAahJREFUOBGtlb8vBEEUx98bq3CSk1BYJBIkkq3PH3I0EoVKoaKQEyqnUbgodAqVP4D7Q1y9FRKJHxehkDjx43bMd5jN7Ozi1pnibua99/3MrzdvmTKaLJV6by+ey1JGZWKeYaJRhEmia5LylFnU/Ym+Ojcab65cxSZbcyiYjSKqSZJTSU9yxMRnQlBl+D48sT3CDGS1Km4Gg912JI9/g0GDGMRCA63hxCvUDikrxpHnn5lrIw/hOjQaiG1itjwQN7ZH8By2z/oCzlthJ9t0IfYYZ+pPFgKhbzPjAoo7m9S/umRrdL+wvEjwuQ0LAkvo1HC9avx+eUXFrbUEFLABBWs37zIU6qJUmnnIM9VLBbQOjrQNADT58qphj9t79LR/qG2pH8XykLRp3GeoC/0RpiRgxfmTmu2PBk8/J6LpLL05M6zMbBlx320ZLA9vU8WkgDbMBpgztW3xYhTLw0NXt7MQG7863vgYuWdmzhS+rAbW/yc2ShCqRtaMeWxgaBZE+g2qB54HYMeiOJgyFqeNvzK/AYcd2EkfGmhNbFy+jKHbApsCAtzNJ+ADZY/W0D4Cv+sAAAAASUVORK5CYII="},c768:function(t,e,a){"use strict";var s=a("456a"),i=a.n(s);i.a},c8f0:function(t,e,a){"use strict";var s=a("7715"),i=a.n(s);i.a},d4ff:function(t,e,a){"use strict";var s=a("e959"),i=a.n(s);i.a},e959:function(t,e,a){},f88c:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"tinymce-container editor-container",class:{fullscreen:t.fullscreen}},[a("textarea",{staticClass:"tinymce-textarea",attrs:{id:t.tinymceId}}),a("div",{staticClass:"editor-custom-btn-container"},[a("editorImage",{staticClass:"editor-upload-btn",on:{successCBK:t.imageSuccessCBK}})],1)])},i=[],c=(a("ac6a"),a("c5f6"),function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"upload-container"},[s("button",{staticClass:"btn-fill-main",on:{click:function(e){t.dialogVisible=!0}}},[t._v("上传图片\n  ")]),s("el-dialog",{attrs:{visible:t.dialogVisible,title:"图片上传"},on:{"update:visible":function(e){t.dialogVisible=e}}},[s("div",{staticClass:"dialog-form"},[t._l(t.arr,function(e,i){return s("div",{key:i+"img",staticClass:"img-item"},[s("img",{attrs:{src:e.url}}),s("img",{staticClass:"remove-img",attrs:{src:a("b4ab")},on:{click:function(e){return t.removeImg(i)}}})])}),s("a",{staticClass:"addGoodsImg",attrs:{href:"javascript:;"}},[s("upload",{attrs:{uploadType:"2"},on:{uploadSuccess:t.uploadSuccess}},[s("img",{attrs:{src:a("8799")}})])],1)],2),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("button",{staticClass:"btn-main",on:{click:t.handleSubmit}},[t._v("确定")]),s("button",{staticClass:"btn-fill-grey-main",on:{click:function(e){t.dialogVisible=!1}}},[t._v("取消")])])])],1)}),n=[],o={name:"EditorSlideUpload",data:function(){return{dialogVisible:!1,listObj:{},fileList:[],arr:[]}},methods:{uploadSuccess:function(t){this.arr.push({name:"",url:t.data})},removeImg:function(t){this.arr.splice(t,1)},handleSubmit:function(){this.$emit("successCBK",this.arr),this.dialogVisible=!1}}},r=o,l=(a("c768"),a("2877")),d=Object(l["a"])(r,c,n,!1,null,null,null),m=d.exports,u=["advlist anchor autolink autosave code codesample colorpicker colorpicker contextmenu directionality emoticons fullscreen hr image imagetools importcss insertdatetime link lists media nonbreaking noneditable pagebreak paste preview print save searchreplace spellchecker tabfocus table template textcolor textpattern visualblocks visualchars wordcount"],h=u,p=["bold italic underline strikethrough alignleft aligncenter alignright outdent indent  blockquote undo redo removeformat subscript superscript code codesample","hr bullist numlist link image charmap preview anchor pagebreak insertdatetime media table emoticons forecolor backcolor fullscreen"],v=p,f={name:"Tinymce",components:{editorImage:m},props:{id:{type:String,default:function(){return"vue-tinymce-"+ +new Date+(1e3*Math.random()).toFixed(0)}},value:{type:String,default:""},toolbar:{type:Array,required:!1,default:function(){return[]}},menubar:{type:String,default:"file edit insert view format table"},height:{type:Number,required:!1,default:360}},data:function(){return{hasChange:!1,hasInit:!1,tinymceId:this.id,fullscreen:!1,languageTypeList:{en:"en",zh:"zh_CN"}}},computed:{},watch:{value:function(t){var e=this;!this.hasChange&&this.hasInit&&this.$nextTick(function(){return window.tinymce.get(e.tinymceId).setContent(t||"")})}},mounted:function(){this.initTinymce()},activated:function(){this.initTinymce()},deactivated:function(){this.destroyTinymce()},destroyed:function(){this.destroyTinymce()},methods:{initTinymce:function(){var t=this,e=this;window.tinymce.init({language:"zh_CN",selector:"#".concat(this.tinymceId),height:this.height,body_class:"panel-body ",object_resizing:!1,toolbar:this.toolbar.length>0?this.toolbar:v,menubar:this.menubar,plugins:h,end_container_on_empty_block:!0,powerpaste_word_import:"clean",code_dialog_height:450,code_dialog_width:1e3,advlist_bullet_styles:"square",advlist_number_styles:"default",imagetools_cors_hosts:["www.tinymce.com","codepen.io"],default_link_target:"_blank",link_title:!1,nonbreaking_force_tab:!0,init_instance_callback:function(a){e.value&&a.setContent(e.value),e.hasInit=!0,a.on("NodeChange Change KeyUp SetContent",function(){t.hasChange=!0,t.$emit("input",a.getContent())})},setup:function(t){t.on("FullscreenStateChanged",function(t){e.fullscreen=t.state})}})},destroyTinymce:function(){window.tinymce.get(this.tinymceId)&&window.tinymce.get(this.tinymceId).destroy()},setContent:function(t){window.tinymce.get(this.tinymceId).setContent(t)},getContent:function(){window.tinymce.get(this.tinymceId).getContent()},imageSuccessCBK:function(t){var e=this;t.forEach(function(t){window.tinymce.get(e.tinymceId).insertContent('<img class="wscnph" src="'.concat(t.url,'" >'))})}}},g=f,y=(a("c8f0"),Object(l["a"])(g,s,i,!1,null,"653726a2",null));e["a"]=y.exports},f8c5:function(t,e,a){"use strict";var s=a("a918"),i=a.n(s);i.a}}]);
//# sourceMappingURL=chunk-64bf1586.64303ac7.js.map