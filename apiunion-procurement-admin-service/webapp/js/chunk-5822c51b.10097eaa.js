(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5822c51b"],{"09d3":function(e,t,s){},"4d86":function(e,t,s){"use strict";var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"pagination-container",class:{hidden:e.hidden}},[s("el-pagination",e._b({attrs:{background:e.background,"current-page":e.currentPage,"page-size":e.pageSize,layout:e.layout,total:e.total},on:{"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t},"update:pageSize":function(t){e.pageSize=t},"update:page-size":function(t){e.pageSize=t},"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}},"el-pagination",e.$attrs,!1))],1)},n=[],i=(s("c5f6"),{name:"Pagination",props:{total:{required:!0,type:Number},page:{type:Number,default:1},limit:{type:Number,default:20},pageSizes:{type:Array,default:function(){return[10,20,30,50]}},layout:{type:String,default:"total, sizes, prev, pager, next, jumper"},background:{type:Boolean,default:!0},autoScroll:{type:Boolean,default:!0},hidden:{type:Boolean,default:!1}},computed:{currentPage:{get:function(){return this.page},set:function(e){this.$emit("update:page",e)}},pageSize:{get:function(){return this.limit},set:function(e){this.$emit("update:limit",e)}}},methods:{handleSizeChange:function(e){this.$emit("pagination",{page:this.currentPage,limit:e}),this.autoScroll},handleCurrentChange:function(e){this.$emit("pagination",{page:e,limit:this.pageSize}),this.autoScroll}}}),o=i,l=(s("b02f"),s("2877")),c=Object(l["a"])(o,a,n,!1,null,"6494eb3e",null);t["a"]=c.exports},6516:function(e,t,s){},7994:function(e,t,s){"use strict";var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"select-goods"},[s("el-dialog",{attrs:{title:"选择商品",visible:e.showGoodsModal,width:"670px","before-close":e.cancelGoods},on:{"update:visible":function(t){e.showGoodsModal=t}}},[s("div",{staticClass:"dialog-form"},[s("div",{staticClass:"dialog-search"},[s("select",{directives:[{name:"model",rawName:"v-model",value:e.listParams.brandId,expression:"listParams.brandId"}],staticClass:"form-control",class:{"unset-select":!e.listParams.brandId},on:{change:function(t){var s=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){var t="_value"in e?e._value:e.value;return t});e.$set(e.listParams,"brandId",t.target.multiple?s:s[0])}}},[s("option",{attrs:{value:""}},[e._v("品牌选择")]),e._l(e.brandList,function(t){return s("option",{key:t.id,domProps:{value:t.id}},[e._v(e._s(t.name))])})],2),s("select",{directives:[{name:"model",rawName:"v-model",value:e.listParams.cateId,expression:"listParams.cateId"}],staticClass:"form-control",class:{"unset-select":!e.listParams.cateId},on:{change:function(t){var s=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){var t="_value"in e?e._value:e.value;return t});e.$set(e.listParams,"cateId",t.target.multiple?s:s[0])}}},[s("option",{attrs:{value:""}},[e._v("类目选择")]),e._l(e.cateList,function(t){return s("option",{key:t.id,domProps:{value:t.id}},[e._v(e._s(t.name))])})],2),s("div",{staticClass:"input-box"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.listParams.keyword,expression:"listParams.keyword"}],staticClass:"form-control",attrs:{type:"text",placeholder:"商品名/商品ID/条形码"},domProps:{value:e.listParams.keyword},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.getList(t)},input:function(t){t.target.composing||e.$set(e.listParams,"keyword",t.target.value)}}}),s("i",{staticClass:"el-icon-search",on:{click:function(t){return e.getList()}}})]),s("a",{directives:[{name:"show",rawName:"v-show",value:1==e.toggleAction,expression:"toggleAction == 1"}],staticClass:"toggle-btn",attrs:{href:"javascript:;"},on:{click:function(t){e.toggleAction=2}}},[e._v("已选择商品")]),s("a",{directives:[{name:"show",rawName:"v-show",value:2==e.toggleAction,expression:"toggleAction == 2"}],staticClass:"toggle-btn",attrs:{href:"javascript:;"},on:{click:function(t){e.toggleAction=1}}},[e._v("全部商品")])]),s("div",{staticClass:"goods-title"},[s("span",{staticClass:"goods",class:{"single-channel-goods":e.userConfig.singleChannel}},[e._v(e._s(2==e.toggleAction?"已选":"")+"商品")]),s("span",{directives:[{name:"show",rawName:"v-show",value:!e.userConfig.singleChannel,expression:"!userConfig.singleChannel"}],staticClass:"channel"},[e._v("渠道")]),s("span",{staticClass:"spec"},[e._v("规格")]),s("span",{staticClass:"oprate"},[e._v("操作")])]),e._l(e.tableData,function(t){return s("div",{directives:[{name:"show",rawName:"v-show",value:1==e.toggleAction,expression:"toggleAction == 1"}],key:t.itemId,staticClass:"goods-item",class:{"selected-item":t.checked}},[s("div",{staticClass:"item-img"},[s("img",{attrs:{src:t.mainImg}})]),s("div",{staticClass:"item-name",class:{"single-channel-name":e.userConfig.singleChannel}},[s("h2",[e._v(e._s(t.itemName))]),s("p",[e._v("商品编号："+e._s(t.itemId))])]),s("div",{directives:[{name:"show",rawName:"v-show",value:!e.userConfig.singleChannel,expression:"!userConfig.singleChannel"}],staticClass:"item-channel"},[s("select",{directives:[{name:"model",rawName:"v-model",value:t.selectedChannel,expression:"item.selectedChannel"}],staticClass:"form-control",on:{change:[function(s){var a=Array.prototype.filter.call(s.target.options,function(e){return e.selected}).map(function(e){var t="_value"in e?e._value:e.value;return t});e.$set(t,"selectedChannel",s.target.multiple?a:a[0])},function(s){return e.changeChannel(t)}]}},e._l(t.channelInfoList,function(t){return s("option",{key:t.channelType,domProps:{value:t.channelType}},[e._v(e._s(t.channelName))])}),0)]),s("div",{staticClass:"item-spec"},[s("a",{staticClass:"link spec-btn",on:{click:function(e){t.showSku=!t.showSku}}},[e._v("选择规格")])]),s("div",{staticClass:"item-oprate"},[s("a",{directives:[{name:"show",rawName:"v-show",value:!t.checked,expression:"!item.checked"}],staticClass:"link",on:{click:function(s){return e.selectItem(t)}}},[e._v("选取")]),s("span",{directives:[{name:"show",rawName:"v-show",value:t.checked,expression:"item.checked"}],staticClass:"tips"},[e._v("已选取")])]),s("div",{directives:[{name:"show",rawName:"v-show",value:t.showSku,expression:"item.showSku"}],staticClass:"sku-inner"},[s("h5",[e._v("规格选择")]),s("div",{staticClass:"sku-box"},e._l(t.skuList,function(a){return s("span",{key:a.skuId,staticClass:"sku-item",class:{"select-sku":a.checked},on:{click:function(s){return e.selectSku(t,a)}}},[e._v(e._s(a.skuValue))])}),0)])])}),s("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0&&1==e.toggleAction,expression:"total>0 && toggleAction == 1"}],attrs:{total:e.total,page:e.listParams.page,limit:e.listParams.limit},on:{"update:page":function(t){return e.$set(e.listParams,"page",t)},"update:limit":function(t){return e.$set(e.listParams,"limit",t)},pagination:function(t){return e.getList()}}}),s("div",{directives:[{name:"show",rawName:"v-show",value:2==e.toggleAction,expression:"toggleAction == 2"}],staticClass:"selected-goods"},e._l(e.selectedGoodsList,function(t,a){return s("div",{key:t.itemId,staticClass:"goods-item"},[s("div",{staticClass:"item-img"},[s("img",{attrs:{src:t.mainImg}})]),s("div",{staticClass:"item-name",class:{"single-channel-name":e.userConfig.singleChannel}},[s("h2",[e._v(e._s(t.itemName))]),s("p",[e._v("商品编号："+e._s(t.itemId))])]),s("div",{directives:[{name:"show",rawName:"v-show",value:!e.userConfig.singleChannel,expression:"!userConfig.singleChannel"}],staticClass:"item-channel"},[s("span",{staticClass:"text"},[e._v(e._s(t.selectedChannelName))])]),s("div",{staticClass:"item-spec"},e._l(t.selectedSku,function(a,n){return s("span",{key:a.skuId,staticClass:"text"},[e._v(e._s(a.skuValue)),s("i",{directives:[{name:"show",rawName:"v-show",value:n<t.selectedSku.length-1,expression:"s_index<item.selectedSku.length-1"}]},[e._v("、")])])}),0),s("div",{staticClass:"item-oprate"},[s("a",{staticClass:"link",on:{click:function(s){return e.removeItem(t,a)}}},[e._v("删除")])])])}),0)],2),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("button",{staticClass:"btn-main",on:{click:function(t){return e.exportGoods()}}},[e._v("确认添加")]),s("button",{staticClass:"btn-fill-grey-main",on:{click:function(t){return e.cancelGoods()}}},[e._v("取消")])])])],1)},n=[],i=(s("ac6a"),s("4d86")),o={props:{presell:{default:0},gift:{default:0},type:{default:""}},data:function(){return{showGoodsModal:!0,toggleAction:1,cateList:[],brandList:[],tableData:[],total:0,listParams:{limit:10,page:1,brandId:"",cateId:"",keyword:""},selectedGoodsList:[]}},created:function(){this.listParams.presell=this.presell,this.listParams.gift=this.gift,this.init()},methods:{init:function(){this.getBrandList(),this.getCateList(),this.getList()},getBrandList:function(){var e=this;this.api.brand.letterList({}).then(function(t){e.brandList=t.data})},getCateList:function(){var e=this;this.api.category.categoryNode({parentId:0}).then(function(t){e.cateList=t.data})},getList:function(){var e=this,t=this.copy(this.listParams);t.brandId||delete t.brandId,t.cateId||delete t.cateId,this.api.goods.actGoods(t).then(function(t){e.tableData=t.data.dataList,e.total=t.data.total,e.tableData.forEach(function(t){t.channelInfoList&&t.channelInfoList.length>0&&(t.channelInfoList.forEach(function(t){t.skuInfoList&&t.skuInfoList.length>0&&t.skuInfoList.forEach(function(t){e.$set(t,"checked",!1)})}),e.$set(t,"selectedChannel",t.channelInfoList[0].channelType),e.$set(t,"selectedChannelName",t.channelInfoList[0].channelName),e.$set(t,"selectedChannelPrice",t.channelInfoList[0].price),e.$set(t,"skuList",t.channelInfoList[0].skuInfoList),e.$set(t,"showSku",!1),e.$set(t,"selectedSku",[]))}),e.selectedGoodsList.length>0&&e.tableData.forEach(function(t){e.selectedGoodsList.forEach(function(e){t.itemId===e.itemId&&(t.checked=!0)})})})},selectSku:function(e,t){if(t.checked=!t.checked,t.checked?e.selectedSku.push(t):e.selectedSku.forEach(function(s,a){s.skuId===t.skuId&&e.selectedSku.splice(a,1)}),e.checked){e.checked=!1;var s=0;this.selectedGoodsList.forEach(function(t,a){t.itemId===e.itemId&&(s=a)}),(s||0===s)&&this.selectedGoodsList.splice(s,1)}},selectItem:function(e){var t=[];if(e.channelInfoList.forEach(function(s){e.selectedChannel===s.channelType&&(s.skuInfoList.forEach(function(e){e.checked&&t.push(e)}),e.selectedSku=t)}),0!==e.selectedSku.length){var s=!1;this.selectedGoodsList.forEach(function(t){e.itemId===t.itemId&&(s=!0)}),s?this.$message.info({message:"不可添加相同的商品",showClose:!0}):(this.$message.success({message:"添加成功",showClose:!0}),this.selectedGoodsList.push(e),e.checked=!0)}else this.$message.info({message:"请选择规格",showClose:!0})},changeChannel:function(e){if(e.channelInfoList){var t=[];e.channelInfoList.forEach(function(s){e.selectedChannel===s.channelType&&(t=s.skuInfoList)}),e.skuList=t,e.skuList.forEach(function(e){e.checked=!1})}},removeItem:function(e,t){this.selectedGoodsList.splice(t,1),this.tableData.forEach(function(t){e.itemId===t.itemId&&(t.checked=!1)})},exportGoods:function(){if(this.type&&this.selectedGoodsList.length>1)switch(this.type){case"group":this.$message.info({message:"团购只能选择一种商品",showClose:!0});break}else this.$emit("dialogGoods",{goodsList:this.selectedGoodsList})},cancelGoods:function(){this.showGoodsModal=!0,this.$emit("dialogGoodsCancel")}},components:{Pagination:i["a"]}},l=o,c=(s("dc82"),s("2877")),r=Object(c["a"])(l,a,n,!1,null,null,null);t["a"]=r.exports},b02f:function(e,t,s){"use strict";var a=s("09d3"),n=s.n(a);n.a},dc82:function(e,t,s){"use strict";var a=s("6516"),n=s.n(a);n.a}}]);
//# sourceMappingURL=chunk-5822c51b.10097eaa.js.map