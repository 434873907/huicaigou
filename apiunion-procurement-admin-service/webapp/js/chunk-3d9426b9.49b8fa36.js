(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3d9426b9"],{"2a0d":function(e,a,t){"use strict";t.r(a);var s=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"center-freight-temp-add"},[t("div",{staticClass:"page-title"},[e._v("新建运费模板")]),t("div",{staticClass:"list-wrap"},[t("div",{staticClass:"form-wrap"},[t("div",{staticClass:"form-name form-require"},[e._v("模板名称")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.tempParams.templateName,expression:"tempParams.templateName"}],staticClass:"form-control long-form",attrs:{type:"text"},domProps:{value:e.tempParams.templateName},on:{input:function(a){a.target.composing||e.$set(e.tempParams,"templateName",a.target.value)}}})]),t("div",{directives:[{name:"show",rawName:"v-show",value:!e.userConfig.singleChannel,expression:"!userConfig.singleChannel"}],staticClass:"form-wrap"},[t("div",{staticClass:"form-name"},[e._v("渠道")]),t("select",{directives:[{name:"model",rawName:"v-model",value:e.tempParams.channel,expression:"tempParams.channel"}],staticClass:"form-control long-form",class:{"unset-select":!e.tempParams.channel},on:{change:function(a){var t=Array.prototype.filter.call(a.target.options,function(e){return e.selected}).map(function(e){var a="_value"in e?e._value:e.value;return a});e.$set(e.tempParams,"channel",a.target.multiple?t:t[0])}}},[t("option",{attrs:{value:""}},[e._v("请选择")]),e._l(e.channelList,function(a){return t("option",{key:a.channelType,domProps:{value:a.channelType}},[e._v(e._s(a.channelTypeName))])})],2)]),t("div",{staticClass:"form-wrap"},[t("div",{staticClass:"form-name"},[e._v("货币")]),t("select",{directives:[{name:"model",rawName:"v-model",value:e.tempParams.currency,expression:"tempParams.currency"}],staticClass:"form-control long-form",class:{"unset-select":!e.tempParams.currency},on:{change:function(a){var t=Array.prototype.filter.call(a.target.options,function(e){return e.selected}).map(function(e){var a="_value"in e?e._value:e.value;return a});e.$set(e.tempParams,"currency",a.target.multiple?t:t[0])}}},[t("option",{attrs:{value:""}},[e._v("请选择")]),e._l(e.currencyList,function(a){return t("option",{key:a.code,domProps:{value:a.code}},[e._v(e._s(a.mixName))])})],2)]),t("div",{staticClass:"form-wrap"},[t("div",{staticClass:"form-name form-require"},[e._v("是否包邮")]),t("el-radio",{attrs:{label:1},model:{value:e.tempParams.isFree,callback:function(a){e.$set(e.tempParams,"isFree",a)},expression:"tempParams.isFree"}},[e._v("包邮")]),t("el-radio",{attrs:{label:0},model:{value:e.tempParams.isFree,callback:function(a){e.$set(e.tempParams,"isFree",a)},expression:"tempParams.isFree"}},[e._v("自定义运费")])],1),t("div",{staticClass:"form-wrap"},[t("div",{staticClass:"form-name form-require"},[e._v("部分地区不发货")]),t("el-radio",{attrs:{label:0},model:{value:e.tempParams.isNoSend,callback:function(a){e.$set(e.tempParams,"isNoSend",a)},expression:"tempParams.isNoSend"}},[e._v("否")]),t("el-radio",{attrs:{label:1},model:{value:e.tempParams.isNoSend,callback:function(a){e.$set(e.tempParams,"isNoSend",a)},expression:"tempParams.isNoSend"}},[e._v("是")]),t("span",{directives:[{name:"show",rawName:"v-show",value:!e.tempParams.undeliverableArea,expression:"!tempParams.undeliverableArea"}],staticClass:"link underline",on:{click:function(a){return e.showCarryMode(3)}}},[e._v("设置不发货地区")]),t("span",{directives:[{name:"show",rawName:"v-show",value:e.tempParams.undeliverableArea,expression:"tempParams.undeliverableArea"}]},[t("span",{staticClass:"link underline",on:{click:function(a){return e.showCarryMode(3)}}},[e._v("更换")]),t("el-popover",{staticClass:"inline-block",attrs:{placement:"right",width:"400",trigger:"hover"}},[t("span",[e._v(e._s(e.tempParams.undeliverableArea))]),t("span",{attrs:{slot:"reference"},slot:"reference"},[e._v("（已选择"+e._s(e.tempParams.noSendNum)+"城市）")])])],1)],1),t("div",{directives:[{name:"show",rawName:"v-show",value:!e.tempParams.isFree,expression:"!tempParams.isFree"}],staticClass:"form-wrap"},[t("div",{staticClass:"form-name form-require"},[e._v("计价方式")]),t("el-radio",{attrs:{label:1},model:{value:e.valuationModel,callback:function(a){e.valuationModel=a},expression:"valuationModel"}},[e._v("按件数")]),t("el-radio",{attrs:{label:2},model:{value:e.valuationModel,callback:function(a){e.valuationModel=a},expression:"valuationModel"}},[e._v("按重量")])],1),t("div",{directives:[{name:"show",rawName:"v-show",value:!e.tempParams.isFree,expression:"!tempParams.isFree"}],staticClass:"form-wrap"},[t("div",{staticClass:"form-name"},[e._v("运输方式")]),t("el-radio",{attrs:{label:1},model:{value:e.transportation,callback:function(a){e.transportation=a},expression:"transportation"}},[e._v("快递")])],1),t("div",{directives:[{name:"show",rawName:"v-show",value:!e.tempParams.isFree,expression:"!tempParams.isFree"}],staticClass:"table-form"},[t("div",{staticClass:"table-title-form"},[t("div",{staticClass:"form-wrap"},[t("div",{staticClass:"form-name"},[e._v("默认运费")]),t("ApiInput",{model:{value:e.tempParams.carryMode.defaultCarryMode.firstLimit,callback:function(a){e.$set(e.tempParams.carryMode.defaultCarryMode,"firstLimit",a)},expression:"tempParams.carryMode.defaultCarryMode.firstLimit"}})],1),t("div",{staticClass:"form-wrap"},[t("div",{staticClass:"form-name"},[e._v(e._s(1===e.valuationModel?"件":"")+e._s(2===e.valuationModel?"kg":"")+"内")]),t("ApiInput",{model:{value:e.tempParams.carryMode.defaultCarryMode.firstPrice,callback:function(a){e.$set(e.tempParams.carryMode.defaultCarryMode,"firstPrice",a)},expression:"tempParams.carryMode.defaultCarryMode.firstPrice"}})],1),t("div",{staticClass:"form-wrap"},[t("div",{staticClass:"form-name"},[e._v(e._s(e.currencyName)+"，每增加")]),t("ApiInput",{model:{value:e.tempParams.carryMode.defaultCarryMode.secondLimit,callback:function(a){e.$set(e.tempParams.carryMode.defaultCarryMode,"secondLimit",a)},expression:"tempParams.carryMode.defaultCarryMode.secondLimit"}})],1),t("div",{staticClass:"form-wrap"},[t("div",{staticClass:"form-name"},[e._v(e._s(1===e.valuationModel?"件":"")+e._s(2===e.valuationModel?"kg":"")+"，增加运费")]),t("ApiInput",{model:{value:e.tempParams.carryMode.defaultCarryMode.secondPrice,callback:function(a){e.$set(e.tempParams.carryMode.defaultCarryMode,"secondPrice",a)},expression:"tempParams.carryMode.defaultCarryMode.secondPrice"}}),t("div",{staticClass:"form-name"},[e._v(e._s(e.currencyName))])],1)]),t("table",[t("tr",{staticClass:"th"},[t("th",{staticClass:"left-padding"},[e._v("运送到")]),t("th",[e._v("首件数("+e._s(1===e.valuationModel?"件":"")+e._s(2===e.valuationModel?"kg":"")+")")]),t("th",[e._v("首费"+e._s(e.currencyName?"("+e.currencyName+")":""))]),t("th",[e._v("续件数("+e._s(1===e.valuationModel?"件":"")+e._s(2===e.valuationModel?"kg":"")+")")]),t("th",[e._v("续费"+e._s(e.currencyName?"("+e.currencyName+")":""))]),t("th",[e._v("操作")])]),e._l(e.tempParams.carryMode.carryModeList,function(a,s){return t("tr",{key:s+"sp"},[t("td",{staticClass:"left-padding"},[t("span",{directives:[{name:"show",rawName:"v-show",value:!a.region,expression:"!item.region"}],staticClass:"small-font"},[e._v("未添加地区")]),t("span",{directives:[{name:"show",rawName:"v-show",value:a.region,expression:"item.region"}],staticClass:"region"},[e._v(e._s(a.region))]),t("span",{staticClass:"link underline",on:{click:function(a){return e.showCarryMode(1,s)}}},[e._v("编辑")])]),t("td",[t("ApiInput",{model:{value:a.firstLimit,callback:function(t){e.$set(a,"firstLimit",t)},expression:"item.firstLimit"}})],1),t("td",[t("ApiInput",{model:{value:a.firstPrice,callback:function(t){e.$set(a,"firstPrice",t)},expression:"item.firstPrice"}})],1),t("td",[t("ApiInput",{model:{value:a.secondLimit,callback:function(t){e.$set(a,"secondLimit",t)},expression:"item.secondLimit"}})],1),t("td",[t("ApiInput",{model:{value:a.secondPrice,callback:function(t){e.$set(a,"secondPrice",t)},expression:"item.secondPrice"}})],1),t("td",{staticClass:"org-font",on:{click:function(a){return e.removeSp(s)}}},[t("span",{staticClass:"remove-sp"},[e._v("删除")])])])})],2),t("div",{staticClass:"addSp"},[t("a",{staticClass:"link underline set-price",on:{click:function(a){return e.addSp()}}},[e._v("为指定地区城市设置运费")])])]),t("el-checkbox",{directives:[{name:"show",rawName:"v-show",value:!e.tempParams.isFree,expression:"!tempParams.isFree"}],attrs:{"true-label":1,"false-label":0},model:{value:e.tempParams.isFreeByIf,callback:function(a){e.$set(e.tempParams,"isFreeByIf",a)},expression:"tempParams.isFreeByIf"}},[e._v("指定条件设置包邮")]),t("div",{directives:[{name:"show",rawName:"v-show",value:!e.tempParams.isFree&&e.tempParams.isFreeByIf,expression:"!tempParams.isFree && tempParams.isFreeByIf"}],staticClass:"table-form table-form-wrap"},[t("table",[e._m(0),e._l(e.tempParams.freeConditionList,function(a,s){return t("tr",{key:s+"freeConf"},[t("td",{staticClass:"left-padding"},[t("span",{directives:[{name:"show",rawName:"v-show",value:!a.region,expression:"!item.region"}],staticClass:"small-font"},[e._v("未添加地区")]),t("span",{directives:[{name:"show",rawName:"v-show",value:a.region,expression:"item.region"}],staticClass:"region"},[e._v(e._s(a.region))]),t("span",{staticClass:"link underline",on:{click:function(a){return e.showCarryMode(3,s)}}},[e._v("编辑")])]),t("td",[t("select",{directives:[{name:"model",rawName:"v-model",value:a.type,expression:"item.type"}],staticClass:"form-control",on:{change:function(t){var s=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){var a="_value"in e?e._value:e.value;return a});e.$set(a,"type",t.target.multiple?s:s[0])}}},e._l(e.freeConditionType,function(a){return t("option",{key:a.id,domProps:{value:a.id}},[e._v(e._s(a.name))])}),0)]),t("td",[t("input",{directives:[{name:"model",rawName:"v-model",value:a.limit,expression:"item.limit"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:a.limit},on:{input:function(t){t.target.composing||e.$set(a,"limit",t.target.value)}}}),t("span",{staticClass:"ml10"},[e._v(e._s(1===a.type?"件":e.currencyName?e.currencyName:"")+"包邮")])]),t("td",{staticClass:"org-font"},[t("span",{directives:[{name:"show",rawName:"v-show",value:0===s,expression:"index === 0"}],staticClass:"el-icon-plus",on:{click:function(a){return e.addConf()}}}),t("span",{directives:[{name:"show",rawName:"v-show",value:0!==s,expression:"index !== 0"}],staticClass:"el-icon-minus",on:{click:function(a){return e.removeConf(s)}}})])])})],2)])],1),t("button",{staticClass:"btn-main save",on:{click:function(a){return e.saveTemp()}}},[e._v("保存")]),t("router-link",{staticClass:"btn-fill-main",attrs:{to:{name:"运费模板"}}},[e._v("返回")]),e.showAddressModal?t("expressAddress",{on:{dialogExpressAddress:e.dialogAddress,dialogExpressAddressCancel:e.dialogAddressCancel}}):e._e()],1)},r=[function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("tr",{staticClass:"th"},[t("th",{staticClass:"left-padding free-condition"},[e._v("选择地区")]),t("th",[e._v("选择运送方式")]),t("th",[e._v("包邮条件")]),t("th",{staticClass:"free-condition-coop"},[e._v("操作")])])}],i=(t("7f7f"),t("ac6a"),function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"express-address"},[t("el-dialog",{attrs:{title:"收货地区:",visible:e.showAddress,width:"640px","before-close":e.cancelAddress},on:{"update:visible":function(a){e.showAddress=a}}},[t("div",{directives:[{name:"show",rawName:"v-show",value:e.selectedAddress.length>0,expression:"selectedAddress.length>0"}],staticClass:"dialog-form selected-inner"},[t("span",{staticClass:"title"},[e._v("当前已选:")]),e._l(e.selectedAddress,function(a,s){return t("span",{key:s+"city",staticClass:"selected-item"},[e._v("\n        "+e._s(a)+"\n        "),t("span",{directives:[{name:"show",rawName:"v-show",value:s!==e.selectedAddress.length-1,expression:"index !== selectedAddress.length-1"}]},[e._v("、")])])})],2),t("div",{staticClass:"dialog-form border-bottom"},e._l(e.area,function(a){return t("div",{key:a.id,staticClass:"area-item"},[t("div",{staticClass:"area-name"},[e._v(e._s(a.areaName)+":")]),t("div",{staticClass:"area-content"},[t("div",{staticClass:"content-second"},e._l(a.children,function(s){return t("span",{key:s.id,staticClass:"province",class:{active:a.currentProvince.id===s.id},on:{click:function(t){return e.selectProvince(a,s)}}},[e._v("\n              "+e._s(s.areaName)+"\n            ")])}),0),t("div",{directives:[{name:"show",rawName:"v-show",value:a.currentProvince.children.length>0,expression:"item.currentProvince.children.length>0"}],staticClass:"content-third"},[t("p",[t("el-checkbox",{on:{change:function(t){return e.selectAll(a)}},model:{value:a.currentProvince.checkAll,callback:function(t){e.$set(a.currentProvince,"checkAll",t)},expression:"item.currentProvince.checkAll"}},[e._v("全选")])],1),e._l(a.currentProvince.children,function(s){return t("el-checkbox",{key:s.id,on:{change:function(t){return e.selectCity(a,s)}},model:{value:s.checked,callback:function(a){e.$set(s,"checked",a)},expression:"city.checked"}},[e._v("\n            "+e._s(s.areaName))])})],2)])])}),0),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("button",{staticClass:"btn-main",on:{click:function(a){return e.exportAddress()}}},[e._v("保存")]),t("button",{staticClass:"btn-fill-grey-main",on:{click:function(a){return e.cancelAddress()}}},[e._v("取消")])])])],1)}),n=[],o={name:"expressAddress",data:function(){return{showAddress:!0,area:[],selectedAddress:[]}},created:function(){this.init()},methods:{init:function(){this.getArea()},getArea:function(){var e=this;this.api.common.expressAddress({}).then(function(a){a.data.forEach(function(e){e.currentProvince={children:[]},e.children.forEach(function(e){e.checkAll=!1,e.children.forEach(function(e){e.checked=!1})})}),e.area=a.data})},selectProvince:function(e,a){e.currentProvince.id===a.id?e.currentProvince={children:[]}:e.currentProvince=a},selectAll:function(e){var a=this;e.currentProvince.children.forEach(function(t){t.checked=e.currentProvince.checkAll;var s=e.areaName+"|"+e.currentProvince.areaName+"|"+t.areaName;t.checked?a.selectedAddress.push(s):-1!==a.selectedAddress.indexOf(s)&&a.selectedAddress.splice(a.selectedAddress.indexOf(s),1)})},selectCity:function(e,a){var t=e.areaName+"|"+e.currentProvince.areaName+"|"+a.areaName;a.checked?this.selectedAddress.push(t):-1!==this.selectedAddress.indexOf(t)&&this.selectedAddress.splice(this.selectedAddress.indexOf(t),1),e.currentProvince.checkAll=!0,e.currentProvince.children.forEach(function(a){a.checked||(e.currentProvince.checkAll=!1)})},exportAddress:function(){this.$emit("dialogExpressAddress",{address:this.selectedAddress})},cancelAddress:function(){this.showAddress=!0,this.$emit("dialogExpressAddressCancel")}}},c=o,l=(t("f8f8"),t("2877")),d=Object(l["a"])(c,i,n,!1,null,null,null),m=d.exports,u={data:function(){return{id:"",isCopy:"",showAddressModal:!1,valuationModel:2,transportation:1,freeConditionType:[{id:1,name:"按件包邮"},{id:2,name:"按价包邮"}],currentType:"",currentIndex:"",currencyName:"",channelList:[],currencyList:[],tempParams:{templateName:"",isFree:1,isFreeByIf:0,status:1,isNoSend:0,undeliverableArea:"",channel:"",currency:"",carryMode:{defaultCarryMode:{firstLimit:"",firstPrice:"",secondLimit:"",secondPrice:""},carryModeList:[{region:"",firstLimit:"",firstPrice:"",secondLimit:"",secondPrice:""}]},freeConditionList:[{region:"",type:1,limit:""}]}}},created:function(){this.init()},methods:{init:function(){var e=this;this.id=this.$route.params.id||"",this.isCopy=this.$route.params.isCopy||"",this.api.goods.channel({}).then(function(a){e.channelList=a.data}),this.api.common.currency({}).then(function(a){e.currencyList=a.data,e.currencyList.forEach(function(e){e.mixName=e.symbol+" "+e.name})}),this.id&&this.getDetail(this.id)},showCarryMode:function(e,a){this.currentType=e,this.currentIndex=a,this.showAddressModal=!0},dialogAddress:function(e){1===this.currentType?this.tempParams.carryMode.carryModeList[this.currentIndex].region=e.address.join(","):2===this.currentType&&(this.tempParams.freeConditionList[this.currentIndex].region=e.address.join(",")),3==this.currentType&&(this.tempParams.undeliverableArea=e.address.join(","),this.tempParams.noSendNum=e.address.length),this.dialogAddressCancel()},dialogAddressCancel:function(){this.currentType="",this.currentIndex="",this.showAddressModal=!1},getDetail:function(e){var a=this;this.api.feetemplate.detail({id:e}).then(function(e){a.tempParams.templateName=e.data.templateName,a.tempParams.isFree=e.data.isFree,a.tempParams.currency=e.data.currency,e.data.undeliverableArea&&(a.tempParams.isNoSend=1,a.tempParams.undeliverableArea=e.data.undeliverableArea),a.tempParams.isFree||(a.valuationModel=e.data.valuationModel,a.tempParams.isFreeByIf=e.data.isFreeByIf,a.tempParams.carryMode=JSON.parse(e.data.carryMode),a.tempParams.freeConditionList=JSON.parse(e.data.freeCondition))})},addSp:function(){this.tempParams.carryMode.carryModeList.push({region:"",firstLimit:"",firstPrice:"",secondLimit:"",secondPrice:""})},removeSp:function(e){this.tempParams.carryMode.carryModeList.splice(e,1)},addConf:function(){this.tempParams.freeConditionList.push({region:"",type:1,limit:""})},removeConf:function(e){this.tempParams.freeConditionList.splice(e,1)},saveTemp:function(){var e=this,a=this.copy(this.tempParams);a.valuationModel=this.valuationModel,1===this.tempParams.isFree&&(a.valuationModel=0),this.tempParams.isNoSend||delete a.undeliverableArea,a.carryMode=JSON.stringify(a.carryMode),a.freeConditionList=JSON.stringify(a.freeConditionList);var t="add";this.id&&1==this.isCopy&&(t="edit",a.id=this.id),this.api.feetemplate[t](a).then(function(a){e.$message.success({message:a.message,showClose:!0}),e.$router.push({name:"运费模板"})})}},components:{expressAddress:m},watch:{"tempParams.currency":function(e){var a=this;this.currencyName="",this.currencyList.forEach(function(t){e===t.code&&(a.currencyName=t.name)})}}},p=u,v=(t("f6c2"),Object(l["a"])(p,s,r,!1,null,null,null));a["default"]=v.exports},"2ecd":function(e,a,t){},"6bd1":function(e,a,t){},f6c2:function(e,a,t){"use strict";var s=t("6bd1"),r=t.n(s);r.a},f8f8:function(e,a,t){"use strict";var s=t("2ecd"),r=t.n(s);r.a}}]);
//# sourceMappingURL=chunk-3d9426b9.49b8fa36.js.map